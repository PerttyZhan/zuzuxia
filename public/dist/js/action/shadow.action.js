define(["require","module","exports"],function(require,module,exports){var a={sdData:{$sd:$("#shawdow")},"close-modal":function(){var a=this.sdData.$sd;a.hide().find("input").not('input[type="button"]').val(""),a.find(".error,.errorL").hide()},sendMessage:function(a){var b=a.parents("form"),c=b.find('input[name="username"]').val(),d=b.find(".error"),e=a,f=30;if("邮箱"==this.valiType(c))b.find('input[name="registerBy"]').val("邮箱"),d.hide();else{if("电话"!=this.valiType(c))return d.text("请输入合法的邮箱或者手机号").show();b.find('input[name="registerBy"]').val("电话"),d.hide()}e.html("<strong>"+f+"</strong>s后重新发送").attr("disabled","disabled"),e.timer=setInterval(function(){f--,e.html("<strong>"+f+"</strong>s后重新发送").attr("disabled","disabled"),0==f&&(clearInterval(e.timer),e.timer=null,e.removeAttr("disabled").html("发送验证码"))},1e3),$.ajax({url:"/pc/sendMessage",type:"post",data:"src="+c,success:function(a){e.prev().val(a.val)},error:function(a){}})},"reg-submit":function(a){var b=a.parents("form").find(".error"),c=this.valiNull(a);if("boolean"!=typeof c)return c.qr!=c.sendqr?b.text("验证码不正确").show():void $.ajax({url:"/admin/register",type:"post",data:"data="+encodeURIComponent(JSON.stringify(c)),success:function(a){return"yes"!=a.msg?b.text(a.val).show():void location.reload()},error:function(a){}})},"open-getPass-modal":function(){var a=this.sdData.$sd;a.find(".getPassFace").addClass("active fadeInUp animated-login").siblings().removeClass("active")},login:function(a){var b=this.valiNull(a),c=a.parents("form").find(".error");"boolean"!=typeof b&&$.ajax({type:"post",url:"/admin/login",data:"data="+encodeURIComponent(JSON.stringify(b)),success:function(a){""==a.err?location.reload():c.text(a.err).show()},error:function(a){}})},"forgetPass-submit":function(a){var b=$("#reseterror"),c=this.valiNull(a);if("boolean"!=typeof c)return c.onepass.length<10||c.onepass.length>20?b.text("密码长度规定在10到20").show():c.onepass!=c.agapass?b.text("两次密码不一样").show():c.qr!=c.sendqr?b.text("短信验证码不正确").show():void $.ajax({url:"/admin/resetPass",type:"post",data:"data="+encodeURIComponent(JSON.stringify(c)),success:function(a){return"yes"!=a.msg?b.text(a.val).show():void location.reload()},error:function(a){}})}};module.exports=a});