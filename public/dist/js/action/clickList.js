define(["require","module","exports"],function(require,module,exports){var a=require("WdatePicker"),b={"open-login-modal":function(){var a=$("#shawdow");a.show().find(".loginFace").addClass("active fadeInUp animated-login").siblings().removeClass("active")},"open-reg-modal":function(){var a=$("#shawdow");a.show().find(".regFace").addClass("active fadeInUp animated-login").siblings().removeClass("active")},"open-getPass-modal":function(){var a=$("#shawdow");a.find(".getPassFace").addClass("active fadeInUp animated-login").siblings().removeClass("active")},"close-modal":function(){var a=$("#shawdow");a.hide().find("input").not('input[type="button"]').val(""),a.find(".error,.errorL").hide()},login:function(a){var b=$("#error"),c=$("#loginForm"),d={username:c.find('input[name="username"]').val(),password:c.find('input[name="pass"]').val()};return""==d.username?b.text("账号不能为空").show():""==d.password?b.text("密码不能为空").show():void $.ajax({type:"post",url:a.data("url"),data:"username="+d.username+"&password="+d.password,success:function(a){""==a.err?location.reload():b.text(a.err).show()},error:function(a){}})},"qq-login":function(){QC.Login.showPopup()},"reg-sendMessage":function(a){var b=$("#loginU"),c=b.val(),d=$("#regerror"),e=a,f=30;if("邮箱"==this.valiType(c))$("#registerForm").find('input[name="registerBy"]').val("邮箱"),d.hide();else{if("电话"!=this.valiType(c))return d.text("请输入合法的邮箱或者手机号").show();$("#registerForm").find('input[name="registerBy"]').val("电话"),d.hide()}e.html("<strong>"+f+"</strong>s后重新发送").attr("disabled","disabled"),e.timer=setInterval(function(){f--,e.html("<strong>"+f+"</strong>s后重新发送").attr("disabled","disabled"),0==f&&(clearInterval(e.timer),e.timer=null,e.removeAttr("disabled").html("发送验证码"))},1e3),$.ajax({url:a.data("url"),type:"post",data:"src="+c,success:function(a){e.prev().val(a.val)},error:function(a){}})},"reg-submit":function(a){var b=$("#registerForm"),c=$("#regerror"),d={username:b.find('input[name="username"]').val(),password:b.find('input[name="password"]').val(),registerBy:b.find('input[name="registerBy"]').val()};return""==d.username||""==d.password?c.text("用户名/密码不能空").show():b.find('input[type="checkbox"]').prop("checked")?void $.ajax({url:a.data("url"),type:"post",data:"username="+d.username+"&password="+d.password+"&registerBy="+d.registerBy,success:function(a){return"yes"!=a.msg?c.text(a.val).show():void location.reload()},error:function(a){}}):c.text("请看协议,看后没意见请打钩").show()},"forgetPass-submit":function(a){var b=$("#resetForm"),c=$("#reseterror"),d=b.find('input[name="qr"]').val(),e=b.find('input[name="sendqr"]').val(),f={username:b.find('input[name="username"]').val(),onepass:b.find('input[name="onepass"]').val(),agapass:b.find('input[name="agapass"]').val()};return""==f.username?c.text("邮箱/手机号不能空").show():""==f.onepass?c.text("密码不能空").show():""==f.agapass?c.text("确定密码不能空").show():""==d?c.text("短信验证码不能空").show():f.onepass.length<10||f.onepass.length>20?c.text("密码长度规定在10到20").show():f.onepass!=f.agapass?c.text("两次密码不一样").show():d!=e?c.text("短信验证码不正确").show():void $.ajax({url:a.data("url"),type:"post",data:"username="+f.username+"&password="+f.onepass,success:function(a){return"yes"!=a.msg?c.text(a.val).show():void location.reload()},error:function(a){}})},"forget-sendMessage":function(a){var b=$("#resetForm").find('input[name="username"]'),c=b.val(),d=$("#reseterror");$this=a;var e=30;if("邮箱"==this.valiType(c))d.hide();else{if("电话"!=this.valiType(c))return d.text("请输入合法的邮箱或者手机号").show();d.hide()}$this.html("<strong>"+e+"</strong>s后重新发送").attr("disabled","disabled"),$this.timer=setInterval(function(){e--,$this.html("<strong>"+e+"</strong>s后重新发送").attr("disabled","disabled"),0==e&&(clearInterval($this.timer),$this.timer=null,$this.removeAttr("disabled").html("发送验证码"))},1e3),$.ajax({url:$this.data("url"),type:"post",data:"src="+c,success:function(a){$this.prev().val(a.val)},error:function(a){}})},lgoinOut:function(a){$.ajax({url:a.data("url"),type:"get",success:function(a){location.reload()},error:function(a){}})},"house-collect":function(a){var b=$("#message-no-login"),c=$(".apt-id").val();return null==document.getElementById("dropMenu")?(b.removeClass("fadeOutRight animated-fadeOUt").show().addClass("fadeInUp animated-login"),setTimeout(function(){b.removeClass("fadeInUp animated-login").addClass("fadeOutRight animated-fadeOUt")},1e3)):($this=a,void $.ajax({url:"/collectHouse",type:"post",data:"_id="+c,success:function(a){""!=a.err||location.reload()}}))},"house-appoint":function(a){var b=$("#message-no-login"),c=$("#message-no-perfect"),d=$("#message-apt-success");if(_id=$(".apt-id").val(),_url="",_text="",require=a.data("require"),null==document.getElementById("dropMenu"))return b.removeClass("fadeOutRight animated-fadeOUt").show().addClass("fadeInUp animated-login"),setTimeout(function(){b.removeClass("fadeInUp animated-login").addClass("fadeOutRight animated-fadeOUt")},1e3);if(""==require)return c.removeClass("fadeOutRight animated-fadeOUt").show().addClass("fadeInUp animated-login"),setTimeout(function(){c.removeClass("fadeInUp animated-login").addClass("fadeOutRight animated-fadeOUt")},1e3);$.ajax({url:a.data("url"),type:"post",data:"_id="+_id,success:function(a){return""==a.err?(d.removeClass("fadeOutRight animated-fadeOUt").show().addClass("fadeInUp animated-login"),setTimeout(function(){d.removeClass("fadeInUp animated-login").addClass("fadeOutRight animated-fadeOUt")},1e3)):void 0}})},"check-message":function(a){var b=a,c=b.prev().val();$.ajax({type:"post",url:a.data("url"),data:"_id="+c,success:function(){b.remove()}})},"dele-collect":function(a){var b=a.data("val");$.ajax({type:"post",url:"/deleCollectHouse",data:"_id="+b,success:function(a){location.reload()},error:function(){}})},"turn-page":function(a){$this=a;var b=$this.prev().val(),c=$this.prev().prev().val();b=""==b?1:b,b>c?alert("超过总数,最多只有"+c):window.location.href="personCenter?count="+b},"open-site-modal":function(a){a.next().hasClass("active")?a.next().removeClass("active"):a.next().addClass("active")},"open-time-modal":function(a){a.next().hasClass("active")?a.next().removeClass("active"):a.next().addClass("active")},"open-satrt-modal":function(){a()},"calc-endtime":function(a){var b=$("#starttime"),c=$("#duringtime"),d=a;if(""!=b.val()&&""!=c.val()){var e=b.val().split("-"),f=parseInt(e[0]),g=parseInt(e[1]),h=e[2],i=parseInt(c.val());g+=i,g>12&&(f+=parseInt(g/12),g%=12),10>g&&(g="0"+g),d.val(f+"-"+g+"-"+h)}},"index-apt":function(a){var b=$("#message-no-login"),c=$("#message-no-perfect"),require=a.data("require");if(null==document.getElementById("dropMenu"))return b.removeClass("fadeOutRight animated-fadeOUt").show().addClass("fadeInUp animated-login").find("span").text("您还为登录"),setTimeout(function(){b.removeClass("fadeInUp animated-login").addClass("fadeOutRight animated-fadeOUt")},1e3);if(""==require)return c.removeClass("fadeOutRight animated-fadeOUt").show().addClass("fadeInUp animated-login"),setTimeout(function(){c.removeClass("fadeInUp animated-login").addClass("fadeOutRight animated-fadeOUt")},1e3);for(var d=a.parents("form"),e=d.find('input[type="text"]'),f=0,g=e.length;g>f;f++)if(e.eq(f).parent().css("border","none"),""==e.eq(f).val())return e.eq(f).parent().css("border","1px solid red"),b.removeClass("fadeOutRight animated-fadeOUt").show().addClass("fadeInUp animated-login").find("span").text(e.eq(f).attr("placeholder")+"不能为空"),setTimeout(function(){b.removeClass("fadeInUp animated-login").addClass("fadeOutRight animated-fadeOUt")},1e3);a.parents("form").submit()},valiType:function(a){var b=/^1\d{10}$/,c=/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/;return b.test(a)?"电话":c.test(a)?"邮箱":"其它"}};module.exports=b});