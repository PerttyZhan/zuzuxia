var tinymce={majorVersion:"3",minorVersion:"2.1.1",releaseDate:"2008-11-27",_init:function(){function a(a){return a.src&&/tiny_mce(|_dev|_src|_gzip|_jquery|_prototype).js/.test(a.src)?(/_(src|dev)\.js/g.test(a.src)&&(h.suffix="_src"),-1!=(f=a.src.indexOf("?"))&&(h.query=a.src.substring(f+1)),h.baseURL=a.src.substring(0,a.src.lastIndexOf("/")),e&&-1==h.baseURL.indexOf("://")&&(h.baseURL=e+h.baseURL),h.baseURL):null}var b,c,d,e,f,g,h=this,i=document,j=window,k=navigator,l=k.userAgent;if(h.isOpera=j.opera&&opera.buildNumber,h.isWebKit=/WebKit/.test(l),h.isOldWebKit=h.isWebKit&&!j.getSelection().getRangeAt,h.isIE=!h.isWebKit&&!h.isOpera&&/MSIE/gi.test(l)&&/Explorer/gi.test(k.appName),h.isIE6=h.isIE&&/MSIE [56]/.test(l),h.isGecko=!h.isWebKit&&/Gecko/.test(l),h.isMac=-1!=l.indexOf("Mac"),h.isAir=/adobeair/i.test(l),j.tinyMCEPreInit)return h.suffix=tinyMCEPreInit.suffix,h.baseURL=tinyMCEPreInit.base,void(h.query=tinyMCEPreInit.query);for(h.suffix="",c=i.getElementsByTagName("base"),b=0;b<c.length;b++)(g=c[b].href)&&(/^https?:\/\/[^\/]+$/.test(g)&&(g+="/"),e=g?g.match(/.*\//)[0]:"");for(c=i.getElementsByTagName("script"),b=0;b<c.length;b++)if(a(c[b]))return;if(d=i.getElementsByTagName("head")[0])for(c=d.getElementsByTagName("script"),b=0;b<c.length;b++)if(a(c[b]))return},is:function(a,b){var c=typeof a;return b?"array"==b&&a instanceof Array?!0:c==b:"undefined"!=c},each:function(a,b,c){var d,e;if(!a)return 0;if(c=c||a,"undefined"!=typeof a.length){for(d=0,e=a.length;e>d;d++)if(b.call(c,a[d],d,a)===!1)return 0}else for(d in a)if(a.hasOwnProperty(d)&&b.call(c,a[d],d,a)===!1)return 0;return 1},map:function(a,b){var c=[];return tinymce.each(a,function(a){c.push(b(a))}),c},grep:function(a,b){var c=[];return tinymce.each(a,function(a){(!b||b(a))&&c.push(a)}),c},inArray:function(a,b){var c,d;if(a)for(c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},extend:function(a,b){var c,d=arguments;for(c=1;c<d.length;c++)b=d[c],tinymce.each(b,function(b,c){"undefined"!=typeof b&&(a[c]=b)});return a},trim:function(a){return(a?""+a:"").replace(/^\s*|\s*$/g,"")},create:function(a,b){var c,d,e,f,g,h=this,i=0;if(a=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(a),e=a[3].match(/(^|\.)(\w+)$/i)[2],d=h.createNS(a[3].replace(/\.\w+$/,"")),!d[e]){if("static"==a[2])return d[e]=b,void(this.onCreate&&this.onCreate(a[2],a[3],d[e]));b[e]||(b[e]=function(){},i=1),d[e]=b[e],h.extend(d[e].prototype,b),a[5]&&(c=h.resolve(a[5]).prototype,f=a[5].match(/\.(\w+)$/i)[1],g=d[e],i?d[e]=function(){return c[f].apply(this,arguments)}:d[e]=function(){return this.parent=c[f],g.apply(this,arguments)},d[e].prototype[e]=d[e],h.each(c,function(a,b){d[e].prototype[b]=c[b]}),h.each(b,function(a,b){c[b]?d[e].prototype[b]=function(){return this.parent=c[b],a.apply(this,arguments)}:b!=e&&(d[e].prototype[b]=a)})),h.each(b["static"],function(a,b){d[e][b]=a}),this.onCreate&&this.onCreate(a[2],a[3],d[e].prototype)}},walk:function(a,b,c,d){d=d||this,a&&(c&&(a=a[c]),tinymce.each(a,function(a,e){return b.call(d,a,e,c)===!1?!1:void tinymce.walk(a,b,c,d)}))},createNS:function(a,b){var c,d;for(b=b||window,a=a.split("."),c=0;c<a.length;c++)d=a[c],b[d]||(b[d]={}),b=b[d];return b},resolve:function(a,b){var c,d;for(b=b||window,a=a.split("."),c=0,d=a.length;d>c&&(b=b[a[c]],b);c++);return b},addUnload:function(a,b){function c(){var a,b,g=e.unloads;if(g){for(b in g)a=g[b],a&&a.func&&a.func.call(a.scope,1);f.detachEvent?(f.detachEvent("onbeforeunload",d),f.detachEvent("onunload",c)):f.removeEventListener&&f.removeEventListener("unload",c,!1),e.unloads=a=g=f=c=null,window.CollectGarbage&&window.CollectGarbage()}}function d(){function a(){b.detachEvent("onstop",a),c(),b=null}var b=document;"interactive"==b.readyState&&(b.attachEvent("onstop",a),window.setTimeout(function(){b.detachEvent("onstop",a)},0))}var e=this,f=window;return a={func:a,scope:b||this},e.unloads?e.unloads.push(a):(f.attachEvent?(f.attachEvent("onunload",c),f.attachEvent("onbeforeunload",d)):f.addEventListener&&f.addEventListener("unload",c,!1),e.unloads=[a]),a},removeUnload:function(a){var b=this.unloads,c=null;return tinymce.each(b,function(d,e){return d&&d.func==a?(b.splice(e,1),c=a,!1):void 0}),c},explode:function(a,b){return a?tinymce.map(a.split(b||","),tinymce.trim):a},_addVer:function(a){var b;return this.query?(b=(-1==a.indexOf("?")?"?":"&")+this.query,-1==a.indexOf("#")?a+b:a.replace("#",b+"#")):a}};window.tinymce=tinymce,tinymce._init(),tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(a){this.scope=a||this,this.listeners=[]},add:function(a,b){return this.listeners.push({cb:a,scope:b||this.scope}),a},addToTop:function(a,b){return this.listeners.unshift({cb:a,scope:b||this.scope}),a},remove:function(a){var b=this.listeners,c=null;return tinymce.each(b,function(d,e){return a==d.cb?(c=a,b.splice(e,1),!1):void 0}),c},dispatch:function(){var a,b,c,d=arguments,e=this.listeners;for(b=0;b<e.length&&(c=e[b],a=c.cb.apply(c.scope,d),a!==!1);b++);return a}}),function(){var a=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(b,c){var d,e=this;return c=e.settings=c||{},/^(mailto|news|javascript|about):/i.test(b)||/^\s*#/.test(b)?void(e.source=b):(0===b.indexOf("/")&&0!==b.indexOf("//")&&(b=(c.base_uri?c.base_uri.protocol||"http":"http")+"://mce_host"+b),-1===b.indexOf(":/")&&0!==b.indexOf("//")&&(b=(c.base_uri.protocol||"http")+"://mce_host"+e.toAbsPath(c.base_uri.path,b)),b=b.replace(/@@/g,"(mce_at)"),b=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(b),a(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(a,c){var d=b[c];d&&(d=d.replace(/\(mce_at\)/g,"@@")),e[a]=d}),void((d=c.base_uri)&&(e.protocol||(e.protocol=d.protocol),e.userInfo||(e.userInfo=d.userInfo),e.port||"mce_host"!=e.host||(e.port=d.port),e.host&&"mce_host"!=e.host||(e.host=d.host),e.source="")))},setPath:function(a){var b=this;a=/^(.*?)\/?(\w+)?$/.exec(a),b.path=a[0],b.directory=a[1],b.file=a[2],b.source="",b.getURI()},toRelative:function(a){var b,c=this;return"./"===a?a:(a=new tinymce.util.URI(a,{base_uri:c}),"mce_host"!=a.host&&c.host!=a.host&&a.host||c.port!=a.port||c.protocol!=a.protocol?a.getURI():(b=c.toRelPath(c.path,a.path),a.query&&(b+="?"+a.query),a.anchor&&(b+="#"+a.anchor),b))},toAbsolute:function(a,b){var a=new tinymce.util.URI(a,{base_uri:this});return a.getURI(this.host==a.host?b:0)},toRelPath:function(a,b){var c,d,e,f=0,g="";if(a=a.substring(0,a.lastIndexOf("/")),a=a.split("/"),c=b.split("/"),a.length>=c.length)for(d=0,e=a.length;e>d;d++)if(d>=c.length||a[d]!=c[d]){f=d+1;break}if(a.length<c.length)for(d=0,e=c.length;e>d;d++)if(d>=a.length||a[d]!=c[d]){f=d+1;break}if(1==f)return b;for(d=0,e=a.length-(f-1);e>d;d++)g+="../";for(d=f-1,e=c.length;e>d;d++)g+=d!=f-1?"/"+c[d]:c[d];return g},toAbsPath:function(b,c){var d,e=0,f=[];for(b=b.split("/"),c=c.split("/"),a(b,function(a){a&&f.push(a)}),b=f,d=c.length-1,f=[];d>=0;d--)0!=c[d].length&&"."!=c[d]&&(".."!=c[d]?e>0?e--:f.push(c[d]):e++);return d=b.length-e,0>=d?"/"+f.reverse().join("/"):"/"+b.slice(0,d).join("/")+"/"+f.reverse().join("/")},getURI:function(a){var b,c=this;return(!c.source||a)&&(b="",a||(c.protocol&&(b+=c.protocol+"://"),c.userInfo&&(b+=c.userInfo+"@"),c.host&&(b+=c.host),c.port&&(b+=":"+c.port)),c.path&&(b+=c.path),c.query&&(b+="?"+c.query),c.anchor&&(b+="#"+c.anchor),c.source=b),c.source}})}(),function(){var a=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(b){var c,d=this.get(b);return d&&a(d.split("&"),function(a){a=a.split("="),c=c||{},c[unescape(a[0])]=unescape(a[1])}),c},setHash:function(b,c,d,e,f,g){var h="";a(c,function(a,b){h+=(h?"&":"")+escape(b)+"="+escape(a)}),this.set(b,h,d,e,f,g)},get:function(a){var b,c,d=document.cookie,e=a+"=";if(d){if(c=d.indexOf("; "+e),-1==c){if(c=d.indexOf(e),0!=c)return null}else c+=2;return b=d.indexOf(";",c),-1==b&&(b=d.length),unescape(d.substring(c+e.length,b))}},set:function(a,b,c,d,e,f){document.cookie=a+"="+escape(b)+(c?"; expires="+c.toGMTString():"")+(d?"; path="+escape(d):"")+(e?"; domain="+e:"")+(f?"; secure":"")},remove:function(a,b){var c=new Date;c.setTime(c.getTime()-1e3),this.set(a,"",c,b,c)}})}(),tinymce.create("static tinymce.util.JSON",{serialize:function(a){var b,c,d,e=tinymce.util.JSON.serialize;if(null==a)return"null";if(d=typeof a,"string"==d)return c="\bb	t\nn\ff\rr\"\"''\\\\",'"'+a.replace(/([\u0080-\uFFFF\x00-\x1f\"])/g,function(a,d){return b=c.indexOf(d),b+1?"\\"+c.charAt(b+1):(a=d.charCodeAt().toString(16),"\\u"+"0000".substring(a.length)+a)})+'"';if("object"==d){if(a instanceof Array){for(b=0,c="[";b<a.length;b++)c+=(b>0?",":"")+e(a[b]);return c+"]"}c="{";for(b in a)c+="function"!=typeof a[b]?(c.length>1?',"':'"')+b+'":'+e(a[b]):"";return c+"}"}return""+a},parse:function(s){try{return eval("("+s+")")}catch(ex){}}}),tinymce.create("static tinymce.util.XHR",{send:function(a){function b(a){d=0;try{d=new ActiveXObject(a)}catch(b){}return d}function c(){!a.async||4==d.readyState||g++>1e4?(a.success&&1e4>g&&200==d.status?a.success.call(a.success_scope,""+d.responseText,d,a):a.error&&a.error.call(a.error_scope,g>1e4?"TIMED_OUT":"GENERAL",d,a),d=null):f.setTimeout(c,10)}var d,e,f=window,g=0;if(a.scope=a.scope||this,a.success_scope=a.success_scope||a.scope,a.error_scope=a.error_scope||a.scope,a.async=a.async===!1?!1:!0,a.data=a.data||"",d=f.XMLHttpRequest?new XMLHttpRequest:b("Microsoft.XMLHTTP")||b("Msxml2.XMLHTTP")){if(d.overrideMimeType&&d.overrideMimeType(a.content_type),d.open(a.type||(a.data?"POST":"GET"),a.url,a.async),a.content_type&&d.setRequestHeader("Content-Type",a.content_type),d.send(a.data),!a.async)return c();e=f.setTimeout(c,10)}}}),function(){var a=tinymce.extend,b=tinymce.util.JSON,c=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(b){this.settings=a({},b),this.count=0},send:function(d){var e=d.error,f=d.success;d=a(this.settings,d),d.success=function(a,c){a=b.parse(a),"undefined"==typeof a&&(a={error:"JSON Parse error."}),a.error?e.call(d.error_scope||d.scope,a.error,c):f.call(d.success_scope||d.scope,a.result)},d.error=function(a,b){e.call(d.error_scope||d.scope,a,b)},d.data=b.serialize({id:d.id||"c"+this.count++,method:d.method,params:d.params}),d.content_type="application/json",c.send(d)},"static":{sendRPC:function(a){return(new tinymce.util.JSONRequest).send(a)}}})}(),function(){var each=tinymce.each,is=tinymce.is,isWebKit=tinymce.isWebKit,isIE=tinymce.isIE;tinymce.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,listeners:{},pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,cache:{},idPattern:/^#[\w]+$/,elmPattern:/^[\w_*]+$/,elmClassPattern:/^([\w_]*)\.([\w_]+)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(a,b){var c=this;if(c.doc=a,c.win=window,c.files={},c.cssFlicker=!1,c.counter=0,c.boxModel=!tinymce.isIE||"CSS1Compat"==a.compatMode,c.stdMode=8===a.documentMode,this.settings=b=tinymce.extend({keep_values:!1,hex_colors:1,process_html:1},b),tinymce.isIE6)try{a.execCommand("BackgroundImageCache",!1,!0)}catch(d){c.cssFlicker=!0}tinymce.addUnload(c.destroy,c)},getRoot:function(){var a=this,b=a.settings;return b&&a.get(b.root_element)||a.doc.body},getViewPort:function(a){var b,c;return a=a?a:this.win,b=a.document,c=this.boxModel?b.documentElement:b.body,{x:a.pageXOffset||c.scrollLeft,y:a.pageYOffset||c.scrollTop,w:a.innerWidth||c.clientWidth,h:a.innerHeight||c.clientHeight}},getRect:function(a){var b,c,d=this;return a=d.get(a),b=d.getPos(a),c=d.getSize(a),{x:b.x,y:b.y,w:c.w,h:c.h}},getSize:function(a){var b,c,d=this;return a=d.get(a),b=d.getStyle(a,"width"),c=d.getStyle(a,"height"),-1===b.indexOf("px")&&(b=0),-1===c.indexOf("px")&&(c=0),{w:parseInt(b)||a.offsetWidth||a.clientWidth,h:parseInt(c)||a.offsetHeight||a.clientHeight}},getParent:function(a,b,c){var d,e=this.settings;for(a=this.get(a),e.strict_root&&(c=c||this.getRoot()),is(b,"string")&&(d=b.toUpperCase(),b=function(a){var b=!1;return 1==a.nodeType&&"*"===d?(b=!0,!1):(each(d.split(","),function(c){return 1==a.nodeType&&(e.strict&&a.nodeName.toUpperCase()==c||a.nodeName.toUpperCase()==c)?(b=!0,!1):void 0}),b)});a;){if(a==c)return null;if(b(a))return a;a=a.parentNode}return null},get:function(a){var b;return a&&this.doc&&"string"==typeof a&&(b=a,a=this.doc.getElementById(a),a&&a.id!==b)?this.doc.getElementsByName(b)[1]:a},select:function(pa,s){function get(a,b){return a.getElementsByTagName(b.toLowerCase())}function get(a,b){return a.getElementsByTagName(b)}function collect(a){a.mce_save||(a.mce_save=1,o.push(a))}function collectIE(a){a.getAttribute("mce_save")||(a.setAttribute("mce_save","1"),o.push(a))}function find(a,b,c){var d,e,f=get(c,a);for(d=0,e=f.length;e>d;d++)b(f[d])}var t=this,cs,c,pl,o=[],x,i,l,n,xp;if(s=t.get(s)||t.doc,s.querySelectorAll)return s!=t.doc&&(i=s.id,s.id="_mc_tmp",pa="#_mc_tmp "+pa),l=tinymce.grep(s.querySelectorAll(pa)),s.id=i,l;if(t.selectorRe||(t.selectorRe=/^([\w\\*]+)?(?:#([\w\\]+))?(?:\.([\w\\\.]+))?(?:\[\@([\w\\]+)([\^\$\*!]?=)([\w\\]+)\])?(?:\:([\w\\]+))?/i),tinymce.isAir)return each(tinymce.explode(pa),function(a){for((xp=t.cache[a])||(xp="",each(a.split(" "),function(a){a=t.selectorRe.exec(a),xp+=a[1]?"//"+a[1]:"//*",a[2]&&(xp+="[@id='"+a[2]+"']"),a[3]&&each(a[3].split("."),function(a){xp+="[@class = '"+a+"' or contains(concat(' ', @class, ' '), ' "+a+" ')]"})}),t.cache[a]=xp),xp=t.doc.evaluate(xp,s,null,4,null);n=xp.iterateNext();)o.push(n)}),o;if(t.settings.strict,t.elmPattern.test(pa)){for(x=get(s,pa),i=0,l=x.length;l>i;i++)o.push(x[i]);return o}if(t.elmClassPattern.test(pa)){for(pl=t.elmClassPattern.exec(pa),x=get(s,pl[1]||"*"),c=" "+pl[2]+" ",i=0,l=x.length;l>i;i++)n=x[i],n.className&&-1!==(" "+n.className+" ").indexOf(c)&&o.push(n);return o}return each(pa.split(","),function(v,i){if(v=tinymce.trim(v),t.elmPattern.test(v))return void each(get(s,v),function(a){collect(a)});if(t.elmClassPattern.test(v))return x=t.elmClassPattern.exec(v),void each(get(s,x[1]),function(a){t.hasClass(a,x[2])&&collect(a)});if(!(cs=t.cache[pa])){for(cs="x=(function(cf, s) {",pl=v.split(" "),each(pl,function(a){var b=t.selectorRe.exec(a);b[1]=b[1]||"*",cs+='find("'+b[1]+'", function(n) {',b[2]&&(cs+='if (n.id !== "'+b[2]+'") return;'),b[3]&&(cs+='var c = " " + n.className + " ";',cs+="if (",c="",each(b[3].split("."),function(a){a&&(c+=(c?"||":"")+'c.indexOf(" '+a+' ") === -1')}),cs+=c+") return;")}),cs+="cf(n);",i=pl.length-1;i>=0;i--)cs+="}, "+(i?"n":"s")+");";cs+="})",t.cache[pa]=cs=eval(cs)}cs(isIE?collectIE:collect,s)}),each(o,function(a){isIE?a.removeAttribute("mce_save"):delete a.mce_save}),o},add:function(a,b,c,d,e){var f=this;return this.run(a,function(a){var g;return g=is(b,"string")?f.doc.createElement(b):b,f.setAttribs(g,c),d&&(d.nodeType?g.appendChild(d):f.setHTML(g,d)),e?g:a.appendChild(g)})},create:function(a,b,c){return this.add(this.doc.createElement(a),a,b,c,1)},createHTML:function(a,b,c){var d,e="",f=this;e+="<"+a;for(d in b)b.hasOwnProperty(d)&&(e+=" "+d+'="'+f.encode(b[d])+'"');return tinymce.is(c)?e+">"+c+"</"+a+">":e+" />"},remove:function(a,b){return this.run(a,function(a){var c;return(c=a.parentNode)?(b&&each(a.childNodes,function(b){c.insertBefore(b.cloneNode(!0),a)}),c.removeChild(a)):null})},setStyle:function(a,b,c){var d=this;return d.run(a,function(e){var f;switch(f=e.style,b=b.replace(/-(\D)/g,function(a,b){return b.toUpperCase()}),d.pixelStyles.test(b)&&(tinymce.is(c,"number")||/^[\-0-9\.]+$/.test(c))&&(c+="px"),b){case"opacity":isIE&&(f.filter=""===c?"":"alpha(opacity="+100*c+")",a.currentStyle&&a.currentStyle.hasLayout||(f.display="inline-block")),f[b]=f["-moz-opacity"]=f["-khtml-opacity"]=c||"";break;case"float":isIE?f.styleFloat=c:f.cssFloat=c;break;default:f[b]=c||""}d.settings.update_styles&&d.setAttrib(e,"mce_style")})},getStyle:function(a,b,c){if(a=this.get(a),!a)return!1;if(this.doc.defaultView&&c){b=b.replace(/[A-Z]/g,function(a){return"-"+a});try{return this.doc.defaultView.getComputedStyle(a,null).getPropertyValue(b)}catch(d){return null}}return b=b.replace(/-(\D)/g,function(a,b){return b.toUpperCase()}),"float"==b&&(b=isIE?"styleFloat":"cssFloat"),a.currentStyle&&c?a.currentStyle[b]:a.style[b]},setStyles:function(a,b){var c,d=this,e=d.settings;c=e.update_styles,e.update_styles=0,each(b,function(b,c){d.setStyle(a,c,b)}),e.update_styles=c,e.update_styles&&d.setAttrib(a,e.cssText)},setAttrib:function(a,b,c){var d=this;if(a&&b)return d.settings.strict&&(b=b.toLowerCase()),this.run(a,function(a){var e=d.settings;switch(b){case"style":if(!is(c,"string"))return void each(c,function(b,c){d.setStyle(a,c,b)});e.keep_values&&(c&&!d._isRes(c)?a.setAttribute("mce_style",c,2):a.removeAttribute("mce_style",2)),a.style.cssText=c;break;case"class":a.className=c||"";break;case"src":case"href":e.keep_values&&(e.url_converter&&(c=e.url_converter.call(e.url_converter_scope||d,c,b,a)),d.setAttrib(a,"mce_"+b,c,2));break;case"shape":a.setAttribute("mce_style",c)}is(c)&&null!==c&&0!==c.length?a.setAttribute(b,""+c,2):a.removeAttribute(b,2)})},setAttribs:function(a,b){var c=this;return this.run(a,function(a){each(b,function(b,d){c.setAttrib(a,d,b)})})},getAttrib:function(a,b,c){var d,e=this;if(a=e.get(a),!a||1!==a.nodeType)return!1;if(is(c)||(c=""),/^(src|href|style|coords|shape)$/.test(b)&&(d=a.getAttribute("mce_"+b)))return d;if(isIE&&e.props[b]&&(d=a[e.props[b]],d=d&&d.nodeValue?d.nodeValue:d),d||(d=a.getAttribute(b,2)),"style"===b&&(d=d||a.style.cssText,d&&(d=e.serializeStyle(e.parseStyle(d)),e.settings.keep_values&&!e._isRes(d)&&a.setAttribute("mce_style",d))),isWebKit&&"class"===b&&d&&(d=d.replace(/(apple|webkit)\-[a-z\-]+/gi,"")),isIE)switch(b){case"rowspan":case"colspan":1===d&&(d="");break;case"size":("+0"===d||20===d)&&(d="");break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":0===d&&(d="");break;case"hspace":-1===d&&(d="");break;case"maxlength":case"tabindex":(32768===d||2147483647===d||"32768"===d)&&(d="");break;case"compact":case"noshade":case"nowrap":return 65535===d?b:c;case"shape":d=d.toLowerCase();break;default:0===b.indexOf("on")&&d&&(d=(""+d).replace(/^function\s+anonymous\(\)\s+\{\s+(.*)\s+\}$/,"$1"))}return void 0!==d&&null!==d&&""!==d?""+d:c},getPos:function(a){var b,c,d=this,e=0,f=0,g=d.doc;if(a=d.get(a),a&&isIE)return a=a.getBoundingClientRect(),b=d.boxModel?g.documentElement:g.body,e=d.getStyle(d.select("html")[0],"borderWidth"),e=("medium"==e||d.boxModel&&!d.isIE6)&&2||e,a.top+=d.win.self!=d.win.top?2:0,{x:a.left+b.scrollLeft-e,y:a.top+b.scrollTop-e};for(c=a;c;)e+=c.offsetLeft||0,f+=c.offsetTop||0,c=c.offsetParent;for(c=a;c&&(/^table-row|inline.*/i.test(d.getStyle(c,"display",1))||(e-=c.scrollLeft||0,f-=c.scrollTop||0),c=c.parentNode,c!=g.body););return{x:e,y:f}},parseStyle:function(a){function b(a,b,c){var d,e,g,h;d=f[a+"-top"+b],d&&(e=f[a+"-right"+b],d==e&&(g=f[a+"-bottom"+b],e==g&&(h=f[a+"-left"+b],g==h&&(f[c]=h,delete f[a+"-top"+b],delete f[a+"-right"+b],delete f[a+"-bottom"+b],delete f[a+"-left"+b]))))}function c(a,b,c,d){var e;e=f[b],e&&(e=f[c],e&&(e=f[d],e&&(f[a]=f[b]+" "+f[c]+" "+f[d],delete f[b],delete f[c],delete f[d])))}var d=this,e=d.settings,f={};return a?(a=a.replace(/&(#?[a-z0-9]+);/g,"&$1_MCE_SEMI_"),each(a.split(";"),function(a){var b,c=[];a&&(a=a.replace(/_MCE_SEMI_/g,";"),a=a.replace(/url\([^\)]+\)/g,function(a){return c.push(a),"url("+c.length+")"}),a=a.split(":"),b=tinymce.trim(a[1]),b=b.replace(/url\(([^\)]+)\)/g,function(a,b){return c[parseInt(b)-1]}),b=b.replace(/rgb\([^\)]+\)/g,function(a){return d.toHex(a)}),e.url_converter&&(b=b.replace(/url\([\'\"]?([^\)\'\"]+)[\'\"]?\)/g,function(a,b){return"url("+e.url_converter.call(e.url_converter_scope||d,d.decode(b),"style",null)+")"})),f[tinymce.trim(a[0]).toLowerCase()]=b)}),b("border","","border"),b("border","-width","border-width"),b("border","-color","border-color"),b("border","-style","border-style"),b("padding","","padding"),b("margin","","margin"),c("border","border-width","border-style","border-color"),isIE&&"medium none"==f.border&&(f.border=""),f):f},serializeStyle:function(a){var b="";return each(a,function(a,c){if(c&&a){if(tinymce.isGecko&&0===c.indexOf("-moz-"))return;switch(c){case"color":case"background-color":a=a.toLowerCase()}b+=(b?" ":"")+c+": "+a+";"}}),b},loadCSS:function(a){var b=this;b.doc;a||(a=""),each(a.split(","),function(a){b.files[a]||(b.files[a]=!0,b.add(b.select("head")[0],"link",{rel:"stylesheet",href:tinymce._addVer(a)}))})},addClass:function(a,b){return this.run(a,function(a){var c;return b?this.hasClass(a,b)?a.className:(c=this.removeClass(a,b),a.className=(""!=c?c+" ":"")+b):0})},removeClass:function(a,b){var c,d=this;return d.run(a,function(a){var e;return d.hasClass(a,b)?(c||(c=new RegExp("(^|\\s+)"+b+"(\\s+|$)","g")),e=a.className.replace(c," "),a.className=tinymce.trim(" "!=e?e:"")):a.className})},hasClass:function(a,b){return a=this.get(a),a&&b?-1!==(" "+a.className+" ").indexOf(" "+b+" "):!1},show:function(a){return this.setStyle(a,"display","block")},hide:function(a){return this.setStyle(a,"display","none")},isHidden:function(a){return a=this.get(a),!a||"none"==a.style.display||"none"==this.getStyle(a,"display")},uniqueId:function(a){return(a?a:"mce_")+this.counter++},setHTML:function(a,b){var c=this;return this.run(a,function(a){function d(){try{a.innerHTML="<br />"+b,a.removeChild(a.firstChild)}catch(d){for(;a.firstChild;)a.firstChild.removeNode();e=c.create("div"),e.innerHTML="<br />"+b,each(e.childNodes,function(b,c){c&&a.appendChild(b)})}}var e,f,g,h,i,e;if(b=c.processHTML(b),isIE){if(c.settings.fix_ie_paragraphs&&(b=b.replace(/<p><\/p>|<p([^>]+)><\/p>|<p[^\/+]\/>/gi,'<p$1 mce_keep="true">&nbsp;</p>')),d(),c.settings.fix_ie_paragraphs)for(g=a.getElementsByTagName("p"),f=g.length-1,e=0;f>=0;f--)if(h=g[f],!h.hasChildNodes()){if(!h.mce_keep){e=1;break}h.removeAttribute("mce_keep")}if(e&&(b=b.replace(/<p ([^>]+)>|<p>/g,'<div $1 mce_tmp="1">'),b=b.replace(/<\/p>/g,"</div>"),d(),c.settings.fix_ie_paragraphs))for(g=a.getElementsByTagName("DIV"),f=g.length-1;f>=0;f--)if(h=g[f],h.mce_tmp){for(i=c.doc.createElement("p"),h.cloneNode(!1).outerHTML.replace(/([a-z0-9\-_]+)=/gi,function(a,b){var c;"mce_tmp"!==b&&(c=h.getAttribute(b),c||"class"!==b||(c=h.className),i.setAttribute(b,c))}),e=0;e<h.childNodes.length;e++)i.appendChild(h.childNodes[e].cloneNode(!0));h.swapNode(i)}}else a.innerHTML=b;return b})},processHTML:function(a){function b(a){return a=a.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n"),a=a.replace(/^[\r\n]*|[\r\n]*$/g,""),a=a.replace(/^\s*(\/\/\s*<!--|\/\/\s*<!\[CDATA\[|<!--|<!\[CDATA\[)[\r\n]*/g,""),a=a.replace(/\s*(\/\/\s*\]\]>|\/\/\s*-->|\]\]>|-->|\]\]-->)\s*$/g,"")}var c=this,d=c.settings;return d.process_html?(tinymce.isGecko?(a=a.replace(/<(\/?)strong>|<strong( [^>]+)>/gi,"<$1b$2>"),a=a.replace(/<(\/?)em>|<em( [^>]+)>/gi,"<$1i$2>")):isIE&&(a=a.replace(/&apos;/g,"&#39;"),a=a.replace(/\s+(disabled|checked|readonly|selected)\s*=\s*[\"\']?(false|0)[\"\']?/gi,"")),a=a.replace(/<a( )([^>]+)\/>|<a\/>/gi,"<a$1$2></a>"),d.keep_values&&(/<script|style/.test(a)&&(a=a.replace(/<script([^>]+|)>([\s\S]*?)<\/script>/g,function(a,c,d){return d=b(d),c||(c=' type="text/javascript"'),d&&(d="<!--\n"+d+"\n// -->"),"<mce:script"+c+">"+d+"</mce:script>"}),a=a.replace(/<style([^>]+|)>([\s\S]*?)<\/style>/g,function(a,c,d){return d=b(d),"<mce:style"+c+"><!--\n"+d+"\n--></mce:style><style"+c+' mce_bogus="1">'+d+"</style>"})),a=a.replace(/<!\[CDATA\[([\s\S]+)\]\]>/g,"<!--[CDATA[$1]]-->"),a=a.replace(/<([\w:]+) [^>]*(src|href|style|shape|coords)[^>]*>/gi,function(a,b){function e(e,f,g){var h=g;if(-1!=a.indexOf("mce_"+f))return e;if("style"==f){if(c._isRes(g))return e;d.hex_colors&&(h=h.replace(/rgb\([^\)]+\)/g,function(a){return c.toHex(a)})),d.url_converter&&(h=h.replace(/url\([\'\"]?([^\)\'\"]+)\)/g,function(a,e){return"url("+c.encode(d.url_converter.call(d.url_converter_scope||c,c.decode(e),f,b))+")"}))}else"coords"!=f&&"shape"!=f&&d.url_converter&&(h=c.encode(d.url_converter.call(d.url_converter_scope||c,c.decode(g),f,b)));return" "+f+'="'+g+'" mce_'+f+'="'+h+'"'}return a=a.replace(/ (src|href|style|coords|shape)=[\"]([^\"]+)[\"]/gi,e),a=a.replace(/ (src|href|style|coords|shape)=[\']([^\']+)[\']/gi,e),a.replace(/ (src|href|style|coords|shape)=([^\s\"\'>]+)/gi,e)})),a):a},getOuterHTML:function(a){var b;return(a=this.get(a))?isIE?a.outerHTML:(b=(a.ownerDocument||this.doc).createElement("body"),b.appendChild(a.cloneNode(!0)),b.innerHTML):null},setOuterHTML:function(a,b,c){var d=this;return this.run(a,function(a){var e,f;if(a=d.get(a),c=c||a.ownerDocument||d.doc,isIE&&1==a.nodeType)a.outerHTML=b;else{for(f=c.createElement("body"),f.innerHTML=b,e=f.lastChild;e;)d.insertAfter(e.cloneNode(!0),a),e=e.previousSibling;d.remove(a)}})},decode:function(a){var b,c,d;if(/&[^;]+;/.test(a)){if(b=this.doc.createElement("div"),b.innerHTML=a,c=b.firstChild,d="",c)do d+=c.nodeValue;while(c.nextSibling);return d||a}return a},encode:function(a){return a?(""+a).replace(/[<>&\"]/g,function(a,b){switch(a){case"&":return"&amp;";case'"':return"&quot;";case"<":return"&lt;";case">":return"&gt;"}return a}):a},insertAfter:function(a,b){var c=this;return b=c.get(b),this.run(a,function(a){var c,d;return c=b.parentNode,d=b.nextSibling,d?c.insertBefore(a,d):c.appendChild(a),a})},isBlock:function(a){return a.nodeType&&1!==a.nodeType?!1:(a=a.nodeName||a,/^(H[1-6]|HR|P|DIV|ADDRESS|PRE|FORM|TABLE|LI|OL|UL|TD|CAPTION|BLOCKQUOTE|CENTER|DL|DT|DD|DIR|FIELDSET|NOSCRIPT|NOFRAMES|MENU|ISINDEX|SAMP)$/.test(a))},replace:function(a,b,c){return is(b,"array")&&(a=a.cloneNode(!0)),this.run(b,function(b){return c&&each(b.childNodes,function(b){a.appendChild(b.cloneNode(!0))}),b.parentNode.replaceChild(a,b)})},toHex:function(a){function b(a){return a=parseInt(a).toString(16),a.length>1?a:"0"+a}var c=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(a);return c?a="#"+b(c[1])+b(c[2])+b(c[3]):a},getClasses:function(){function a(c){each(c.imports,function(b){a(b)}),each(c.cssRules||c.rules,function(c){switch(c.type||1){case 1:c.selectorText&&each(c.selectorText.split(","),function(a){a=a.replace(/^\s*|\s*$|^\s\./g,""),!/\.mce/.test(a)&&/\.[\w\-]+$/.test(a)&&(b=a,a=a.replace(/.*\.([a-z0-9_\-]+).*/i,"$1"),(!f||(a=f(a,b)))&&(e[a]||(d.push({"class":a}),e[a]=1)))});break;case 3:a(c.styleSheet)}})}var b,c=this,d=[],e={},f=c.settings.class_filter;if(c.classes)return c.classes;try{each(c.doc.styleSheets,a)}catch(g){}return d.length>0&&(c.classes=d),d},run:function(a,b,c){var d,e=this;return e.doc&&"string"==typeof a&&(a=e.get(a)),a?(c=c||this,a.nodeType||!a.length&&0!==a.length?b.call(c,a):(d=[],each(a,function(a,f){a&&("string"==typeof a&&(a=e.doc.getElementById(a)),d.push(b.call(c,a,f)))}),d)):!1},getAttribs:function(a){var b;return a=this.get(a),a?isIE?(b=[],"OBJECT"==a.nodeName?a.attributes:(a.cloneNode(!1).outerHTML.replace(/([a-z0-9\:\-_]+)=/gi,function(a,c){b.push({specified:1,nodeName:c})}),b)):a.attributes:[]},destroy:function(a){var b=this;b.win=b.doc=b.root=null,a||tinymce.removeUnload(b.destroy)},_isRes:function(a){return/^(top|left|bottom|right|width|height)/i.test(a)||/;\s*(top|left|bottom|right|width|height)/i.test(a)}}),tinymce.DOM=new tinymce.dom.DOMUtils(document,{process_html:0})}(),function(){var a,b=tinymce.each,c=tinymce.DOM,d=tinymce.isIE,e=tinymce.isWebKit;tinymce.create("static tinymce.dom.Event",{inits:[],events:[],add:function(a,e,f,g){var h,i,j=this,k=j.events;return a&&a instanceof Array?(i=[],b(a,function(a){a=c.get(a),i.push(j.add(a,e,f,g))}),i):(a=c.get(a))?(h=function(a){return a=a||window.event,a&&!a.target&&d&&(a.target=a.srcElement),g?f.call(g,a):f(a)},"unload"==e?(tinymce.unloads.unshift({func:h}),h):"init"==e?(j.domLoaded?h():j.inits.push(h),h):(k.push({obj:a,name:e,func:f,cfunc:h,scope:g}),j._add(a,e,h),f)):void 0},remove:function(a,d,e){var f,g=this,h=g.events,i=!1;return a&&a instanceof Array?(f=[],b(a,function(a){a=c.get(a),f.push(g.remove(a,d,e))}),f):(a=c.get(a),b(h,function(b,c){return b.obj!=a||b.name!=d||e&&b.func!=e&&b.cfunc!=e?void 0:(h.splice(c,1),g._remove(a,d,b.cfunc),i=!0,!1)}),i)},clear:function(a){var b,d,e=this,f=e.events;if(a)for(a=c.get(a),b=f.length-1;b>=0;b--)d=f[b],d.obj===a&&(e._remove(d.obj,d.name,d.cfunc),d.obj=d.cfunc=null,f.splice(b,1))},cancel:function(a){return a?(this.stop(a),this.prevent(a)):!1},stop:function(a){return a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,!1},prevent:function(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,!1},_unload:function(){var c=a;b(c.events,function(a,b){c._remove(a.obj,a.name,a.cfunc),a.obj=a.cfunc=null}),c.events=[],c=null},_add:function(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener?a.addEventListener(b,c,!1):a["on"+b]=c},_remove:function(a,b,c){if(a)try{a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener?a.removeEventListener(b,c,!1):a["on"+b]=null}catch(d){}},_pageInit:function(){var c=a;c.domLoaded||(c._remove(window,"DOMContentLoaded",c._pageInit),c.domLoaded=!0,b(c.inits,function(a){a()}),c.inits=[])},_wait:function(){var b;return window.tinyMCE_GZ&&tinyMCE_GZ.loaded?void(a.domLoaded=1):void(d&&"https:"!=document.location.protocol?(document.write("<script id=__ie_onload defer src='javascript:\"\"';></script>"),c.get("__ie_onload").onreadystatechange=function(){"complete"==this.readyState&&(a._pageInit(),c.get("__ie_onload").onreadystatechange=null)}):(a._add(window,"DOMContentLoaded",a._pageInit,a),(d||e)&&(b=setInterval(function(){/loaded|complete/.test(document.readyState)&&(clearInterval(b),a._pageInit())},10))))}}),a=tinymce.dom.Event,a._wait(),tinymce.addUnload(a._unload)}(),function(){var a=tinymce.each;tinymce.create("tinymce.dom.Element",{Element:function(b,c){var d,e,f=this;c=c||{},f.id=b,f.dom=d=c.dom||tinymce.DOM,f.settings=c,tinymce.isIE||(e=f.dom.get(f.id)),a(["getPos","getRect","getParent","add","setStyle","getStyle","setStyles","setAttrib","setAttribs","getAttrib","addClass","removeClass","hasClass","getOuterHTML","setOuterHTML","remove","show","hide","isHidden","setHTML","get"],function(c){f[c]=function(){var g,h=arguments;return tinymce.isOpera?(h=[b],a(arguments,function(a){h.push(a)})):Array.prototype.unshift.call(h,e||b),g=d[c].apply(d,h),f.update(c),g}})},on:function(a,b,c){return tinymce.dom.Event.add(this.id,a,b,c)},getXY:function(){return{x:parseInt(this.getStyle("left")),y:parseInt(this.getStyle("top"))}},getSize:function(){var a=this.dom.get(this.id);return{w:parseInt(this.getStyle("width")||a.clientWidth),h:parseInt(this.getStyle("height")||a.clientHeight)}},moveTo:function(a,b){this.setStyles({left:a,top:b})},moveBy:function(a,b){var c=this.getXY();this.moveTo(c.x+a,c.y+b)},resizeTo:function(a,b){this.setStyles({width:a,height:b})},resizeBy:function(a,b){var c=this.getSize();this.resizeTo(c.w+a,c.h+b)},update:function(a){var b,c=this,d=c.dom;if(tinymce.isIE6&&c.settings.blocker){if(a=a||"",0===a.indexOf("get")||0===a.indexOf("has")||0===a.indexOf("is"))return;if("remove"==a)return void d.remove(c.blocker);c.blocker?b=d.get(c.blocker):(c.blocker=d.uniqueId(),b=d.add(c.settings.container||d.getRoot(),"iframe",{id:c.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'}),d.setStyle(b,"opacity",0)),d.setStyle(b,"left",c.getStyle("left",1)),d.setStyle(b,"top",c.getStyle("top",1)),d.setStyle(b,"width",c.getStyle("width",1)),d.setStyle(b,"height",c.getStyle("height",1)),d.setStyle(b,"display",c.getStyle("display",1)),d.setStyle(b,"zIndex",parseInt(c.getStyle("zIndex",1)||0)-1)}}})}(),function(){function a(a){return a.replace(/[\n\r]+/g,"")}var b=tinymce.is,c=tinymce.isIE,d=tinymce.each;tinymce.create("tinymce.dom.Selection",{Selection:function(a,b,c){var e=this;e.dom=a,e.win=b,e.serializer=c,d(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(a){
e[a]=new tinymce.util.Dispatcher(e)}),tinymce.addUnload(e.destroy,e)},getContent:function(a){var c,d,e,f=this,g=f.getRng(),h=f.dom.create("body"),i=f.getSel();return a=a||{},c=d="",a.get=!0,a.format=a.format||"html",f.onBeforeGetContent.dispatch(f,a),"text"==a.format?f.isCollapsed()?"":g.text||(i.toString?i.toString():""):(g.cloneContents?(e=g.cloneContents(),e&&h.appendChild(e)):b(g.item)||b(g.htmlText)?h.innerHTML=g.item?g.item(0).outerHTML:g.htmlText:h.innerHTML=g.toString(),/^\s/.test(h.innerHTML)&&(c=" "),/\s+$/.test(h.innerHTML)&&(d=" "),a.getInner=!0,a.content=f.isCollapsed()?"":c+f.serializer.serialize(h,a)+d,f.onGetContent.dispatch(f,a),a.content)},setContent:function(a,b){var c,d=this,e=d.getRng(),f=d.win.document;b=b||{format:"html"},b.set=!0,a=b.content=d.dom.processHTML(a),d.onBeforeSetContent.dispatch(d,b),a=b.content,e.insertNode?(a+='<span id="__caret">_</span>',e.deleteContents(),e.insertNode(d.getRng().createContextualFragment(a)),c=d.dom.get("__caret"),e=f.createRange(),e.setStartBefore(c),e.setEndAfter(c),d.setRng(e),f.execCommand("Delete",!1,null),d.dom.remove("__caret")):(e.item&&(f.execCommand("Delete",!1,null),e=d.getRng()),e.pasteHTML(a)),d.onSetContent.dispatch(d,b)},getStart:function(){var a,b=this,d=b.getRng();return c?d.item?d.item(0):(d=d.duplicate(),d.collapse(1),a=d.parentElement(),a&&"BODY"==a.nodeName?a.firstChild:a):(a=d.startContainer,"BODY"==a.nodeName?a.firstChild:b.dom.getParent(a,function(a){return 1==a.nodeType}))},getEnd:function(){var a,b=this,d=b.getRng();return c?d.item?d.item(0):(d=d.duplicate(),d.collapse(0),a=d.parentElement(),a&&"BODY"==a.nodeName?a.lastChild:a):(a=d.endContainer,"BODY"==a.nodeName?a.lastChild:b.dom.getParent(a,function(a){return 1==a.nodeType}))},getBookmark:function(b){function e(b,c,d){for(var e,f=n.dom.doc.createTreeWalker(b,NodeFilter.SHOW_TEXT,null,!1),g=0,h={};null!=(e=f.nextNode());){if(e==c&&(h.start=g),e==d)return h.end=g,h;g+=a(e.nodeValue||"").length}return null}var f,g,h,i,j,k,l,m,n=this,o=n.getRng(),p=n.dom.getViewPort(n.win),q=-16777215,r=n.dom.getRoot(),s=0,t=0;return g=p.x,h=p.y,"simple"==b?{rng:o,scrollX:g,scrollY:h}:c?o.item?(i=o.item(0),d(n.dom.select(i.nodeName),function(a,b){return i==a?(j=b,!1):void 0}),{tag:i.nodeName,index:j,scrollX:g,scrollY:h}):(f=n.dom.doc.body.createTextRange(),f.moveToElementText(r),f.collapse(!0),k=Math.abs(f.move("character",q)),f=o.duplicate(),f.collapse(!0),j=Math.abs(f.move("character",q)),f=o.duplicate(),f.collapse(!1),l=Math.abs(f.move("character",q))-j,{start:j-k,length:l,scrollX:g,scrollY:h}):(i=n.getNode(),m=n.getSel(),m?i&&"IMG"==i.nodeName?{scrollX:g,scrollY:h}:m.anchorNode==m.focusNode&&m.anchorOffset==m.focusOffset?(i=e(r,m.anchorNode,m.focusNode))?(a(m.anchorNode.nodeValue||"").replace(/^\s+/,function(a){s=a.length}),{start:Math.max(i.start+m.anchorOffset-s,0),end:Math.max(i.end+m.focusOffset-s,0),scrollX:g,scrollY:h,beg:m.anchorOffset-s==0}):{scrollX:g,scrollY:h}:(i=e(r,o.startContainer,o.endContainer),i?{start:Math.max(i.start+o.startOffset-s,0),end:Math.max(i.end+o.endOffset-t,0),scrollX:g,scrollY:h,beg:o.startOffset-s==0}:{scrollX:g,scrollY:h}):null)},moveToBookmark:function(e){function f(b,c,d){for(var f,g,k,l,m=j.dom.doc.createTreeWalker(b,NodeFilter.SHOW_TEXT,null,!1),n=0,o={};null!=(f=m.nextNode());){if(k=l=0,i=f.nodeValue||"",h=a(i).length,n+=h,n>=c&&!o.startNode){if(g=c-(n-h),e.beg&&g>=h)continue;o.startNode=f,o.startOffset=g+l}if(n>=d)return o.endNode=f,o.endOffset=d-(n-h)+l,o}return null}var g,h,i,j=this,k=j.getRng(),l=j.getSel(),m=j.dom.getRoot();if(!e)return!1;if(j.win.scrollTo(e.scrollX,e.scrollY),c){if(k=e.rng){try{k.select()}catch(n){}return!0}if(j.win.focus(),e.tag)k=m.createControlRange(),d(j.dom.select(e.tag),function(a,b){b==e.index&&k.addElement(a)});else try{if(e.start<0)return!0;k=l.createRange(),k.moveToElementText(m),k.collapse(!0),k.moveStart("character",e.start),k.moveEnd("character",e.length)}catch(o){return!0}try{k.select()}catch(n){}return!0}if(!l)return!1;if(e.rng)l.removeAllRanges(),l.addRange(e.rng);else if(b(e.start)&&b(e.end))try{g=f(m,e.start,e.end),g&&(k=j.dom.doc.createRange(),k.setStart(g.startNode,g.startOffset),k.setEnd(g.endNode,g.endOffset),l.removeAllRanges(),l.addRange(k)),tinymce.isOpera||j.win.focus()}catch(n){}},select:function(a,b){function d(a){return a?k.createTreeWalker(a,NodeFilter.SHOW_TEXT,null,!1).nextNode():null}function e(a){var b,c,d;if(!a)return null;for(d=k.createTreeWalker(a,NodeFilter.SHOW_TEXT,null,!1);b=d.nextNode();)c=b;return c}var f,g,h,i=this,j=i.getRng(),k=(i.getSel(),i.win.document);if(c)try{f=k.body,/^(IMG|TABLE)$/.test(a.nodeName)?(j=f.createControlRange(),j.addElement(a)):(j=f.createTextRange(),j.moveToElementText(a)),j.select()}catch(l){}else b?(g=d(a),h=e(a),g&&h?(j=k.createRange(),j.setStart(g,0),j.setEnd(h,h.nodeValue.length)):j.selectNode(a)):j.selectNode(a),i.setRng(j);return a},isCollapsed:function(){var a=this,b=a.getRng(),c=a.getSel();return!b||b.item?!1:!c||0==b.boundingWidth||b.collapsed},collapse:function(a){var b,c=this,d=c.getRng();d.item&&(b=d.item(0),d=this.win.document.body.createTextRange(),d.moveToElementText(b)),d.collapse(!!a),c.setRng(d)},getSel:function(){var a=this.win;return a.getSelection?a.getSelection():a.document.selection},getRng:function(){var a,b=this,d=b.getSel();try{d&&(a=d.rangeCount>0?d.getRangeAt(0):d.createRange?d.createRange():b.win.document.createRange())}catch(e){}return a||(a=c?b.win.document.body.createTextRange():b.win.document.createRange()),a},setRng:function(a){var b;if(c)try{a.select()}catch(d){}else b=this.getSel(),b&&(b.removeAllRanges(),b.addRange(a))},setNode:function(a){var b=this;return b.setContent(b.dom.getOuterHTML(a)),a},getNode:function(){var a,b=this,d=b.getRng(),e=b.getSel();if(!c){if(!d)return b.dom.getRoot();if(a=d.commonAncestorContainer,!d.collapsed){if(tinymce.isWebKit&&e.anchorNode&&1==e.anchorNode.nodeType)return e.anchorNode.childNodes[e.anchorOffset];d.startContainer==d.endContainer&&d.startOffset-d.endOffset<2&&d.startContainer.hasChildNodes()&&(a=d.startContainer.childNodes[d.startOffset])}return b.dom.getParent(a,function(a){return 1==a.nodeType})}return d.item?d.item(0):d.parentElement()},destroy:function(a){var b=this;b.win=null,a||tinymce.removeUnload(b.destroy)}})}(),function(){tinymce.create("tinymce.dom.XMLWriter",{node:null,XMLWriter:function(a){function b(){var a=document.implementation;if(a&&a.createDocument)return a.createDocument("","",null);try{return new ActiveXObject("MSXML2.DOMDocument")}catch(b){}try{return new ActiveXObject("Microsoft.XmlDom")}catch(b){}}this.doc=b(),this.valid=tinymce.isOpera||tinymce.isWebKit,this.reset()},reset:function(){var a=this,b=a.doc;b.firstChild&&b.removeChild(b.firstChild),a.node=b.appendChild(b.createElement("html"))},writeStartElement:function(a){var b=this;b.node=b.node.appendChild(b.doc.createElement(a))},writeAttribute:function(a,b){this.valid&&(b=b.replace(/>/g,"%MCGT%")),this.node.setAttribute(a,b)},writeEndElement:function(){this.node=this.node.parentNode},writeFullEndElement:function(){var a=this,b=a.node;b.appendChild(a.doc.createTextNode("")),a.node=b.parentNode},writeText:function(a){this.valid&&(a=a.replace(/>/g,"%MCGT%")),this.node.appendChild(this.doc.createTextNode(a))},writeCDATA:function(a){this.node.appendChild(this.doc.createCDATA(a))},writeComment:function(a){tinymce.isIE&&(a=a.replace(/^\-|\-$/g," ")),this.node.appendChild(this.doc.createComment(a.replace(/\-\-/g," ")))},getContent:function(){var a;return a=this.doc.xml||(new XMLSerializer).serializeToString(this.doc),a=a.replace(/<\?[^?]+\?>|<html>|<\/html>|<html\/>|<!DOCTYPE[^>]+>/g,""),a=a.replace(/ ?\/>/g," />"),this.valid&&(a=a.replace(/\%MCGT%/g,"&gt;")),a}})}(),function(){tinymce.create("tinymce.dom.StringWriter",{str:null,tags:null,count:0,settings:null,indent:null,StringWriter:function(a){this.settings=tinymce.extend({indent_char:" ",indentation:1},a),this.reset()},reset:function(){this.indent="",this.str="",this.tags=[],this.count=0},writeStartElement:function(a){this._writeAttributesEnd(),this.writeRaw("<"+a),this.tags.push(a),this.inAttr=!0,this.count++,this.elementCount=this.count},writeAttribute:function(a,b){var c=this;c.writeRaw(" "+c.encode(a)+'="'+c.encode(b)+'"')},writeEndElement:function(){var a;this.tags.length>0&&(a=this.tags.pop(),this._writeAttributesEnd(1)&&this.writeRaw("</"+a+">"),this.settings.indentation>0&&this.writeRaw("\n"))},writeFullEndElement:function(){this.tags.length>0&&(this._writeAttributesEnd(),this.writeRaw("</"+this.tags.pop()+">"),this.settings.indentation>0&&this.writeRaw("\n"))},writeText:function(a){this._writeAttributesEnd(),this.writeRaw(this.encode(a)),this.count++},writeCDATA:function(a){this._writeAttributesEnd(),this.writeRaw("<![CDATA["+a+"]]>"),this.count++},writeComment:function(a){this._writeAttributesEnd(),this.writeRaw("<!-- "+a+"-->"),this.count++},writeRaw:function(a){this.str+=a},encode:function(a){return a.replace(/[<>&"]/g,function(a){switch(a){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case'"':return"&quot;"}return a})},getContent:function(){return this.str},_writeAttributesEnd:function(a){return this.inAttr?(this.inAttr=!1,a&&this.elementCount==this.count?(this.writeRaw(" />"),!1):(this.writeRaw(">"),!0)):void 0}})}(),function(){function a(a){var b=[];return"OBJECT"==a.nodeName?a.attributes:(a.cloneNode(!1).outerHTML.replace(/([a-z0-9\:\-_]+)=/gi,function(a,c){b.push({specified:1,nodeName:c})}),b)}function b(a){return a.replace(/([?+*])/g,".$1")}var c=tinymce.extend,d=tinymce.each,e=tinymce.util.Dispatcher,f=tinymce.isIE,g=tinymce.isGecko;tinymce.create("tinymce.dom.Serializer",{Serializer:function(a){var b=this;if(b.key=0,b.onPreProcess=new e(b),b.onPostProcess=new e(b),tinymce.relaxedDomain&&tinymce.isGecko)b.writer=new tinymce.dom.StringWriter;else try{b.writer=new tinymce.dom.XMLWriter}catch(f){b.writer=new tinymce.dom.StringWriter}b.settings=a=c({dom:tinymce.DOM,valid_nodes:0,node_filter:0,attr_filter:0,invalid_attrs:/^(mce_|_moz_)/,closed:/(br|hr|input|meta|img|link|param)/,entity_encoding:"named",entities:"160,nbsp,161,iexcl,162,cent,163,pound,164,curren,165,yen,166,brvbar,167,sect,168,uml,169,copy,170,ordf,171,laquo,172,not,173,shy,174,reg,175,macr,176,deg,177,plusmn,178,sup2,179,sup3,180,acute,181,micro,182,para,183,middot,184,cedil,185,sup1,186,ordm,187,raquo,188,frac14,189,frac12,190,frac34,191,iquest,192,Agrave,193,Aacute,194,Acirc,195,Atilde,196,Auml,197,Aring,198,AElig,199,Ccedil,200,Egrave,201,Eacute,202,Ecirc,203,Euml,204,Igrave,205,Iacute,206,Icirc,207,Iuml,208,ETH,209,Ntilde,210,Ograve,211,Oacute,212,Ocirc,213,Otilde,214,Ouml,215,times,216,Oslash,217,Ugrave,218,Uacute,219,Ucirc,220,Uuml,221,Yacute,222,THORN,223,szlig,224,agrave,225,aacute,226,acirc,227,atilde,228,auml,229,aring,230,aelig,231,ccedil,232,egrave,233,eacute,234,ecirc,235,euml,236,igrave,237,iacute,238,icirc,239,iuml,240,eth,241,ntilde,242,ograve,243,oacute,244,ocirc,245,otilde,246,ouml,247,divide,248,oslash,249,ugrave,250,uacute,251,ucirc,252,uuml,253,yacute,254,thorn,255,yuml,402,fnof,913,Alpha,914,Beta,915,Gamma,916,Delta,917,Epsilon,918,Zeta,919,Eta,920,Theta,921,Iota,922,Kappa,923,Lambda,924,Mu,925,Nu,926,Xi,927,Omicron,928,Pi,929,Rho,931,Sigma,932,Tau,933,Upsilon,934,Phi,935,Chi,936,Psi,937,Omega,945,alpha,946,beta,947,gamma,948,delta,949,epsilon,950,zeta,951,eta,952,theta,953,iota,954,kappa,955,lambda,956,mu,957,nu,958,xi,959,omicron,960,pi,961,rho,962,sigmaf,963,sigma,964,tau,965,upsilon,966,phi,967,chi,968,psi,969,omega,977,thetasym,978,upsih,982,piv,8226,bull,8230,hellip,8242,prime,8243,Prime,8254,oline,8260,frasl,8472,weierp,8465,image,8476,real,8482,trade,8501,alefsym,8592,larr,8593,uarr,8594,rarr,8595,darr,8596,harr,8629,crarr,8656,lArr,8657,uArr,8658,rArr,8659,dArr,8660,hArr,8704,forall,8706,part,8707,exist,8709,empty,8711,nabla,8712,isin,8713,notin,8715,ni,8719,prod,8721,sum,8722,minus,8727,lowast,8730,radic,8733,prop,8734,infin,8736,ang,8743,and,8744,or,8745,cap,8746,cup,8747,int,8756,there4,8764,sim,8773,cong,8776,asymp,8800,ne,8801,equiv,8804,le,8805,ge,8834,sub,8835,sup,8836,nsub,8838,sube,8839,supe,8853,oplus,8855,otimes,8869,perp,8901,sdot,8968,lceil,8969,rceil,8970,lfloor,8971,rfloor,9001,lang,9002,rang,9674,loz,9824,spades,9827,clubs,9829,hearts,9830,diams,338,OElig,339,oelig,352,Scaron,353,scaron,376,Yuml,710,circ,732,tilde,8194,ensp,8195,emsp,8201,thinsp,8204,zwnj,8205,zwj,8206,lrm,8207,rlm,8211,ndash,8212,mdash,8216,lsquo,8217,rsquo,8218,sbquo,8220,ldquo,8221,rdquo,8222,bdquo,8224,dagger,8225,Dagger,8240,permil,8249,lsaquo,8250,rsaquo,8364,euro",bool_attrs:/(checked|disabled|readonly|selected|nowrap)/,valid_elements:"*[*]",extended_valid_elements:0,valid_child_elements:0,invalid_elements:0,fix_table_elements:0,fix_list_elements:!0,fix_content_duplication:!0,convert_fonts_to_spans:!1,font_size_classes:0,font_size_style_values:0,apply_source_formatting:0,indent_mode:"simple",indent_char:"	",indent_levels:1,remove_linebreaks:1,remove_redundant_brs:1,element_format:"xhtml"},a),b.dom=a.dom,a.remove_redundant_brs&&b.onPostProcess.add(function(a,b){b.content=b.content.replace(/<br \/>(\s*<\/li>)/g,"$1")}),"html"==a.element_format&&b.onPostProcess.add(function(a,b){b.content=b.content.replace(/<([^>]+) \/>/g,"<$1>")}),a.fix_list_elements&&b.onPreProcess.add(function(a,c){function d(a,b){for(var c,d=b.split(",");null!=(a=a.previousSibling);)for(c=0;c<d.length;c++)if(a.nodeName==d[c])return a;return null}var e,f,g,h,i,j,k=["ol","ul"],l=/^(OL|UL)$/;for(f=0;f<k.length;f++)for(e=b.dom.select(k[f],c.node),g=0;g<e.length;g++)h=e[g],i=h.parentNode,l.test(i.nodeName)&&(j=d(h,"LI"),j?j.appendChild(h):(j=b.dom.create("li"),j.innerHTML="&nbsp;",j.appendChild(h),i.insertBefore(j,i.firstChild)))}),a.fix_table_elements&&b.onPreProcess.add(function(a,c){d(b.dom.select("table",c.node),function(a){var c,d,e,f,g,h=b.dom.getParent(a,"H1,H2,H3,H4,H5,H6,P"),i=[];if(h){for(c=h.cloneNode(!1),i.push(a),d=a;(d=d.parentNode)&&(i.push(d),d!=h););for(e=c,f=i.length-1;f>=0;f--)if(f==i.length-1)for(;g=i[f-1].nextSibling;)e.appendChild(g.parentNode.removeChild(g));else{if(d=i[f].cloneNode(!1),0!=f)for(;g=i[f-1].nextSibling;)d.appendChild(g.parentNode.removeChild(g));e=e.appendChild(d)}a=b.dom.insertAfter(a.parentNode.removeChild(a),h),b.dom.insertAfter(a,h),b.dom.insertAfter(c,a)}})})},setEntities:function(a){var b,c,d,e=this,f={},g="";if(!e.entityLookup){for(b=a.split(","),c=0;c<b.length;c+=2)d=b[c],34!=d&&38!=d&&60!=d&&62!=d&&(f[String.fromCharCode(b[c])]=b[c+1],d=parseInt(b[c]).toString(16),g+="\\u"+"0000".substring(d.length)+d);if(!g)return void(e.settings.entity_encoding="raw");e.entitiesRE=new RegExp("["+g+"]","g"),e.entityLookup=f}},setValidChildRules:function(a){this.childRules=null,this.addValidChildRules(a)},addValidChildRules:function(a){var b,c,e,f=this;a&&(b="A|BR|SPAN|BDO|MAP|OBJECT|IMG|TT|I|B|BIG|SMALL|EM|STRONG|DFN|CODE|Q|SAMP|KBD|VAR|CITE|ABBR|ACRONYM|SUB|SUP|#text|#comment",c="A|BR|SPAN|BDO|OBJECT|APPLET|IMG|MAP|IFRAME|TT|I|B|U|S|STRIKE|BIG|SMALL|FONT|BASEFONT|EM|STRONG|DFN|CODE|Q|SAMP|KBD|VAR|CITE|ABBR|ACRONYM|SUB|SUP|INPUT|SELECT|TEXTAREA|LABEL|BUTTON|#text|#comment",e="H[1-6]|P|DIV|ADDRESS|PRE|FORM|TABLE|LI|OL|UL|TD|CAPTION|BLOCKQUOTE|CENTER|DL|DT|DD|DIR|FIELDSET|FORM|NOSCRIPT|NOFRAMES|MENU|ISINDEX|SAMP",d(a.split(","),function(a){var g,h=a.split(/\[|\]/);a="",d(h[1].split("|"),function(d){switch(a&&(a+="|"),d){case"%itrans":d=c;break;case"%itrans_na":d=c.substring(2);break;case"%istrict":d=b;break;case"%istrict_na":d=b.substring(2);break;case"%btrans":d=e;break;case"%bstrict":d=e}a+=d}),g=new RegExp("^("+a.toLowerCase()+")$","i"),d(h[0].split("/"),function(a){f.childRules=f.childRules||{},f.childRules[a]=g})}),a="",d(f.childRules,function(b,c){a&&(a+="|"),a+=c}),f.parentElementsRE=new RegExp("^("+a.toLowerCase()+")$","i"))},setRules:function(a){var b=this;return b._setup(),b.rules={},b.wildRules=[],b.validElements={},b.addRules(a)},addRules:function(a){var c,e=this;a&&(e._setup(),d(a.split(","),function(a){var f,g,h,i=a.split(/\[|\]/),j=i[0].split("/"),k=[];c&&(g=tinymce.extend([],c.attribs)),i.length>1&&d(i[1].split("|"),function(a){var c,d={};if(g=g||[],a=a.replace(/::/g,"~"),a=/^([!\-])?([\w*.?~_\-]+|)([=:<])?(.+)?$/.exec(a),a[2]=a[2].replace(/~/g,":"),"!"==a[1]&&(f=f||[],f.push(a[2])),"-"==a[1])for(c=0;c<g.length;c++)if(g[c].name==a[2])return void g.splice(c,1);switch(a[3]){case"=":d.defaultVal=a[4]||"";break;case":":d.forcedVal=a[4];break;case"<":d.validVals=a[4].split("?")}/[*.?]/.test(a[2])?(h=h||[],d.nameRE=new RegExp("^"+b(a[2])+"$"),h.push(d)):(d.name=a[2],g.push(d)),k.push(a[2])}),d(j,function(a,i){var l=a.charAt(0),m=1,n={};switch(c&&(c.noEmpty&&(n.noEmpty=c.noEmpty),c.fullEnd&&(n.fullEnd=c.fullEnd),c.padd&&(n.padd=c.padd)),l){case"-":n.noEmpty=!0;break;case"+":n.fullEnd=!0;break;case"#":n.padd=!0;break;default:m=0}j[i]=a=a.substring(m),e.validElements[a]=1,/[*.?]/.test(j[0])?(n.nameRE=new RegExp("^"+b(j[0])+"$"),e.wildRules=e.wildRules||{},e.wildRules.push(n)):(n.name=j[0],"@"==j[0]&&(c=n),e.rules[a]=n),n.attribs=g,f&&(n.requiredAttribs=f),h&&(a="",d(k,function(c){a&&(a+="|"),a+="("+b(c)+")"}),n.validAttribsRE=new RegExp("^"+a.toLowerCase()+"$"),n.wildAttribs=h)})}),a="",d(e.validElements,function(b,c){a&&(a+="|"),"@"!=c&&(a+=c)}),e.validElementsRE=new RegExp("^("+b(a.toLowerCase())+")$"))},findRule:function(a){var b,c,d=this,e=d.rules;if(d._setup(),c=e[a])return c;for(e=d.wildRules,b=0;b<e.length;b++)if(e[b].nameRE.test(a))return e[b];return null},findAttribRule:function(a,b){var c,d=a.wildAttribs;for(c=0;c<d.length;c++)if(d[c].nameRE.test(b))return d[c];return null},serialize:function(a,b){var c=this;return c._setup(),b=b||{},b.format=b.format||"html",c.processObj=b,a=a.cloneNode(!0),c.key=""+(parseInt(c.key)+1),b.no_events||(b.node=a,c.onPreProcess.dispatch(c,b)),c.writer.reset(),c._serializeNode(a,b.getInner),b.content=c.writer.getContent(),b.no_events||c.onPostProcess.dispatch(c,b),c._postProcess(b),b.node=null,tinymce.trim(b.content)},_postProcess:function(a){var b,c=this,d=c.settings,e=a.content;"html"==a.format&&(b=c._protect({content:e,patterns:[{pattern:/(<script[^>]*>)(.*?)(<\/script>)/g},{pattern:/(<style[^>]*>)(.*?)(<\/style>)/g},{pattern:/(<pre[^>]*>)(.*?)(<\/pre>)/g,encode:1},{pattern:/(<!--\[CDATA\[)(.*?)(\]\]-->)/g}]}),e=b.content,"raw"!==d.entity_encoding&&(e=c._encode(e)),a.set||(e=e.replace(/<p>\s+<\/p>|<p([^>]+)>\s+<\/p>/g,"numeric"==d.entity_encoding?"<p$1>&#160;</p>":"<p$1>&nbsp;</p>"),d.remove_linebreaks&&(e=e.replace(/\r?\n|\r/g," "),e=e.replace(/(<[^>]+>)\s+/g,"$1 "),e=e.replace(/\s+(<\/[^>]+>)/g," $1"),e=e.replace(/<(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object) ([^>]+)>\s+/g,"<$1 $2>"),e=e.replace(/<(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object)>\s+/g,"<$1>"),e=e.replace(/\s+<\/(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object)>/g,"</$1>")),d.apply_source_formatting&&"simple"==d.indent_mode&&(e=e.replace(/<(\/?)(ul|hr|table|meta|link|tbody|tr|object|body|head|html|map)(|[^>]+)>\s*/g,"\n<$1$2$3>\n"),e=e.replace(/\s*<(p|h[1-6]|blockquote|div|title|style|pre|script|td|li|area)(|[^>]+)>/g,"\n<$1$2>"),e=e.replace(/<\/(p|h[1-6]|blockquote|div|title|style|pre|script|td|li)>\s*/g,"</$1>\n"),e=e.replace(/\n\n/g,"\n"))),e=c._unprotect(e,b),e=e.replace(/<!--\[CDATA\[([\s\S]+)\]\]-->/g,"<![CDATA[$1]]>"),"raw"==d.entity_encoding&&(e=e.replace(/<p>&nbsp;<\/p>|<p([^>]+)>&nbsp;<\/p>/g,"<p$1></p>"))),a.content=e},_serializeNode:function(b,c){var d,e,h,i,j,k,l,m,n,o,p,q,r=this,s=r.settings,t=r.writer;if(!s.node_filter||s.node_filter(b))switch(b.nodeType){case 1:if(b.hasAttribute?b.hasAttribute("mce_bogus"):b.getAttribute("mce_bogus"))return;if(q=!1,d=b.hasChildNodes(),n=b.getAttribute("mce_name")||b.nodeName.toLowerCase(),f&&"HTML"!==b.scopeName&&"html"!==b.scopeName&&(n=b.scopeName+":"+n),0===n.indexOf("mce:")&&(n=n.substring(4)),!r.validElementsRE.test(n)||r.invalidElementsRE&&r.invalidElementsRE.test(n)||c){q=!0;break}if(f){if(s.fix_content_duplication){if(b.mce_serialized==r.key)return;b.mce_serialized=r.key}"/"==n.charAt(0)&&(n=n.substring(1))}else if(g&&"BR"===b.nodeName&&"_moz"==b.getAttribute("type"))return;if(r.childRules){if(r.parentElementsRE.test(r.elementName)&&!r.childRules[r.elementName].test(n)){q=!0;break}r.elementName=n}if(o=r.findRule(n),n=o.name||n,!d&&o.noEmpty||f&&!n){q=!0;break}if(o.requiredAttribs){for(j=o.requiredAttribs,h=j.length-1;h>=0&&""===this.dom.getAttrib(b,j[h]);h--);if(-1==h){q=!0;break}}if(t.writeStartElement(n),o.attribs)for(h=0,k=o.attribs,i=k.length;i>h;h++)j=k[h],m=r._getAttrib(b,j),null!==m&&t.writeAttribute(j.name,m);if(o.validAttribsRE)for(k=f?a(b):b.attributes,h=k.length-1;h>-1;h--)if(l=k[h],l.specified){if(j=l.nodeName.toLowerCase(),s.invalid_attrs.test(j)||!o.validAttribsRE.test(j))continue;p=r.findAttribRule(o,j),m=r._getAttrib(b,p,j),null!==m&&t.writeAttribute(j,m)}o.padd&&(d&&(e=b.firstChild)&&1===e.nodeType&&1===b.childNodes.length?(e.hasAttribute?e.hasAttribute("mce_bogus"):e.getAttribute("mce_bogus"))&&t.writeText(""):d||t.writeText(""));break;case 3:if(r.childRules&&r.parentElementsRE.test(r.elementName)&&!r.childRules[r.elementName].test(b.nodeName))return;return t.writeText(b.nodeValue);case 4:return t.writeCDATA(b.nodeValue);case 8:return t.writeComment(b.nodeValue)}else 1==b.nodeType&&(d=b.hasChildNodes());if(d)for(e=b.firstChild;e;)r._serializeNode(e),r.elementName=n,e=e.nextSibling;q||(d||!s.closed.test(n)?t.writeFullEndElement():t.writeEndElement())},_protect:function(a){function b(a){return a.replace(/[\r\n\\]/g,function(a){return"\n"===a?"\\n":"\\"===a?"\\\\":"\\r"})}function c(a){return a.replace(/\\[\\rn]/g,function(a){return"\\n"===a?"\n":"\\\\"===a?"\\":"\r"})}var e=this;return a.items=a.items||[],d(a.patterns,function(d){a.content=c(b(a.content).replace(d.pattern,function(b,f,g,h){return g=c(g),d.encode&&(g=e._encode(g)),a.items.push(g),f+"<!--mce:"+(a.items.length-1)+"-->"+h}))}),a},_unprotect:function(a,b){return a=a.replace(/\<!--mce:([0-9]+)--\>/g,function(a,c){return b.items[parseInt(c)]}),b.items=[],a},_encode:function(a){var b,c=this,d=c.settings;return"raw"!==d.entity_encoding&&(-1!=d.entity_encoding.indexOf("named")&&(c.setEntities(d.entities),b=c.entityLookup,a=a.replace(c.entitiesRE,function(a){var c;return(c=b[a])&&(a="&"+c+";"),a})),-1!=d.entity_encoding.indexOf("numeric")&&(a=a.replace(/[\u007E-\uFFFF]/g,function(a){return"&#"+a.charCodeAt(0)+";"}))),a},_setup:function(){var a=this,c=this.settings;a.done||(a.done=1,a.setRules(c.valid_elements),a.addRules(c.extended_valid_elements),a.addValidChildRules(c.valid_child_elements),c.invalid_elements&&(a.invalidElementsRE=new RegExp("^("+b(c.invalid_elements.replace(/,/g,"|").toLowerCase())+")$")),c.attrib_value_filter&&(a.attribValueFilter=c.attribValueFilter))},_getAttrib:function(a,b,c){var d,e;if(c=c||b.name,b.forcedVal&&(e=b.forcedVal))return"{$uid}"===e?this.dom.uniqueId():e;if(e=this.dom.getAttrib(a,c),this.settings.bool_attrs.test(c)&&e){if(e=(""+e).toLowerCase(),"false"===e||"0"===e)return null;e=c}switch(c){case"rowspan":case"colspan":"1"==e&&(e="")}if(this.attribValueFilter&&(e=this.attribValueFilter(c,e,a)),b.validVals){for(d=b.validVals.length-1;d>=0&&e!=b.validVals[d];d--);if(-1==d)return null}return""===e&&"undefined"!=typeof b.defaultVal?(e=b.defaultVal,"{$uid}"===e?this.dom.uniqueId():e):("class"==c&&this.processObj.get&&(e=e.replace(/\s?mceItem\w+\s?/g,"")),""===e?null:e)}})}(),function(){var each=tinymce.each,Event=tinymce.dom.Event;tinymce.create("tinymce.dom.ScriptLoader",{ScriptLoader:function(a){this.settings=a||{},this.queue=[],this.lookup={}},isDone:function(a){return this.lookup[a]?2==this.lookup[a].state:0},markDone:function(a){this.lookup[a]={state:2,url:a}},add:function(a,b,c,d){var e,f=this,g=f.lookup;return(e=g[a])?(b&&2==e.state&&b.call(c||this),e):(e={state:0,url:a,func:b,scope:c||this},d?f.queue.unshift(e):f.queue.push(e),g[a]=e,e)},load:function(a,b,c){function d(a){Event.domLoaded||f.settings.strict_mode?tinymce.util.XHR.send({url:tinymce._addVer(a),error:f.settings.error,async:!1,success:function(a){f.eval(a)}}):document.write('<script type="text/javascript" src="'+tinymce._addVer(a)+'"></script>')}var e,f=this;return(e=f.lookup[a])?(b&&2==e.state&&b.call(c||f),e):void(tinymce.is(a,"string")?(d(a),b&&b.call(c||f)):(each(a,function(a){d(a)}),b&&b.call(c||f)))},loadQueue:function(a,b){var c=this;c.queueLoading?a&&c.queueCallbacks.push({func:a,scope:b||c}):(c.queueLoading=1,c.queueCallbacks=[],c.loadScripts(c.queue,function(){c.queueLoading=0,a&&a.call(b||c),each(c.queueCallbacks,function(a){a.func.call(a.scope)})}))},eval:function(co){var w=window;if(w.execScript)w.execScript(co);else try{eval.call(w,co)}catch(ex){eval(co,w)}},loadScripts:function(a,b,c){function d(a){a.state=2,a.func&&a.func.call(a.scope||g)}function e(){var e;e=a.length,each(a,function(a){a=h[a.url],2===a.state?(d(a),e--):f(a)}),0===e&&b&&(b.call(c||g),b=0)}function f(a){a.state>0||(a.state=1,tinymce.dom.ScriptLoader.loadScript(a.url,function(){d(a),e()}))}var g=this,h=g.lookup;each(a,function(a){var c=a.url;if(h[c]?a=h[c]:(h[c]=a,g.queue.push(a)),!(a.state>0))if(Event.domLoaded||g.settings.strict_mode)f(a);else{var i,j="";(b||a.func)&&(a.state=1,i=tinymce.dom.ScriptLoader._addOnLoad(function(){d(a),e()}),j=tinymce.isIE?' onreadystatechange="':' onload="',j+="tinymce.dom.ScriptLoader._onLoad(this,'"+c+"',"+i+');"'),document.write('<script type="text/javascript" src="'+tinymce._addVer(c)+'"'+j+"></script>"),a.func||d(a)}}),e()},"static":{_addOnLoad:function(a){var b=this;return b._funcs=b._funcs||[],b._funcs.push(a),b._funcs.length-1},_onLoad:function(a,b,c){tinymce.isIE&&"complete"!=a.readyState||this._funcs[c].call(this)},loadScript:function(a,b){function c(){Event.clear(e),tinymce.DOM.remove(e),b&&(b.call(document,a),b=0)}var d,e=tinymce.DOM.uniqueId();tinymce.isIE?tinymce.util.XHR.send({url:tinymce._addVer(a),async:!1,success:function(a){window.execScript(a),c()}}):(d=tinymce.DOM.create("script",{id:e,type:"text/javascript",src:tinymce._addVer(a)}),Event.add(d,"load",c),(document.getElementsByTagName("head")[0]||document.body).appendChild(d))}}}),tinymce.ScriptLoader=new tinymce.dom.ScriptLoader}(),function(){var a=tinymce.DOM,b=tinymce.is;tinymce.create("tinymce.ui.Control",{Control:function(a,b){this.id=a,this.settings=b=b||{},this.rendered=!1,this.onRender=new tinymce.util.Dispatcher(this),this.classPrefix="",this.scope=b.scope||this,this.disabled=0,this.active=0},setDisabled:function(b){var c;b!=this.disabled&&(c=a.get(this.id),c&&this.settings.unavailable_prefix&&(b?(this.prevTitle=c.title,c.title=this.settings.unavailable_prefix+": "+c.title):c.title=this.prevTitle),this.setState("Disabled",b),this.setState("Enabled",!b),this.disabled=b)},isDisabled:function(){return this.disabled},setActive:function(a){a!=this.active&&(this.setState("Active",a),this.active=a)},isActive:function(){return this.active},setState:function(b,c){var d=a.get(this.id);b=this.classPrefix+b,c?a.addClass(d,b):a.removeClass(d,b)},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(b){a.setHTML(b,this.renderHTML())},postRender:function(){var a,c=this;b(c.disabled)&&(a=c.disabled,c.disabled=-1,c.setDisabled(a)),b(c.active)&&(a=c.active,c.active=-1,c.setActive(a))},remove:function(){a.remove(this.id),this.destroy()},destroy:function(){tinymce.dom.Event.clear(this.id)}})}(),tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(a,b){this.parent(a,b),this.controls=[],this.lookup={}},add:function(a){return this.lookup[a.id]=a,this.controls.push(a),a},get:function(a){return this.lookup[a]}}),tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(a,b){this.parent(a,b),this.classPrefix="mceSeparator"},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix})}}),function(){var a=tinymce.is;tinymce.DOM,tinymce.each,tinymce.walk;tinymce.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(a,b){this.parent(a,b),this.classPrefix="mceMenuItem"},setSelected:function(a){this.setState("Selected",a),this.selected=a},isSelected:function(){return this.selected},postRender:function(){var b=this;b.parent(),a(b.selected)&&b.setSelected(b.selected)}})}(),function(){var a=(tinymce.is,tinymce.DOM),b=(tinymce.each,tinymce.walk);tinymce.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(a,b){var c=this;c.parent(a,b),c.items={},c.collapsed=!1,c.menuCount=0,c.onAddItem=new tinymce.util.Dispatcher(this)},expand:function(a){var c=this;a&&b(c,function(a){a.expand&&a.expand()},"items",c),c.collapsed=!1},collapse:function(a){var c=this;a&&b(c,function(a){a.collapse&&a.collapse()},"items",c),c.collapsed=!0},isCollapsed:function(){return this.collapsed},add:function(b){return b.settings||(b=new tinymce.ui.MenuItem(b.id||a.uniqueId(),b)),this.onAddItem.dispatch(this,b),this.items[b.id]=b},addSeparator:function(){return this.add({separator:!0})},addMenu:function(a){return a.collapse||(a=this.createMenu(a)),this.menuCount++,this.add(a)},hasMenus:function(){return 0!==this.menuCount},remove:function(a){delete this.items[a.id]},removeAll:function(){var a=this;b(a,function(a){a.removeAll?a.removeAll():a.remove(),a.destroy()},"items",a),a.items={}},createMenu:function(b){var c=new tinymce.ui.Menu(b.id||a.uniqueId(),b);return c.onAddItem.add(this.onAddItem.dispatch,this.onAddItem),c}})}(),function(){var a=tinymce.is,b=tinymce.DOM,c=tinymce.each,d=tinymce.dom.Event,e=tinymce.dom.Element;tinymce.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(c,d){d=d||{},d.container=d.container||b.doc.body,d.offset_x=d.offset_x||0,d.offset_y=d.offset_y||0,d.vp_offset_x=d.vp_offset_x||0,d.vp_offset_y=d.vp_offset_y||0,a(d.icons)&&!d.icons&&(d["class"]+=" mceNoIcons"),this.parent(c,d),this.onShowMenu=new tinymce.util.Dispatcher(this),this.onHideMenu=new tinymce.util.Dispatcher(this),this.classPrefix="mceMenu"},createMenu:function(a){var c,d=this,e=d.settings;return a.container=a.container||e.container,a.parent=d,a.constrain=a.constrain||e.constrain,a["class"]=a["class"]||e["class"],a.vp_offset_x=a.vp_offset_x||e.vp_offset_x,a.vp_offset_y=a.vp_offset_y||e.vp_offset_y,c=new tinymce.ui.DropMenu(a.id||b.uniqueId(),a),c.onAddItem.add(d.onAddItem.dispatch,d.onAddItem),c},update:function(){var a,c,d=this,e=d.settings,f=b.get("menu_"+d.id+"_tbl"),g=b.get("menu_"+d.id+"_co");a=e.max_width?Math.min(f.clientWidth,e.max_width):f.clientWidth,c=e.max_height?Math.min(f.clientHeight,e.max_height):f.clientHeight,b.boxModel?d.element.setStyles({width:a,height:c}):d.element.setStyles({width:a+2,height:c+2}),e.max_width&&b.setStyle(g,"width",a),e.max_height&&(b.setStyle(g,"height",c),f.clientHeight<e.max_height&&b.setStyle(g,"overflow","hidden"))},showMenu:function(a,f,g){var h,i,j,k,l,m,n=this,o=n.settings,p=b.getViewPort(),q=2,r=n.classPrefix;n.collapse(1),n.isMenuVisible||(n.rendered?h=b.get("menu_"+n.id):(h=b.add(n.settings.container,n.renderNode()),c(n.items,function(a){a.postRender()}),n.element=new e("menu_"+n.id,{blocker:1,container:o.container})),tinymce.isOpera||b.setStyles(h,{left:-65535,top:-65535}),b.show(h),n.update(),a+=o.offset_x||0,f+=o.offset_y||0,p.w-=4,p.h-=4,o.constrain&&(i=h.clientWidth-q,j=h.clientHeight-q,k=p.x+p.w,l=p.y+p.h,a+o.vp_offset_x+i>k&&(a=g?g-i:Math.max(0,k-o.vp_offset_x-i)),f+o.vp_offset_y+j>l&&(f=Math.max(0,l-o.vp_offset_y-j))),b.setStyles(h,{left:a,top:f}),n.element.update(),n.isMenuVisible=1,n.mouseClickFunc=d.add(h,"click",function(a){var c;if(a=a.target,a&&(a=b.getParent(a,"TR"))&&!b.hasClass(a,r+"ItemSub")){if(c=n.items[a.id],c.isDisabled())return;for(m=n;m;)m.hideMenu&&m.hideMenu(),m=m.settings.parent;return c.settings.onclick&&c.settings.onclick(a),d.cancel(a)}}),n.hasMenus()&&(n.mouseOverFunc=d.add(h,"mouseover",function(a){var c,d;if(a=a.target,a&&(a=b.getParent(a,"TR"))){if(c=n.items[a.id],n.lastMenu&&n.lastMenu.collapse(1),c.isDisabled())return;
a&&b.hasClass(a,r+"ItemSub")&&(d=b.getRect(a),c.showMenu(d.x+d.w-q,d.y-q,d.x),n.lastMenu=c,b.addClass(b.get(c.id).firstChild,r+"ItemActive"))}})),n.onShowMenu.dispatch(n),o.keyboard_focus&&(d.add(h,"keydown",n._keyHandler,n),b.select("a","menu_"+n.id)[0].focus(),n._focusIdx=0))},hideMenu:function(a){var c,e=this,f=b.get("menu_"+e.id);e.isMenuVisible&&(d.remove(f,"mouseover",e.mouseOverFunc),d.remove(f,"click",e.mouseClickFunc),d.remove(f,"keydown",e._keyHandler),b.hide(f),e.isMenuVisible=0,a||e.collapse(1),e.element&&e.element.hide(),(c=b.get(e.id))&&b.removeClass(c.firstChild,e.classPrefix+"ItemActive"),e.onHideMenu.dispatch(e))},add:function(a){var c,d=this;return a=d.parent(a),d.isRendered&&(c=b.get("menu_"+d.id))&&d._add(b.select("tbody",c)[0],a),a},collapse:function(a){this.parent(a),this.hideMenu(1)},remove:function(a){return b.remove(a.id),this.destroy(),this.parent(a)},destroy:function(){var a=this,c=b.get("menu_"+a.id);d.remove(c,"mouseover",a.mouseOverFunc),d.remove(c,"click",a.mouseClickFunc),a.element&&a.element.remove(),b.remove(c)},renderNode:function(){var a,d,f,g,h=this,i=h.settings;return g=b.create("div",{id:"menu_"+h.id,"class":i["class"],style:"position:absolute;left:0;top:0;z-index:200000"}),f=b.add(g,"div",{id:"menu_"+h.id+"_co","class":h.classPrefix+(i["class"]?" "+i["class"]:"")}),h.element=new e("menu_"+h.id,{blocker:1,container:i.container}),i.menu_line&&b.add(f,"span",{"class":h.classPrefix+"Line"}),a=b.add(f,"table",{id:"menu_"+h.id+"_tbl",border:0,cellPadding:0,cellSpacing:0}),d=b.add(a,"tbody"),c(h.items,function(a){h._add(d,a)}),h.rendered=!0,g},_keyHandler:function(a){function c(a){var c=d._focusIdx+a,e=b.select("a","menu_"+d.id)[c];e&&(d._focusIdx=c,e.focus())}var d=this,e=a.keyCode;switch(e){case 38:return void c(-1);case 40:return void c(1);case 13:return;case 27:return this.hideMenu()}},_add:function(a,c){var d,e,f,g,h,i=c.settings,j=this.classPrefix;return i.separator?(f=b.add(a,"tr",{id:c.id,"class":j+"ItemSeparator"}),b.add(f,"td",{"class":j+"ItemSeparator"}),void((d=f.previousSibling)&&b.addClass(d,"mceLast"))):(d=f=b.add(a,"tr",{id:c.id,"class":j+"Item "+j+"ItemEnabled"}),d=g=b.add(d,"td"),d=e=b.add(d,"a",{href:"javascript:;",onclick:"return false;",onmousedown:"return false;"}),b.addClass(g,i["class"]),h=b.add(d,"span",{"class":"mceIcon"+(i.icon?" mce_"+i.icon:"")}),i.icon_src&&b.add(h,"img",{src:i.icon_src}),d=b.add(d,i.element||"span",{"class":"mceText",title:c.settings.title},c.settings.title),c.settings.style&&b.setAttrib(d,"style",c.settings.style),1==a.childNodes.length&&b.addClass(f,"mceFirst"),(d=f.previousSibling)&&b.hasClass(d,j+"ItemSeparator")&&b.addClass(f,"mceFirst"),c.collapse&&b.addClass(f,j+"ItemSub"),(d=f.previousSibling)&&b.removeClass(d,"mceLast"),void b.addClass(f,"mceLast"))}})}(),function(){var a=tinymce.DOM;tinymce.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(a,b){this.parent(a,b),this.classPrefix="mceButton"},renderHTML:function(){var b,c,d=this.classPrefix,e=this.settings;return c=a.encode(e.label||""),b='<a id="'+this.id+'" href="javascript:;" class="'+d+" "+d+"Enabled "+e["class"]+(c?" "+d+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" title="'+a.encode(e.title)+'">',b+=e.image?'<img class="mceIcon" src="'+e.image+'" />'+c+"</a>":'<span class="mceIcon '+e["class"]+'"></span>'+(c?'<span class="'+d+'Label">'+c+"</span>":"")+"</a>"},postRender:function(){var a=this,b=a.settings;tinymce.dom.Event.add(a.id,"click",function(c){return a.isDisabled()?void 0:b.onclick.call(b.scope,c)})}})}(),function(){var a=tinymce.DOM,b=tinymce.dom.Event,c=tinymce.each,d=tinymce.util.Dispatcher;tinymce.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(a,b){var c=this;c.parent(a,b),c.items=[],c.onChange=new d(c),c.onPostRender=new d(c),c.onAdd=new d(c),c.onRenderMenu=new tinymce.util.Dispatcher(this),c.classPrefix="mceListBox"},select:function(a){var b,d,e=this;return void 0==a?e.selectByIndex(-1):(d=a&&a.call?a:function(b){return b==a},void(a!=e.selectedValue&&(c(e.items,function(a,c){return d(a.value)?(b=1,e.selectByIndex(c),!1):void 0}),b||e.selectByIndex(-1))))},selectByIndex:function(b){var c,d,e=this;b!=e.selectedIndex?(c=a.get(e.id+"_text"),d=e.items[b],d?(e.selectedValue=d.value,e.selectedIndex=b,a.setHTML(c,a.encode(d.title)),a.removeClass(c,"mceTitle")):(a.setHTML(c,a.encode(e.settings.title)),a.addClass(c,"mceTitle"),e.selectedValue=e.selectedIndex=null),c=0):e.selectedValue=e.selectedIndex=null},add:function(a,b,c){var d=this;c=c||{},c=tinymce.extend(c,{title:a,value:b}),d.items.push(c),d.onAdd.dispatch(d,c)},getLength:function(){return this.items.length},renderHTML:function(){var b="",c=this,d=c.settings,e=c.classPrefix;return b='<table id="'+c.id+'" cellpadding="0" cellspacing="0" class="'+e+" "+e+"Enabled"+(d["class"]?" "+d["class"]:"")+'"><tbody><tr>',b+="<td>"+a.createHTML("a",{id:c.id+"_text",href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},a.encode(c.settings.title))+"</td>",b+="<td>"+a.createHTML("a",{id:c.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},"<span></span>")+"</td>",b+="</tr></tbody></table>"},showMenu:function(){var d,e,f,g=this,h=a.get(this.id);if(!g.isDisabled()&&0!=g.items.length){if(g.menu&&g.menu.isMenuVisible)return g.hideMenu();g.isMenuRendered||(g.renderMenu(),g.isMenuRendered=!0),d=a.getPos(this.settings.menu_container),e=a.getPos(h),f=g.menu,f.settings.offset_x=e.x,f.settings.offset_y=e.y,f.settings.keyboard_focus=!tinymce.isOpera,g.oldID&&f.items[g.oldID].setSelected(0),c(g.items,function(a){a.value===g.selectedValue&&(f.items[a.id].setSelected(1),g.oldID=a.id)}),f.showMenu(0,h.clientHeight),b.add(a.doc,"mousedown",g.hideMenu,g),a.addClass(g.id,g.classPrefix+"Selected")}},hideMenu:function(c){var d=this;(!c||"mousedown"!=c.type||c.target.id!=d.id+"_text"&&c.target.id!=d.id+"_open")&&(c&&a.getParent(c.target,function(b){return a.hasClass(b,"mceMenu")})||(a.removeClass(d.id,d.classPrefix+"Selected"),b.remove(a.doc,"mousedown",d.hideMenu,d),d.menu&&d.menu.hideMenu()))},renderMenu:function(){var b,d=this;b=d.settings.control_manager.createDropMenu(d.id+"_menu",{menu_line:1,"class":d.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150}),b.onHideMenu.add(d.hideMenu,d),b.add({title:d.settings.title,"class":"mceMenuItemTitle",onclick:function(){d.settings.onselect("")!==!1&&d.select("")}}),c(d.items,function(c){c.id=a.uniqueId(),c.onclick=function(){d.settings.onselect(c.value)!==!1&&d.select(c.value)},b.add(c)}),d.onRenderMenu.dispatch(d,b),d.menu=b},postRender:function(){var d=this,e=d.classPrefix;b.add(d.id,"click",d.showMenu,d),b.add(d.id+"_text","focus",function(a){d._focused||(d.keyDownHandler=b.add(d.id+"_text","keydown",function(a){var e,f=-1,g=a.keyCode;if(c(d.items,function(a,b){d.selectedValue==a.value&&(f=b)}),38==g)e=d.items[f-1];else if(40==g)e=d.items[f+1];else if(13==g)return e=d.selectedValue,d.selectedValue=null,d.settings.onselect(e),b.cancel(a);e&&(d.hideMenu(),d.select(e.value))})),d._focused=1}),b.add(d.id+"_text","blur",function(){b.remove(d.id+"_text","keydown",d.keyDownHandler),d._focused=0}),(tinymce.isIE6||!a.boxModel)&&(b.add(d.id,"mouseover",function(){a.hasClass(d.id,e+"Disabled")||a.addClass(d.id,e+"Hover")}),b.add(d.id,"mouseout",function(){a.hasClass(d.id,e+"Disabled")||a.removeClass(d.id,e+"Hover")})),d.onPostRender.dispatch(d,a.get(d.id))},destroy:function(){this.parent(),b.clear(this.id+"_text")}})}(),function(){var a=tinymce.DOM,b=tinymce.dom.Event,c=tinymce.each;tinymce.util.Dispatcher;tinymce.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(a,b){this.parent(a,b),this.classPrefix="mceNativeListBox"},setDisabled:function(b){a.get(this.id).disabled=b},isDisabled:function(){return a.get(this.id).disabled},select:function(a){var b,d,e=this;return void 0==a?e.selectByIndex(-1):(d=a&&a.call?a:function(b){return b==a},void(a!=e.selectedValue&&(c(e.items,function(a,c){return d(a.value)?(b=1,e.selectByIndex(c),!1):void 0}),b||e.selectByIndex(-1))))},selectByIndex:function(b){a.get(this.id).selectedIndex=b+1,this.selectedValue=this.items[b]?this.items[b].value:null},add:function(b,c,d){var e,f=this;d=d||{},d.value=c,f.isRendered()&&a.add(a.get(this.id),"option",d,b),e={title:b,value:c,attribs:d},f.items.push(e),f.onAdd.dispatch(f,e)},getLength:function(){return a.get(this.id).options.length-1},renderHTML:function(){var b,d=this;return b=a.createHTML("option",{value:""},"-- "+d.settings.title+" --"),c(d.items,function(c){b+=a.createHTML("option",{value:c.value},c.title)}),b=a.createHTML("select",{id:d.id,"class":"mceNativeListBox"},b)},postRender:function(){function c(a){var b=e.items[a.target.selectedIndex-1];b&&(b=b.value)&&(e.onChange.dispatch(e,b),e.settings.onselect&&e.settings.onselect(b))}var d,e=this;e.rendered=!0,b.add(e.id,"change",c),b.add(e.id,"keydown",function(a){var f;return b.remove(e.id,"change",d),f=b.add(e.id,"blur",function(){b.add(e.id,"change",c),b.remove(e.id,"blur",f)}),13==a.keyCode||32==a.keyCode?(c(a),b.cancel(a)):void 0}),e.onPostRender.dispatch(e,a.get(e.id))}})}(),function(){var a=tinymce.DOM,b=tinymce.dom.Event;tinymce.each;tinymce.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(b,c){this.parent(b,c),this.onRenderMenu=new tinymce.util.Dispatcher(this),c.menu_container=c.menu_container||a.doc.body},showMenu:function(){var c,d,e,f=this,g=a.get(f.id);if(!f.isDisabled()){if(f.isMenuRendered||(f.renderMenu(),f.isMenuRendered=!0),f.isMenuVisible)return f.hideMenu();c=a.getPos(f.settings.menu_container),d=a.getPos(g),e=f.menu,e.settings.offset_x=d.x,e.settings.offset_y=d.y,e.settings.vp_offset_x=d.x,e.settings.vp_offset_y=d.y,e.settings.keyboard_focus=f._focused,e.showMenu(0,g.clientHeight),b.add(a.doc,"mousedown",f.hideMenu,f),f.setState("Selected",1),f.isMenuVisible=1}},renderMenu:function(){var a,b=this;a=b.settings.control_manager.createDropMenu(b.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:b.settings.icons}),a.onHideMenu.add(b.hideMenu,b),b.onRenderMenu.dispatch(b,a),b.menu=a},hideMenu:function(c){var d=this;c&&"mousedown"==c.type&&a.getParent(c.target,function(a){return a.id===d.id||a.id===d.id+"_open"})||(c&&a.getParent(c.target,function(b){return a.hasClass(b,"mceMenu")})||(d.setState("Selected",0),b.remove(a.doc,"mousedown",d.hideMenu,d),d.menu&&d.menu.hideMenu()),d.isMenuVisible=0)},postRender:function(){var a=this,c=a.settings;b.add(a.id,"click",function(){a.isDisabled()||(c.onclick&&c.onclick(a.value),a.showMenu())})}})}(),function(){var a=tinymce.DOM,b=tinymce.dom.Event;tinymce.each;tinymce.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(a,b){this.parent(a,b),this.classPrefix="mceSplitButton"},renderHTML:function(){var b,c,d=this,e=d.settings;return b="<tbody><tr>",c=e.image?a.createHTML("img ",{src:e.image,"class":"mceAction "+e["class"]}):a.createHTML("span",{"class":"mceAction "+e["class"]},""),b+="<td>"+a.createHTML("a",{id:d.id+"_action",href:"javascript:;","class":"mceAction "+e["class"],onclick:"return false;",onmousedown:"return false;",title:e.title},c)+"</td>",c=a.createHTML("span",{"class":"mceOpen "+e["class"]}),b+="<td>"+a.createHTML("a",{id:d.id+"_open",href:"javascript:;","class":"mceOpen "+e["class"],onclick:"return false;",onmousedown:"return false;",title:e.title},c)+"</td>",b+="</tr></tbody>",a.createHTML("table",{id:d.id,"class":"mceSplitButton mceSplitButtonEnabled "+e["class"],cellpadding:"0",cellspacing:"0",onmousedown:"return false;",title:e.title},b)},postRender:function(){var c=this,d=c.settings;d.onclick&&b.add(c.id+"_action","click",function(){c.isDisabled()||d.onclick(c.value)}),b.add(c.id+"_open","click",c.showMenu,c),b.add(c.id+"_open","focus",function(){c._focused=1}),b.add(c.id+"_open","blur",function(){c._focused=0}),(tinymce.isIE6||!a.boxModel)&&(b.add(c.id,"mouseover",function(){a.hasClass(c.id,"mceSplitButtonDisabled")||a.addClass(c.id,"mceSplitButtonHover")}),b.add(c.id,"mouseout",function(){a.hasClass(c.id,"mceSplitButtonDisabled")||a.removeClass(c.id,"mceSplitButtonHover")}))},destroy:function(){this.parent(),b.clear(this.id+"_action"),b.clear(this.id+"_open")}})}(),function(){var a=tinymce.DOM,b=tinymce.dom.Event,c=tinymce.is,d=tinymce.each;tinymce.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(a,b){var c=this;c.parent(a,b),c.settings=b=tinymce.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},c.settings),c.onShowMenu=new tinymce.util.Dispatcher(c),c.onHideMenu=new tinymce.util.Dispatcher(c),c.value=b.default_color},showMenu:function(){var c,d,e=this;if(!e.isDisabled()){if(e.isMenuRendered||(e.renderMenu(),e.isMenuRendered=!0),e.isMenuVisible)return e.hideMenu();c=a.get(e.id),a.show(e.id+"_menu"),a.addClass(c,"mceSplitButtonSelected"),d=a.getPos(c),a.setStyles(e.id+"_menu",{left:d.x,top:d.y+c.clientHeight,zIndex:2e5}),c=0,b.add(a.doc,"mousedown",e.hideMenu,e),e._focused&&(e._keyHandler=b.add(e.id+"_menu","keydown",function(a){27==a.keyCode&&e.hideMenu()}),a.select("a",e.id+"_menu")[0].focus()),e.onShowMenu.dispatch(e),e.isMenuVisible=1}},hideMenu:function(c){var d=this;c&&"mousedown"==c.type&&a.getParent(c.target,function(a){return a.id===d.id+"_open"})||(c&&a.getParent(c.target,function(b){return a.hasClass(b,"mceSplitButtonMenu")})||(a.removeClass(d.id,"mceSplitButtonSelected"),b.remove(a.doc,"mousedown",d.hideMenu,d),b.remove(d.id+"_menu","keydown",d._keyHandler),a.hide(d.id+"_menu")),d.onHideMenu.dispatch(d),d.isMenuVisible=0)},renderMenu:function(){var e,f,g,h,i,j=this,k=0,l=j.settings;return i=a.add(l.menu_container,"div",{id:j.id+"_menu","class":l.menu_class+" "+l["class"],style:"position:absolute;left:0;top:-1000px;"}),e=a.add(i,"div",{"class":l["class"]+" mceSplitButtonMenu"}),a.add(e,"span",{"class":"mceMenuLine"}),f=a.add(e,"table",{"class":"mceColorSplitMenu"}),g=a.add(f,"tbody"),k=0,d(c(l.colors,"array")?l.colors:l.colors.split(","),function(b){b=b.replace(/^#/,""),k--||(h=a.add(g,"tr"),k=l.grid_width-1),f=a.add(h,"td"),f=a.add(f,"a",{href:"javascript:;",style:{backgroundColor:"#"+b},mce_color:"#"+b})}),l.more_colors_func&&(f=a.add(g,"tr"),f=a.add(f,"td",{colspan:l.grid_width,"class":"mceMoreColors"}),f=a.add(f,"a",{id:j.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},l.more_colors_title),b.add(f,"click",function(a){return l.more_colors_func.call(l.more_colors_scope||this),b.cancel(a)})),a.addClass(e,"mceColorSplitMenu"),b.add(j.id+"_menu","click",function(a){var c;return a=a.target,"A"==a.nodeName&&(c=a.getAttribute("mce_color"))&&j.setColor(c),b.cancel(a)}),i},setColor:function(b){var c=this;a.setStyle(c.id+"_preview","backgroundColor",b),c.value=b,c.hideMenu(),c.settings.onselect(b)},postRender:function(){var b=this,c=b.id;b.parent(),a.add(c+"_action","div",{id:c+"_preview","class":"mceColorPreview"}),a.setStyle(b.id+"_preview","backgroundColor",b.value)},destroy:function(){this.parent(),b.clear(this.id+"_menu"),b.clear(this.id+"_more"),a.remove(this.id+"_menu")}})}(),tinymce.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var a,b,c,d,e,f,g=this,h="",i=tinymce.DOM,j=g.settings;for(f=g.controls,c=0;c<f.length;c++)b=f[c],d=f[c-1],e=f[c+1],0===c&&(a="mceToolbarStart",b.Button?a+=" mceToolbarStartButton":b.SplitButton?a+=" mceToolbarStartSplitButton":b.ListBox&&(a+=" mceToolbarStartListBox"),h+=i.createHTML("td",{"class":a},i.createHTML("span",null,"<!-- IE -->"))),d&&b.ListBox&&(d.Button||d.SplitButton)&&(h+=i.createHTML("td",{"class":"mceToolbarEnd"},i.createHTML("span",null,"<!-- IE -->"))),h+=i.stdMode?'<td style="position: relative">'+b.renderHTML()+"</td>":"<td>"+b.renderHTML()+"</td>",e&&b.ListBox&&(e.Button||e.SplitButton)&&(h+=i.createHTML("td",{"class":"mceToolbarStart"},i.createHTML("span",null,"<!-- IE -->")));return a="mceToolbarEnd",b.Button?a+=" mceToolbarEndButton":b.SplitButton?a+=" mceToolbarEndSplitButton":b.ListBox&&(a+=" mceToolbarEndListBox"),h+=i.createHTML("td",{"class":a},i.createHTML("span",null,"<!-- IE -->")),i.createHTML("table",{id:g.id,"class":"mceToolbar"+(j["class"]?" "+j["class"]:""),cellpadding:"0",cellspacing:"0",align:g.settings.align||""},"<tbody><tr>"+h+"</tr></tbody>")}}),function(){var a=tinymce.util.Dispatcher;tinymce.each;tinymce.create("tinymce.AddOnManager",{items:[],urls:{},lookup:{},onAdd:new a(this),get:function(a){return this.lookup[a]},requireLangPack:function(a){var b,c=tinymce.EditorManager.settings;c&&c.language&&(b=this.urls[a]+"/langs/"+c.language+".js",tinymce.dom.Event.domLoaded||c.strict_mode?tinymce.ScriptLoader.add(b):tinymce.ScriptLoader.load(b))},add:function(a,b){return this.items.push(b),this.lookup[a]=b,this.onAdd.dispatch(this,a,b),b},load:function(a,b,c,d){var e=this;e.urls[a]||(0!=b.indexOf("/")&&-1==b.indexOf("://")&&(b=tinymce.baseURL+"/"+b),e.urls[a]=b.substring(0,b.lastIndexOf("/")),tinymce.ScriptLoader.add(b,c,d))}}),tinymce.PluginManager=new tinymce.AddOnManager,tinymce.ThemeManager=new tinymce.AddOnManager}(),function(){var a=tinymce.each,b=tinymce.extend,c=tinymce.DOM,d=tinymce.dom.Event,e=tinymce.ThemeManager,f=tinymce.PluginManager,g=tinymce.explode;tinymce.create("static tinymce.EditorManager",{editors:{},i18n:{},activeEditor:null,preInit:function(){var a=this,b=window.location;tinymce.documentBaseURL=b.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(tinymce.documentBaseURL)||(tinymce.documentBaseURL+="/"),tinymce.baseURL=new tinymce.util.URI(tinymce.documentBaseURL).toAbsolute(tinymce.baseURL),tinymce.EditorManager.baseURI=new tinymce.util.URI(tinymce.baseURL),document.domain&&b.hostname!=document.domain&&(tinymce.relaxedDomain=document.domain),!tinymce.relaxedDomain&&tinymce.EditorManager.baseURI.host!=b.hostname&&b.hostname&&(document.domain=tinymce.relaxedDomain=b.hostname.replace(/.*\.(.+\..+)$/,"$1")),a.onBeforeUnload=new tinymce.util.Dispatcher(a),d.add(window,"beforeunload",function(b){a.onBeforeUnload.dispatch(a,b)})},init:function(h){function i(a,b,c){var d=a[b];if(d)return tinymce.is(d,"string")&&(c=d.replace(/\.\w+$/,""),c=c?tinymce.resolve(c):0,d=tinymce.resolve(d)),d.apply(c||this,Array.prototype.slice.call(arguments,2))}var j,k,l,m,n=this,o=tinymce.ScriptLoader,p=[];h=b({theme:"simple",language:"en",strict_loading_mode:"application/xhtml+xml"==document.contentType},h),n.settings=h,d.domLoaded||h.strict_loading_mode||(h.language&&o.add(tinymce.baseURL+"/langs/"+h.language+".js"),h.theme&&"-"!=h.theme.charAt(0)&&!e.urls[h.theme]&&e.load(h.theme,"themes/"+h.theme+"/editor_template"+tinymce.suffix+".js"),h.plugins&&(j=g(h.plugins),-1!=tinymce.inArray(j,"compat2x")&&f.load("compat2x","plugins/compat2x/editor_plugin"+tinymce.suffix+".js"),a(j,function(a){if(a&&"-"!=a.charAt(0)&&!f.urls[a]){if(!tinymce.isWebKit&&"safari"==a)return;f.load(a,"plugins/"+a+"/editor_plugin"+tinymce.suffix+".js")}})),o.loadQueue()),d.add(document,"init",function(){function b(a,b){return b.constructor===RegExp?b.test(a.className):c.hasClass(a,b)}var d,e;if(i(h,"onpageload"),!h.browsers||(d=!1,a(g(h.browsers),function(a){switch(a){case"ie":case"msie":tinymce.isIE&&(d=!0);break;case"gecko":tinymce.isGecko&&(d=!0);break;case"safari":case"webkit":tinymce.isWebKit&&(d=!0);break;case"opera":tinymce.isOpera&&(d=!0)}}),d)){switch(h.mode){case"exact":d=h.elements||"",d.length>0&&a(g(d),function(b){c.get(b)?(m=new tinymce.Editor(b,h),p.push(m),m.render(1)):(k=0,a(document.forms,function(d){a(d.elements,function(a){a.name===b&&(b="mce_editor_"+k,c.setAttrib(a,"id",b),m=new tinymce.Editor(b,h),p.push(m),m.render(1))})}))});break;case"textareas":case"specific_textareas":a(c.select("textarea"),function(a){h.editor_deselector&&b(a,h.editor_deselector)||(!h.editor_selector||b(a,h.editor_selector))&&(l=c.get(a.name),a.id||l||(a.id=a.name),(!a.id||n.get(a.id))&&(a.id=c.uniqueId()),m=new tinymce.Editor(a.id,h),p.push(m),m.render(1))})}h.oninit&&(d=e=0,a(p,function(a){e++,a.initialized?d++:a.onInit.add(function(){d++,d==e&&i(h,"oninit")}),d==e&&i(h,"oninit")}))}})},get:function(a){return this.editors[a]},getInstanceById:function(a){return this.get(a)},add:function(a){return this.editors[a.id]=a,this._setActive(a),a},remove:function(b){var c=this;return c.editors[b.id]?(delete c.editors[b.id],c.activeEditor==b&&a(c.editors,function(a){return c._setActive(a),!1}),b.destroy(),b):null},execCommand:function(a,b,c){function d(){g.destroy(),e.detachEvent("onunload",d),e=e.tinyMCE=e.tinymce=null}var e,f=this,g=f.get(c);switch(a){case"mceFocus":return g.focus(),!0;case"mceAddEditor":case"mceAddControl":return f.get(c)||new tinymce.Editor(c,f.settings).render(),!0;case"mceAddFrameControl":return e=c.window,e.tinyMCE=tinyMCE,e.tinymce=tinymce,tinymce.DOM.doc=e.document,tinymce.DOM.win=e,g=new tinymce.Editor(c.element_id,c),g.render(),tinymce.isIE&&e.attachEvent("onunload",d),c.page_window=null,!0;case"mceRemoveEditor":case"mceRemoveControl":return g&&g.remove(),!0;case"mceToggleEditor":return g?(g.isHidden()?g.show():g.hide(),!0):(f.execCommand("mceAddControl",0,c),!0)}return f.activeEditor?f.activeEditor.execCommand(a,b,c):!1},execInstanceCommand:function(a,b,c,d){var e=this.get(a);return e?e.execCommand(b,c,d):!1},triggerSave:function(){a(this.editors,function(a){a.save()})},addI18n:function(b,c){var d=this.i18n;tinymce.is(b,"string")?a(c,function(a,c){d[b+"."+c]=a}):a(b,function(b,c){a(b,function(b,e){a(b,function(a,b){"common"===e?d[c+"."+b]=a:d[c+"."+e+"."+b]=a})})})},_setActive:function(a){this.selectedInstance=this.activeEditor=a}}),tinymce.EditorManager.preInit()}();var tinyMCE=window.tinyMCE=tinymce.EditorManager;!function(){var a=tinymce.DOM,b=tinymce.dom.Event,c=tinymce.extend,d=tinymce.util.Dispatcher,e=tinymce.each,f=tinymce.isGecko,g=tinymce.isIE,h=tinymce.isWebKit,i=tinymce.is,j=tinymce.ThemeManager,k=tinymce.PluginManager,l=tinymce.EditorManager,m=(tinymce.inArray,tinymce.grep,tinymce.explode);tinymce.create("tinymce.Editor",{Editor:function(a,b){var f=this;f.id=f.editorId=a,f.execCommands={},f.queryStateCommands={},f.queryValueCommands={},f.plugins={},e(["onPreInit","onBeforeRenderUI","onPostRender","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState"],function(a){f[a]=new d(f)}),f.settings=b=c({id:a,language:"en",docs_language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:tinymce.documentBaseURL,add_form_submit_trigger:1,submit_patch:1,add_unload_trigger:1,convert_urls:1,relative_urls:1,remove_script_host:1,table_inline_editing:0,object_resizing:1,cleanup:1,accessibility_focus:1,custom_shortcuts:1,custom_undo_redo_keyboard_shortcuts:1,custom_undo_redo_restore_selection:1,custom_undo_redo:1,doctype:'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">',visual_table_class:"mceItemTable",visual:1,inline_styles:!0,convert_fonts_to_spans:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",apply_source_formatting:1,directionality:"ltr",forced_root_block:"p",valid_elements:"@[id|class|style|title|dir<ltr?rtl|lang|xml::lang|onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup],a[rel|rev|charset|hreflang|tabindex|accesskey|type|name|href|target|title|class|onfocus|onblur],strong/b,em/i,strike,u,#p[align],-ol[type|compact],-ul[type|compact],-li,br,img[longdesc|usemap|src|border|alt=|title|hspace|vspace|width|height|align],-sub,-sup,-blockquote[cite],-table[border=0|cellspacing|cellpadding|width|frame|rules|height|align|summary|bgcolor|background|bordercolor],-tr[rowspan|width|height|align|valign|bgcolor|background|bordercolor],tbody,thead,tfoot,#td[colspan|rowspan|width|height|align|valign|bgcolor|background|bordercolor|scope],#th[colspan|rowspan|width|height|align|valign|scope],caption,-div,-span,-code,-pre,address,-h1,-h2,-h3,-h4,-h5,-h6,hr[size|noshade],-font[face|size|color],dd,dl,dt,cite,abbr,acronym,del[datetime|cite],ins[datetime|cite],object[classid|width|height|codebase|*],param[name|value],embed[type|width|height|src|*],script[src|type],map[name],area[shape|coords|href|alt|target],bdo,button,col[align|char|charoff|span|valign|width],colgroup[align|char|charoff|span|valign|width],dfn,fieldset,form[action|accept|accept-charset|enctype|method],input[accept|alt|checked|disabled|maxlength|name|readonly|size|src|type|value|tabindex|accesskey],kbd,label[for],legend,noscript,optgroup[label|disabled],option[disabled|label|selected|value],q[cite],samp,select[disabled|multiple|name|size],small,textarea[cols|rows|disabled|name|readonly],tt,var,big",hidden_input:1,padd_empty_editor:1,render_ui:1,init_theme:1,force_p_newlines:1,indentation:"30px",keep_styles:1},b),f.documentBaseURI=new tinymce.util.URI(b.document_base_url||tinymce.documentBaseURL,{base_uri:tinyMCE.baseURI}),f.baseURI=l.baseURI,f.execCallback("setup",f)},render:function(c){function d(){g.language&&n.add(tinymce.baseURL+"/langs/"+g.language+".js"),"-"==g.theme.charAt(0)||j.urls[g.theme]||j.load(g.theme,"themes/"+g.theme+"/editor_template"+tinymce.suffix+".js"),e(m(g.plugins),function(a){if(a&&"-"!=a.charAt(0)&&!k.urls[a]){if(!h&&"safari"==a)return;k.load(a,"plugins/"+a+"/editor_plugin"+tinymce.suffix+".js")}}),n.loadQueue(function(){function a(){window.setTimeout(function(){b.remove(f.id,"focus",a),f.windowManager.confirm(f.getLang("edit_confirm"),function(a){a&&f.init()})},0)}return g.ask?void b.add(f.id,"focus",a):void(f.removed||f.init())})}var f=this,g=f.settings,i=f.id,n=tinymce.ScriptLoader;return b.domLoaded?(c||(g.strict_loading_mode=1,tinyMCE.settings=g),void(f.getElement()&&(g.strict_loading_mode&&(n.settings.strict_mode=g.strict_loading_mode,tinymce.DOM.settings.strict=1),!/TEXTAREA|INPUT/i.test(f.getElement().nodeName)&&g.hidden_input&&a.getParent(i,"form")&&a.insertAfter(a.create("input",{type:"hidden",name:i}),i),f.windowManager=new tinymce.WindowManager(f),"xml"==g.encoding&&f.onGetContent.add(function(b,c){c.save&&(c.content=a.encode(c.content))}),g.add_form_submit_trigger&&f.onSubmit.addToTop(function(){f.initialized&&(f.save(),f.isNotDirty=1)}),g.add_unload_trigger&&!g.ask&&(f._beforeUnload=tinyMCE.onBeforeUnload.add(function(){!f.initialized||f.destroyed||f.isHidden()||f.save({format:"raw",no_events:!0})})),tinymce.addUnload(f.destroy,f),g.submit_patch&&f.onBeforeRenderUI.add(function(){var a=f.getElement().form;a&&(a._mceOldSubmit||(a.submit.nodeType||a.submit.length||(f.formElement=a,a._mceOldSubmit=a.submit,a.submit=function(){return l.triggerSave(),f.isNotDirty=1,this._mceOldSubmit(this)}),a=null))}),-1!=g.plugins.indexOf("compat2x")?(k.load("compat2x","plugins/compat2x/editor_plugin"+tinymce.suffix+".js"),n.loadQueue(d)):d()))):void b.add(document,"init",function(){f.render()})},init:function(){function c(a,b){b&&b.initial||s.execCommand("mceRepaint")}var d,h,i,n,o,p,q,r,s=this,t=s.settings,u=s.getElement();l.add(s),t.theme=t.theme.replace(/-/,""),n=j.get(t.theme),s.theme=new n,s.theme.init&&t.init_theme&&s.theme.init(s,j.urls[t.theme]||tinymce.documentBaseURL.replace(/\/$/,"")),e(m(t.plugins.replace(/\-/g,"")),function(a){var b,c=k.get(a),d=k.urls[a]||tinymce.documentBaseURL.replace(/\/$/,"");c&&(b=new c(s,d),s.plugins[a]=b,b.init&&b.init(s,d))}),t.popup_css!==!1&&(t.popup_css?t.popup_css=s.documentBaseURI.toAbsolute(t.popup_css):t.popup_css=s.baseURI.toAbsolute("themes/"+t.theme+"/skins/"+t.skin+"/dialog.css")),t.popup_css_add&&(t.popup_css+=","+s.documentBaseURI.toAbsolute(t.popup_css_add)),s.controlManager=new tinymce.ControlManager(s),s.undoManager=new tinymce.UndoManager(s),s.undoManager.onAdd.add(function(a,b){return b.initial?void 0:s.onChange.dispatch(s,b,a)}),s.undoManager.onUndo.add(function(a,b){return s.onUndo.dispatch(s,b,a)}),s.undoManager.onRedo.add(function(a,b){return s.onRedo.dispatch(s,b,a)}),t.custom_undo_redo&&s.onExecCommand.add(function(a,b,c,d,e){"Undo"==b||"Redo"==b||"mceRepaint"==b||e&&e.skip_undo||s.undoManager.add()}),s.onExecCommand.add(function(a,b){/^(FontName|FontSize)$/.test(b)||s.nodeChanged()}),f&&(s.onUndo.add(c),s.onRedo.add(c),s.onSetContent.add(c)),s.onBeforeRenderUI.dispatch(s,s.controlManager),t.render_ui&&(h=t.width||u.style.width||u.offsetWidth,i=t.height||u.style.height||u.offsetHeight,s.orgDisplay=u.style.display,r=/^[0-9\.]+(|px)$/i,r.test(""+h)&&(h=Math.max(parseInt(h)+(n.deltaWidth||0),100)),r.test(""+i)&&(i=Math.max(parseInt(i)+(n.deltaHeight||0),100)),n=s.theme.renderUI({targetNode:u,width:h,height:i,deltaWidth:t.delta_width,deltaHeight:t.delta_height}),s.editorContainer=n.editorContainer),a.setStyles(n.sizeContainer||n.editorContainer,{width:h,height:i}),i=(n.iframeHeight||i)+("number"==typeof i?n.deltaHeight||0:""),100>i&&(i=100),s.iframeHTML=t.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml"><base href="'+s.documentBaseURI.getURI()+'" />',s.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',tinymce.relaxedDomain&&(s.iframeHTML+='<script type="text/javascript">document.domain = "'+tinymce.relaxedDomain+'";</script>'),p=t.body_id||"tinymce",-1!=p.indexOf("=")&&(p=s.getParam("body_id","","hash"),p=p[s.id]||p),q=t.body_class||"",-1!=q.indexOf("=")&&(q=s.getParam("body_class","","hash"),q=q[s.id]||""),s.iframeHTML+='</head><body id="'+p+'" class="mceContentBody '+q+'"></body></html>',tinymce.relaxedDomain&&(g||tinymce.isOpera&&parseFloat(opera.version())>=9.5?o='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+s.id+'");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()':tinymce.isOpera&&(o='javascript:(function(){document.open();document.domain="'+document.domain+'";document.close();ed.setupIframe();})()')),d=a.add(n.iframeContainer,"iframe",{id:s.id+"_ifr",src:o||'javascript:""',frameBorder:"0",style:{width:"100%",height:i}}),s.contentAreaContainer=n.iframeContainer,a.get(n.editorContainer).style.display=s.orgDisplay,a.get(s.id).style.display="none",tinymce.isOldWebKit?(b.add(d,"load",s.setupIframe,s),d.src=tinymce.baseURL+"/plugins/safari/blank.htm"):(g&&tinymce.relaxedDomain||s.setupIframe(),u=d=n=null)},setupIframe:function(){function c(a,b){e(m(i.custom_elements),function(a){var c;0===a.indexOf("~")?(a=a.substring(1),c="span"):c="div",b.content=b.content.replace(new RegExp("<("+a+")([^>]*)>","g"),"<"+c+' mce_name="$1"$2>'),b.content=b.content.replace(new RegExp("</("+a+")>","g"),"</"+c+">")})}var d,h=this,i=h.settings,j=a.get(h.id),k=h.getDoc();if(g&&tinymce.relaxedDomain||(k.open(),k.write(h.iframeHTML),k.close()),!g)try{i.readonly||(k.designMode="On")}catch(n){}if(g&&(d=h.getBody(),a.hide(d),i.readonly||(d.contentEditable=!0),a.show(d)),h.dom=new tinymce.DOM.DOMUtils(h.getDoc(),{keep_values:!0,url_converter:h.convertURL,url_converter_scope:h,hex_colors:i.force_hex_style_colors,class_filter:i.class_filter,update_styles:1,fix_ie_paragraphs:1}),h.serializer=new tinymce.dom.Serializer({entity_encoding:i.entity_encoding,entities:i.entities,valid_elements:i.verify_html===!1?"*[*]":i.valid_elements,extended_valid_elements:i.extended_valid_elements,valid_child_elements:i.valid_child_elements,invalid_elements:i.invalid_elements,fix_table_elements:i.fix_table_elements,fix_list_elements:i.fix_list_elements,fix_content_duplication:i.fix_content_duplication,convert_fonts_to_spans:i.convert_fonts_to_spans,font_size_classes:i.font_size_classes,
font_size_style_values:i.font_size_style_values,apply_source_formatting:i.apply_source_formatting,remove_linebreaks:i.remove_linebreaks,element_format:i.element_format,dom:h.dom}),h.selection=new tinymce.dom.Selection(h.dom,h.getWin(),h.serializer),h.forceBlocks=new tinymce.ForceBlocks(h,{forced_root_block:i.forced_root_block}),h.editorCommands=new tinymce.EditorCommands(h),h.serializer.onPreProcess.add(function(a,b){return h.onPreProcess.dispatch(h,b,a)}),h.serializer.onPostProcess.add(function(a,b){return h.onPostProcess.dispatch(h,b,a)}),h.onPreInit.dispatch(h),i.gecko_spellcheck||(h.getBody().spellcheck=0),i.readonly||h._addEvents(),h.controlManager.onPostRender.dispatch(h,h.controlManager),h.onPostRender.dispatch(h),i.directionality&&(h.getBody().dir=i.directionality),i.nowrap&&(h.getBody().style.whiteSpace="nowrap"),i.auto_resize&&h.onNodeChange.add(h.resizeToContent,h),i.custom_elements&&(h.onBeforeSetContent.add(c),h.onPostProcess.add(function(a,b){b.set&&c(a,b)})),i.handle_node_change_callback&&h.onNodeChange.add(function(a,b,c){h.execCallback("handle_node_change_callback",h.id,c,-1,-1,!0,h.selection.isCollapsed())}),i.save_callback&&h.onSaveContent.add(function(a,b){var c=h.execCallback("save_callback",h.id,b.content,h.getBody());c&&(b.content=c)}),i.onchange_callback&&h.onChange.add(function(a,b){h.execCallback("onchange_callback",h,b)}),i.convert_newlines_to_brs&&h.onBeforeSetContent.add(function(a,b){b.initial&&(b.content=b.content.replace(/\r?\n/g,"<br />"))}),i.fix_nesting&&g&&h.onBeforeSetContent.add(function(a,b){b.content=h._fixNesting(b.content)}),i.preformatted&&h.onPostProcess.add(function(a,b){b.content=b.content.replace(/^\s*<pre.*?>/,""),b.content=b.content.replace(/<\/pre>\s*$/,""),b.set&&(b.content='<pre class="mceItemHidden">'+b.content+"</pre>")}),i.verify_css_classes&&(h.serializer.attribValueFilter=function(a,b){var c,d;return"class"==a?(h.classesRE||(d=h.dom.getClasses(),d.length>0&&(c="",e(d,function(a){c+=(c?"|":"")+a["class"]}),h.classesRE=new RegExp("("+c+")","gi"))),!h.classesRE||/(\bmceItem\w+\b|\bmceTemp\w+\b)/g.test(b)||h.classesRE.test(b)?b:""):b}),i.convert_fonts_to_spans&&h._convertFonts(),i.inline_styles&&h._convertInlineElements(),i.cleanup_callback&&(h.onBeforeSetContent.add(function(a,b){b.content=h.execCallback("cleanup_callback","insert_to_editor",b.content,b)}),h.onPreProcess.add(function(a,b){b.set&&h.execCallback("cleanup_callback","insert_to_editor_dom",b.node,b),b.get&&h.execCallback("cleanup_callback","get_from_editor_dom",b.node,b)}),h.onPostProcess.add(function(a,b){b.set&&(b.content=h.execCallback("cleanup_callback","insert_to_editor",b.content,b)),b.get&&(b.content=h.execCallback("cleanup_callback","get_from_editor",b.content,b))})),i.save_callback&&h.onGetContent.add(function(a,b){b.save&&(b.content=h.execCallback("save_callback",h.id,b.content,h.getBody()))}),i.handle_event_callback&&h.onEvent.add(function(a,c,d){h.execCallback("handle_event_callback",c,a,d)===!1&&b.cancel(c)}),h.onSetContent.add(function(){h.addVisual(h.getBody())}),i.padd_empty_editor&&h.onPostProcess.add(function(a,b){b.content=b.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),f&&!i.readonly)try{k.designMode="Off",k.designMode="On"}catch(n){}setTimeout(function(){h.removed||(h.load({initial:!0,format:i.cleanup_on_startup?"html":"raw"}),h.startContent=h.getContent({format:"raw"}),h.undoManager.add({initial:!0}),h.initialized=!0,h.onInit.dispatch(h),h.execCallback("setupcontent_callback",h.id,h.getBody(),h.getDoc()),h.execCallback("init_instance_callback",h),h.focus(!0),h.nodeChanged({initial:1}),i.content_css&&tinymce.each(m(i.content_css),function(a){h.dom.loadCSS(h.documentBaseURI.toAbsolute(a))}),i.auto_focus&&setTimeout(function(){var a=l.get(i.auto_focus);a.selection.select(a.getBody(),1),a.selection.collapse(1),a.getWin().focus()},100))},1),j=null},focus:function(a){var b,c=this,d=c.settings.content_editable;a||d||g&&c.selection.getNode().ownerDocument==c.getDoc()||c.getWin().focus(),l.activeEditor!=c&&(null!=(b=l.activeEditor)&&b.onDeactivate.dispatch(b,c),c.onActivate.dispatch(c,b)),l._setActive(c)},execCallback:function(a){var b,c=this,d=c.settings[a];if(d)return c.callbackLookup&&(b=c.callbackLookup[a])&&(d=b.func,b=b.scope),i(d,"string")&&(b=d.replace(/\.\w+$/,""),b=b?tinymce.resolve(b):0,d=tinymce.resolve(d),c.callbackLookup=c.callbackLookup||{},c.callbackLookup[a]={func:d,scope:b}),d.apply(b||c,Array.prototype.slice.call(arguments,1))},translate:function(a){var b=this.settings.language||"en",c=l.i18n;return a?c[b+"."+a]||a.replace(/{\#([^}]+)\}/g,function(a,d){return c[b+"."+d]||"{#"+d+"}"}):""},getLang:function(a,b){return l.i18n[(this.settings.language||"en")+"."+a]||(i(b)?b:"{#"+a+"}")},getParam:function(a,b,c){var d,f=tinymce.trim,g=i(this.settings[a])?this.settings[a]:b;return"hash"===c?(d={},i(g,"string")?e(g.indexOf("=")>0?g.split(/[;,](?![^=;,]*(?:[;,]|$))/):g.split(","),function(a){a=a.split("="),a.length>1?d[f(a[0])]=f(a[1]):d[f(a[0])]=f(a)}):d=g,d):g},nodeChanged:function(a){var b=this,c=b.selection,d=c.getNode()||b.getBody();b.initialized&&b.onNodeChange.dispatch(b,a?a.controlManager||b.controlManager:b.controlManager,g&&d.ownerDocument!=b.getDoc()?b.getBody():d,c.isCollapsed(),a)},addButton:function(a,b){var c=this;c.buttons=c.buttons||{},c.buttons[a]=b},addCommand:function(a,b,c){this.execCommands[a]={func:b,scope:c||this}},addQueryStateHandler:function(a,b,c){this.queryStateCommands[a]={func:b,scope:c||this}},addQueryValueHandler:function(a,b,c){this.queryValueCommands[a]={func:b,scope:c||this}},addShortcut:function(a,b,c,d){var f,g=this;return g.settings.custom_shortcuts?(g.shortcuts=g.shortcuts||{},i(c,"string")&&(f=c,c=function(){g.execCommand(f,!1,null)}),i(c,"object")&&(f=c,c=function(){g.execCommand(f[0],f[1],f[2])}),e(m(a),function(a){var f={func:c,scope:d||this,desc:b,alt:!1,ctrl:!1,shift:!1};e(m(a,"+"),function(a){switch(a){case"alt":case"ctrl":case"shift":f[a]=!0;break;default:f.charCode=a.charCodeAt(0),f.keyCode=a.toUpperCase().charCodeAt(0)}}),g.shortcuts[(f.ctrl?"ctrl":"")+","+(f.alt?"alt":"")+","+(f.shift?"shift":"")+","+f.keyCode]=f}),!0):!1},execCommand:function(a,b,c,d){var f,g,h=this,i=0;return/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(a)||d&&d.skip_focus||h.focus(),f={},h.onBeforeExecCommand.dispatch(h,a,b,c,f),f.terminate?!1:h.execCallback("execcommand_callback",h.id,h.selection.getNode(),a,b,c)?(h.onExecCommand.dispatch(h,a,b,c,d),!0):(f=h.execCommands[a])&&(g=f.func.call(f.scope,b,c),g!==!0)?(h.onExecCommand.dispatch(h,a,b,c,d),g):(e(h.plugins,function(e){return e.execCommand&&e.execCommand(a,b,c)?(h.onExecCommand.dispatch(h,a,b,c,d),i=1,!1):void 0}),i?!0:h.theme.execCommand&&h.theme.execCommand(a,b,c)?(h.onExecCommand.dispatch(h,a,b,c,d),!0):h.editorCommands.execCommand(a,b,c)?(h.onExecCommand.dispatch(h,a,b,c,d),!0):(h.getDoc().execCommand(a,b,c),void h.onExecCommand.dispatch(h,a,b,c,d)))},queryCommandState:function(a){var b,c,d=this;if(!d._isHidden()){if((b=d.queryStateCommands[a])&&(c=b.func.call(b.scope),c!==!0))return c;if(b=d.editorCommands.queryCommandState(a),-1!==b)return b;try{return this.getDoc().queryCommandState(a)}catch(e){}}},queryCommandValue:function(a){var b,c,d=this;if(!d._isHidden()){if((b=d.queryValueCommands[a])&&(c=b.func.call(b.scope),c!==!0))return c;if(b=d.editorCommands.queryCommandValue(a),i(b))return b;try{return this.getDoc().queryCommandValue(a)}catch(e){}}},show:function(){var b=this;a.show(b.getContainer()),a.hide(b.id),b.load()},hide:function(){var b=this,c=b.getDoc();g&&c&&c.execCommand("SelectAll"),b.save(),a.hide(b.getContainer()),a.setStyle(b.id,"display",b.orgDisplay)},isHidden:function(){return!a.isHidden(this.id)},setProgressState:function(a,b,c){return this.onSetProgressState.dispatch(this,a,b,c),a},resizeToContent:function(){var b=this;a.setStyle(b.id+"_ifr","height",b.getBody().scrollHeight)},load:function(a){var b,c=this,d=c.getElement();return d?(a=a||{},a.load=!0,b=c.setContent(i(d.value)?d.value:d.innerHTML,a),a.element=d,a.no_events||c.onLoadContent.dispatch(c,a),a.element=d=null,b):void 0},save:function(b){var c,d,f=this,g=f.getElement();if(g&&f.initialized)return b=b||{},b.save=!0,b.no_events||(f.undoManager.typing=0,f.undoManager.add()),b.element=g,c=b.content=f.getContent(b),b.no_events||f.onSaveContent.dispatch(f,b),c=b.content,/TEXTAREA|INPUT/i.test(g.nodeName)?g.value=c:(g.innerHTML=c,(d=a.getParent(f.id,"form"))&&e(d.elements,function(a){return a.name==f.id?(a.value=c,!1):void 0})),b.element=g=null,c},setContent:function(a,b){var c=this;return b=b||{},b.format=b.format||"html",b.set=!0,b.content=a,b.no_events||c.onBeforeSetContent.dispatch(c,b),tinymce.isIE||0!==a.length&&!/^\s+$/.test(a)||(b.content=c.dom.setHTML(c.getBody(),'<br mce_bogus="1" />'),b.format="raw"),b.content=c.dom.setHTML(c.getBody(),tinymce.trim(b.content)),"raw"!=b.format&&c.settings.cleanup&&(b.getInner=!0,b.content=c.dom.setHTML(c.getBody(),c.serializer.serialize(c.getBody(),b))),b.no_events||c.onSetContent.dispatch(c,b),b.content},getContent:function(a){var b,c=this;return a=a||{},a.format=a.format||"html",a.get=!0,a.no_events||c.onBeforeGetContent.dispatch(c,a),"raw"!=a.format&&c.settings.cleanup?(a.getInner=!0,b=c.serializer.serialize(c.getBody(),a)):b=c.getBody().innerHTML,b=b.replace(/^\s*|\s*$/g,""),a.content=b,a.no_events||c.onGetContent.dispatch(c,a),a.content},isDirty:function(){var a=this;return tinymce.trim(a.startContent)!=tinymce.trim(a.getContent({format:"raw",no_events:1}))&&!a.isNotDirty},getContainer:function(){var b=this;return b.container||(b.container=a.get(b.editorContainer||b.id+"_parent")),b.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return a.get(this.settings.content_element||this.id)},getWin:function(){var b,c=this;return c.contentWindow||(b=a.get(c.id+"_ifr"),b&&(c.contentWindow=b.contentWindow)),c.contentWindow},getDoc:function(){var a,b=this;return b.contentDocument||(a=b.getWin(),a&&(b.contentDocument=a.document)),b.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(a,b,c){var d=this,e=d.settings;return e.urlconverter_callback?d.execCallback("urlconverter_callback",a,c,!0,b):!e.convert_urls||c&&"LINK"==c.nodeName||0===a.indexOf("file:")?a:e.relative_urls?d.documentBaseURI.toRelative(a):a=d.documentBaseURI.toAbsolute(a,e.remove_script_host)},addVisual:function(a){var b=this,c=b.settings;a=a||b.getBody(),i(b.hasVisual)||(b.hasVisual=c.visual),e(b.dom.select("table,a",a),function(a){var d;switch(a.nodeName){case"TABLE":return d=b.dom.getAttrib(a,"border"),void(d&&"0"!=d||(b.hasVisual?b.dom.addClass(a,c.visual_table_class):b.dom.removeClass(a,c.visual_table_class)));case"A":return d=b.dom.getAttrib(a,"name"),void(d&&(b.hasVisual?b.dom.addClass(a,"mceItemAnchor"):b.dom.removeClass(a,"mceItemAnchor")))}}),b.onVisualAid.dispatch(b,a,b.hasVisual)},remove:function(){var b=this,c=b.getContainer();b.removed=1,b.hide(),b.execCallback("remove_instance_callback",b),b.onRemove.dispatch(b),b.onExecCommand.listeners=[],l.remove(b),a.remove(c)},destroy:function(a){var c=this;c.destroyed||(a||(tinymce.removeUnload(c.destroy),tinyMCE.onBeforeUnload.remove(c._beforeUnload),c.theme.destroy&&c.theme.destroy(),c.controlManager.destroy(),c.selection.destroy(),c.dom.destroy(),c.settings.content_editable||(b.clear(c.getWin()),b.clear(c.getDoc())),b.clear(c.getBody()),b.clear(c.formElement)),c.formElement&&(c.formElement.submit=c.formElement._mceOldSubmit,c.formElement._mceOldSubmit=null),c.contentAreaContainer=c.formElement=c.container=c.settings.content_element=c.bodyElement=c.contentDocument=c.contentWindow=null,c.selection&&(c.selection=c.selection.win=c.selection.dom=c.selection.dom.doc=null),c.destroyed=1)},_addEvents:function(){function c(a,b){a.type;n.removed||n.onEvent.dispatch(n,a,b)!==!1&&n[p[a.fakeType||a.type]].dispatch(n,a,b)}function d(){var a=this,b=a.getDoc(),c=a.settings;if(f&&!c.readonly){if(a._isHidden())try{c.content_editable||(b.designMode="On")}catch(d){}try{b.execCommand("styleWithCSS",0,!1)}catch(d){if(!a._isHidden())try{b.execCommand("useCSS",0,!0)}catch(d){}}if(!c.table_inline_editing)try{b.execCommand("enableInlineTableEditing",!1,!1)}catch(d){}if(!c.object_resizing)try{b.execCommand("enableObjectResizing",!1,!1)}catch(d){}}}function g(a,c){return 9===c.keyCode?b.cancel(c):void 0}function h(c,d){function f(b){if(i=a.getParent(c.id,"form"),j=i.elements,i)if(e(j,function(a,b){return a.id==c.id?(g=b,!1):void 0}),b>0){for(h=g+1;h<j.length;h++)if("hidden"!=j[h].type)return j[h]}else for(h=g-1;h>=0;h--)if("hidden"!=j[h].type)return j[h];return null}var g,h,i,j,k;return 9===d.keyCode&&(k=m(c.getParam("tab_focus")),1==k.length&&(k[1]=k[0],k[0]=":prev"),j=d.shiftKey?":prev"==k[0]?f(-1):a.get(k[0]):":next"==k[1]?f(1):a.get(k[1]))?((c=l.get(j.id||j.name))?c.focus():window.setTimeout(function(){window.focus(),j.focus()},10),b.cancel(d)):void 0}function i(a){var b=null;return a.altKey||a.ctrlKey||a.metaKey?(e(n.shortcuts,function(c){return tinymce.isMac&&c.ctrl!=a.metaKey||!tinymce.isMac&&c.ctrl!=a.ctrlKey||c.alt!=a.altKey||c.shift!=a.shiftKey?void 0:a.keyCode==c.keyCode||a.charCode&&a.charCode==c.charCode?(b=c,!1):void 0}),b):b}function j(){n.undoManager.typing=0,n.undoManager.add()}var k,n=this,o=n.settings,p={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};if(e(p,function(d,e){switch(e){case"contextmenu":tinymce.isOpera?b.add(n.getBody(),"mousedown",function(a){a.ctrlKey&&(a.fakeType="contextmenu",c(a))}):b.add(n.getBody(),e,c);break;case"paste":b.add(n.getBody(),e,function(a){var b,d;a.clipboardData?b=a.clipboardData.getData("text/plain"):tinymce.isIE&&(b=n.getWin().clipboardData.getData("Text")),c(a,{text:b,html:d})});break;case"submit":case"reset":b.add(n.getElement().form||a.getParent(n.id,"form"),e,c);break;default:b.add(o.content_editable?n.getBody():n.getDoc(),e,c)}}),b.add(o.content_editable?n.getBody():f?n.getDoc():n.getWin(),"focus",function(a){n.focus(!0)}),tinymce.isGecko&&b.add(n.getDoc(),"DOMNodeInserted",function(a){var b;a=a.target,1===a.nodeType&&"IMG"===a.nodeName&&(b=a.getAttribute("mce_src"))&&(a.src=n.documentBaseURI.toAbsolute(b))}),f&&(n.onBeforeExecCommand.add(d),n.onMouseDown.add(d)),n.onMouseUp.add(n.nodeChanged),n.onClick.add(n.nodeChanged),n.onKeyUp.add(function(a,b){var c=b.keyCode;(c>=33&&36>=c||c>=37&&40>=c||13==c||45==c||46==c||8==c||tinymce.isMac&&(91==c||93==c)||b.ctrlKey)&&n.nodeChanged()}),n.onReset.add(function(){n.setContent(n.startContent,{format:"raw"})}),n.getParam("tab_focus")&&(n.onKeyUp.add(g),f?(n.onKeyPress.add(h),n.onKeyDown.add(g)):n.onKeyDown.add(h)),o.custom_shortcuts){for(o.custom_undo_redo_keyboard_shortcuts&&(n.addShortcut("ctrl+z",n.getLang("undo_desc"),"Undo"),n.addShortcut("ctrl+y",n.getLang("redo_desc"),"Redo")),f&&(n.addShortcut("ctrl+b",n.getLang("bold_desc"),"Bold"),n.addShortcut("ctrl+i",n.getLang("italic_desc"),"Italic"),n.addShortcut("ctrl+u",n.getLang("underline_desc"),"Underline")),k=1;6>=k;k++)n.addShortcut("ctrl+"+k,"",["FormatBlock",!1,"<h"+k+">"]);n.addShortcut("ctrl+7","",["FormatBlock",!1,"<p>"]),n.addShortcut("ctrl+8","",["FormatBlock",!1,"<div>"]),n.addShortcut("ctrl+9","",["FormatBlock",!1,"<address>"]),n.onKeyUp.add(function(a,c){var d=i(c);return d?b.cancel(c):void 0}),n.onKeyPress.add(function(a,c){var d=i(c);return d?b.cancel(c):void 0}),n.onKeyDown.add(function(a,c){var d=i(c);return d?(d.func.call(d.scope),b.cancel(c)):void 0})}tinymce.isIE&&(b.add(n.getDoc(),"controlselect",function(a){var c,d=n.resizeInfo;a=a.target,"IMG"===a.nodeName&&(d&&b.remove(d.node,d.ev,d.cb),n.dom.hasClass(a,"mceItemNoResize")?(ev="resizestart",c=b.add(a,"resizestart",b.cancel,b)):(ev="resizeend",c=b.add(a,ev,function(a){var b;a=a.target,(b=n.dom.getStyle(a,"width"))&&(n.dom.setAttrib(a,"width",b.replace(/[^0-9%]+/g,"")),n.dom.setStyle(a,"width","")),(b=n.dom.getStyle(a,"height"))&&(n.dom.setAttrib(a,"height",b.replace(/[^0-9%]+/g,"")),n.dom.setStyle(a,"height",""))})),d=n.resizeInfo={node:a,ev:ev,cb:c})}),n.onKeyDown.add(function(a,c){switch(c.keyCode){case 8:if(n.selection.getRng().item)return n.selection.getRng().item(0).removeNode(),b.cancel(c)}})),tinymce.isOpera&&n.onClick.add(function(a,c){b.prevent(c)}),o.custom_undo_redo&&(tinymce.isIE?b.add(n.getWin(),"blur",function(a){var b;n.selection&&(b=n.selection.getNode(),!n.removed&&b.ownerDocument&&b.ownerDocument!=n.getDoc()&&j())}):b.add(n.getDoc(),"blur",function(){n.selection&&!n.removed&&j()}),n.onMouseDown.add(j),n.onKeyUp.add(function(a,b){(b.keyCode>=33&&b.keyCode<=36||b.keyCode>=37&&b.keyCode<=40||13==b.keyCode||45==b.keyCode||b.ctrlKey)&&(n.undoManager.typing=0,n.undoManager.add())}),n.onKeyDown.add(function(a,b){return b.keyCode>=33&&b.keyCode<=36||b.keyCode>=37&&b.keyCode<=40||13==b.keyCode||45==b.keyCode?void(n.undoManager.typing&&(n.undoManager.add(),n.undoManager.typing=0)):void(n.undoManager.typing||(n.undoManager.add(),n.undoManager.typing=1))}))},_convertInlineElements:function(){function a(a,i){g.inline_styles&&(i.get?e(f.dom.select("table,u,strike",i.node),function(a){switch(a.nodeName){case"TABLE":(b=h.getAttrib(a,"height"))&&(h.setStyle(a,"height",b),h.setAttrib(a,"height",""));break;case"U":case"STRIKE":a.style.textDecoration="U"==a.nodeName?"underline":"line-through",h.setAttrib(a,"mce_style",""),h.setAttrib(a,"mce_name","span")}}):i.set&&e(f.dom.select("table,span",i.node).reverse(),function(a){"TABLE"==a.nodeName?(b=h.getStyle(a,"height"))&&h.setAttrib(a,"height",b.replace(/[^0-9%]+/g,"")):(d="underline"==a.style.textDecoration?"u":"line-through"==a.style.textDecoration?"strike":"",d&&(a.style.textDecoration="",h.setAttrib(a,"mce_style",""),c=h.create(d,{style:h.getAttrib(a,"style")}),h.replace(c,a,1)))}))}var b,c,d,f=this,g=f.settings,h=f.dom;f.onPreProcess.add(a),g.cleanup_on_startup||f.onSetContent.add(function(b,c){c.initial&&a(f,{node:f.getBody(),set:1})})},_convertFonts:function(){function a(a){var b,c,i,j;if(g.inline_styles)for(i=f.dom.select("font",a),j=i.length-1;j>=0;j--)b=i[j],c=h.create("span",{style:h.getAttrib(b,"style"),"class":h.getAttrib(b,"class")}),h.setStyles(c,{fontFamily:h.getAttrib(b,"face"),color:h.getAttrib(b,"color"),backgroundColor:b.style.backgroundColor}),b.size&&(d?h.setStyle(c,"fontSize",d[parseInt(b.size)-1]):h.setAttrib(c,"class",e[parseInt(b.size)-1])),h.setAttrib(c,"mce_style",""),h.replace(c,b,1)}var b,c,d,e,f=this,g=f.settings,h=f.dom;g.inline_styles&&(b=[8,10,12,14,18,24,36],c=["xx-small","x-small","small","medium","large","x-large","xx-large"],(d=g.font_size_style_values)&&(d=m(d)),(e=g.font_size_classes)&&(e=m(e)),f.onPreProcess.add(function(b,c){c.get&&a(c.node)}),f.onSetContent.add(function(b,c){c.initial&&a(c.node)}))},_isHidden:function(){var a;return f?(a=this.selection.getSel(),!a||!a.rangeCount||0==a.rangeCount):0},_fixNesting:function(a){var b,c=[];for(a=a.replace(/<(\/)?([^\s>]+)[^>]*?>/g,function(a,d,e){if("/"===d){if(!c.length)return"";if(e!==c[c.length-1].tag){for(b=c.length-1;b>=0;b--)if(c[b].tag===e){c[b].close=1;break}return""}c.pop(),c.length&&c[c.length-1].close&&(a=a+"</"+c[c.length-1].tag+">",c.pop())}else{if(/^(br|hr|input|meta|img|link|param)$/i.test(e))return a;if(/\/>$/.test(a))return a;c.push({tag:e})}return a}),b=c.length-1;b>=0;b--)a+="</"+c[b].tag+">";return a}})}(),function(){function a(a){return/^(H[1-6]|HR|P|DIV|ADDRESS|PRE|FORM|TABLE|OL|UL|TD|CAPTION|BLOCKQUOTE|CENTER|DL|DT|DD|DIR|FIELDSET|NOSCRIPT|NOFRAMES|MENU|ISINDEX|SAMP)$/.test(a.nodeName)}var b=tinymce.each,c=tinymce.isIE,d=tinymce.isGecko,e=tinymce.isOpera,f=tinymce.isWebKit;tinymce.create("tinymce.EditorCommands",{EditorCommands:function(a){this.editor=a},execCommand:function(a,b,c){var e,f=this,g=f.editor;switch(a){case"Cut":case"Copy":case"Paste":try{g.getDoc().execCommand(a,b,c)}catch(h){d?g.windowManager.confirm(g.getLang("clipboard_msg"),function(a){a&&window.open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","mceExternal")}):g.windowManager.alert(g.getLang("clipboard_no_support"))}return!0;case"mceResetDesignMode":case"mceBeginUndoLevel":return!0;case"unlink":return f.UnLink(),!0;case"JustifyLeft":case"JustifyCenter":case"JustifyRight":case"JustifyFull":return f.mceJustify(a,a.substring(7).toLowerCase()),!0;case"mceEndUndoLevel":case"mceAddUndoLevel":return g.undoManager.add(),!0;default:if(e=this[a])return e.call(this,b,c),!0}return!1},Indent:function(){var a,d,e=this.editor,f=e.dom,g=e.selection;return a=e.settings.indentation,d=/[a-z%]+$/i.exec(a),a=parseInt(a),!e.settings.inline_styles||this.queryStateInsertUnorderedList()||this.queryStateInsertOrderedList()?(e.getDoc().execCommand("Indent",!1,null),void(c&&f.getParent(g.getNode(),function(a){"BLOCKQUOTE"==a.nodeName&&(a.dir=a.style.cssText="")}))):void b(this._getSelectedBlocks(),function(b){f.setStyle(b,"paddingLeft",parseInt(b.style.paddingLeft||0)+a+d)})},Outdent:function(){var a,c,d,e=this.editor,f=e.dom;e.selection;return c=e.settings.indentation,d=/[a-z%]+$/i.exec(c),c=parseInt(c),!e.settings.inline_styles||this.queryStateInsertUnorderedList()||this.queryStateInsertOrderedList()?void e.getDoc().execCommand("Outdent",!1,null):void b(this._getSelectedBlocks(),function(b){a=Math.max(0,parseInt(b.style.paddingLeft||0)-c),f.setStyle(b,"paddingLeft",a?a+d:"")})},mceSetAttribute:function(a,b){var c,d=this.editor,e=d.dom;(c=e.getParent(d.selection.getNode(),e.isBlock))&&e.setAttrib(c,b.name,b.value)},mceSetContent:function(a,b){this.editor.setContent(b)},mceToggleVisualAid:function(){var a=this.editor;a.hasVisual=!a.hasVisual,a.addVisual()},mceReplaceContent:function(a,b){var c=this.editor.selection;c.setContent(b.replace(/\{\$selection\}/g,c.getContent({format:"text"})))},mceInsertLink:function(a,c){function d(a){b(c,function(b,c){e.dom.setAttrib(a,c,b)})}var e=this.editor,f=e.selection,g=e.dom.getParent(f.getNode(),"A");tinymce.is(c,"string")&&(c={href:c}),g?c.href?d(g):e.dom.remove(g,1):(e.execCommand("CreateLink",!1,"javascript:mctmp(0);"),b(e.dom.select("a"),function(a){"javascript:mctmp(0);"==a.href&&d(a)}))},UnLink:function(){var a=this.editor,b=a.selection;b.isCollapsed()&&b.select(b.getNode()),a.getDoc().execCommand("unlink",!1,null),b.collapse(0)},FontName:function(a,b){var c=this,d=c.editor,e=d.selection;b?d.settings.convert_fonts_to_spans?c._applyInlineStyle("span",{style:{fontFamily:b}}):d.getDoc().execCommand("FontName",!1,b):(e.isCollapsed()&&e.select(e.getNode()),c.RemoveFormat())},FontSize:function(a,b){var c,d,e=this.editor,f=e.settings;f.convert_fonts_to_spans&&b>=1&&7>=b&&(d=tinymce.explode(f.font_size_style_values),c=tinymce.explode(f.font_size_classes),b=c?c[b-1]||b:d[b-1]||b),b>=1&&7>=b?e.getDoc().execCommand("FontSize",!1,b):this._applyInlineStyle("span",{style:{fontSize:b}})},queryCommandValue:function(a){var b=this["queryValue"+a];return b?b.call(this,a):!1},queryCommandState:function(a){var b;switch(a){case"JustifyLeft":case"JustifyCenter":case"JustifyRight":case"JustifyFull":return this.queryStateJustify(a,a.substring(7).toLowerCase());default:if(b=this["queryState"+a])return b.call(this,a)}return-1},_queryState:function(a){try{return this.editor.getDoc().queryCommandState(a)}catch(b){}},_queryVal:function(a){try{return this.editor.getDoc().queryCommandValue(a)}catch(b){}},queryValueFontSize:function(){var a,b=this.editor,c=0;return(a=b.dom.getParent(b.selection.getNode(),"SPAN"))&&(c=a.style.fontSize),c||!e&&!f?c||this._queryVal("FontSize"):((a=b.dom.getParent(b.selection.getNode(),"FONT"))&&(c=a.size),c)},queryValueFontName:function(){var a,b=this.editor,c=0;return(a=b.dom.getParent(b.selection.getNode(),"FONT"))&&(c=a.face),(a=b.dom.getParent(b.selection.getNode(),"SPAN"))&&(c=a.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),c||(c=this._queryVal("FontName")),c},mceJustify:function(a,c){var d,e,f,g=this.editor,h=g.selection,i=h.getNode(),j=i.nodeName,k=g.dom;if(g.settings.inline_styles&&this.queryStateJustify(a,c)&&(f=1),d=k.getParent(i,g.dom.isBlock),"IMG"==j){if("full"==c)return;return f?("center"==c&&k.setStyle(d||i.parentNode,"textAlign",""),k.setStyle(i,"float",""),void this.mceRepaint()):("center"==c?(d&&/^(TD|TH)$/.test(d.nodeName)&&(d=0),(!d||d.childNodes.length>1)&&(e=k.create("p"),e.appendChild(i.cloneNode(!1)),d?k.insertAfter(e,d):k.insertAfter(e,i),k.remove(i),i=e.firstChild,d=e),k.setStyle(d,"textAlign",c),k.setStyle(i,"float","")):(k.setStyle(i,"float",c),k.setStyle(d||i.parentNode,"textAlign","")),void this.mceRepaint())}if(g.settings.inline_styles&&g.settings.forced_root_block)return f&&(c=""),void b(this._getSelectedBlocks(k.getParent(h.getStart(),k.isBlock),k.getParent(h.getEnd(),k.isBlock)),function(a){k.setAttrib(a,"align",""),k.setStyle(a,"textAlign","full"==c?"justify":c)});if(f||g.getDoc().execCommand(a,!1,null),g.settings.inline_styles){if(f)return void k.getParent(g.selection.getNode(),function(a){a.style&&a.style.textAlign&&k.setStyle(a,"textAlign","")});b(k.select("*"),function(a){var b=a.align;b&&("full"==b&&(b="justify"),k.setStyle(a,"textAlign",b),k.setAttrib(a,"align",""))})}},mceSetCSSClass:function(a,b){this.mceSetStyleInfo(0,{command:"setattrib",name:"class",value:b})},getSelectedElement:function(){function a(a){return o.getParent(a,function(a){return 1==a.nodeType})}var b,d,e,f,g,h,i,j,k,l,m=this,n=m.editor,o=n.dom,p=n.selection,q=p.getRng();if(p.isCollapsed()||q.item)return p.getNode();if(l=n.settings.merge_styles_invalid_parents,tinymce.is(l,"string")&&(l=new RegExp(l,"i")),c){if(b=q.duplicate(),b.collapse(!0),e=b.parentElement(),d=q.duplicate(),d.collapse(!1),f=d.parentElement(),e!=f&&(b.move("character",1),e=b.parentElement()),e==f&&(b=q.duplicate(),b.moveToElementText(e),0==b.compareEndPoints("StartToStart",q)&&0==b.compareEndPoints("EndToEnd",q)))return l&&l.test(e.nodeName)?null:e}else{if(e=q.startContainer,f=q.endContainer,g=q.startOffset,h=q.endOffset,!q.collapsed&&e==f&&2>g-h&&e.hasChildNodes())return j=e.childNodes[g],l&&l.test(j.nodeName)?null:j;if(3!=e.nodeType||3!=f.nodeType)return null;if(0==g&&(j=a(e),j&&j.firstChild!=e&&(j=null)),g==e.nodeValue.length&&(i=e.nextSibling,i&&1==i.nodeType&&(j=e.nextSibling)),0==h&&(i=f.previousSibling,i&&1==i.nodeType&&(k=i)),h==f.nodeValue.length&&(k=a(f),k&&k.lastChild!=f&&(k=null)),j==k)return l&&j&&l.test(j.nodeName)?null:j}return null},InsertHorizontalRule:function(){d||c?this.editor.selection.setContent("<hr />"):this.editor.getDoc().execCommand("InsertHorizontalRule",!1,"")},RemoveFormat:function(){var a=this,b=a.editor,c=b.selection;f?c.setContent(c.getContent({format:"raw"}).replace(/(<(span|b|i|strong|em|strike) [^>]+>|<(span|b|i|strong|em|strike)>|<\/(span|b|i|strong|em|strike)>|)/g,""),{format:"raw"}):b.getDoc().execCommand("RemoveFormat",!1,null),a.mceSetStyleInfo(0,{command:"removeformat"}),b.addVisual()},mceSetStyleInfo:function(a,c){function d(a,b){if(1==a.nodeType)switch(c.command){case"setattrib":return l.setAttrib(a,c.name,c.value);case"setstyle":return l.setStyle(a,c.name,c.value);case"removeformat":return l.setAttrib(a,"class","")}}var e,g,h,i=this,j=i.editor,k=j.getDoc(),l=j.dom,m=j.selection,n=c.wrapper||"span",g=m.getBookmark();h=j.settings.merge_styles_invalid_parents,tinymce.is(h,"string")&&(h=new RegExp(h,"i")),(e=i.getSelectedElement())&&!j.settings.force_span_wrappers?d(e,1):(k.execCommand("FontName",!1,"__"),b(f?l.select("span"):l.select("font"),function(a){var c;("__"==l.getAttrib(a,"face")||"__"===a.style.fontFamily)&&(c=l.create(n,{mce_new:"1"}),d(c),b(a.childNodes,function(a){c.appendChild(a.cloneNode(!0))}),l.replace(c,a))})),b(l.select(n).reverse(),function(a){var b=a.parentNode;l.getAttrib(a,"mce_new")||(b=l.getParent(a,function(a){return 1==a.nodeType&&l.getAttrib(a,"mce_new")}),b&&l.remove(a,1))}),b(l.select(n).reverse(),function(a){var b=a.parentNode;if(b&&l.getAttrib(a,"mce_new")&&(!j.settings.force_span_wrappers||"SPAN"==b.nodeName))return b.nodeName==n.toUpperCase()&&1==b.childNodes.length?l.remove(b,1):void(1!=a.nodeType||h&&h.test(b.nodeName)||1!=b.childNodes.length||(d(b),l.setAttrib(a,"class","")))}),b(l.select(n).reverse(),function(a){if(l.getAttrib(a,"mce_new")||l.getAttribs(a).length<=1&&""===a.className){if(!l.getAttrib(a,"class")&&!l.getAttrib(a,"style"))return l.remove(a,1);l.setAttrib(a,"mce_new","")}}),m.moveToBookmark(g)},queryStateJustify:function(a,b){var c=this.editor,d=c.selection.getNode(),e=c.dom;return d&&"IMG"==d.nodeName?e.getStyle(d,"float")==b?1:d.parentNode.style.textAlign==b:(d=e.getParent(c.selection.getStart(),function(a){return 1==a.nodeType&&a.style.textAlign}),"full"==b&&(b="justify"),c.settings.inline_styles?d&&d.style.textAlign==b:this._queryState(a))},ForeColor:function(a,b){var c=this.editor;return c.settings.convert_fonts_to_spans?void this._applyInlineStyle("span",{style:{color:b}}):void c.getDoc().execCommand("ForeColor",!1,b)},HiliteColor:function(a,b){function c(a){if(d)try{h.execCommand("styleWithCSS",0,a)}catch(b){h.execCommand("useCSS",0,!a)}}var f=this,g=f.editor,h=g.getDoc();return g.settings.convert_fonts_to_spans?void this._applyInlineStyle("span",{style:{backgroundColor:b}}):void(d||e?(c(!0),h.execCommand("hilitecolor",!1,b),c(!1)):h.execCommand("BackColor",!1,b))},Undo:function(){var a=this.editor;a.settings.custom_undo_redo?(a.undoManager.undo(),a.nodeChanged()):a.getDoc().execCommand("Undo",!1,null)},Redo:function(){var a=this.editor;a.settings.custom_undo_redo?(a.undoManager.redo(),a.nodeChanged()):a.getDoc().execCommand("Redo",!1,null)},FormatBlock:function(a,d){function e(a){return/^(P|DIV|H[1-6]|ADDRESS|BLOCKQUOTE|PRE)$/.test(a.nodeName)}var f,g,h,i=this,j=i.editor,k=j.selection,l=j.dom;return f=l.getParent(k.getNode(),function(a){return e(a)}),f&&(c&&e(f.parentNode)||"DIV"==f.nodeName)?(g=j.dom.create(d),b(l.getAttribs(f),function(a){l.setAttrib(g,a.nodeName,l.getAttrib(f,a.nodeName))}),h=k.getBookmark(),l.replace(g,f,1),k.moveToBookmark(h),void j.nodeChanged()):(d=j.settings.forced_root_block?d||"<p>":d,-1==d.indexOf("<")&&(d="<"+d+">"),tinymce.isGecko&&(d=d.replace(/<(div|blockquote|code|dt|dd|dl|samp)>/gi,"$1")),void j.getDoc().execCommand("FormatBlock",!1,d))},mceCleanup:function(){var a=this.editor,b=a.selection,c=b.getBookmark();a.setContent(a.getContent()),b.moveToBookmark(c)},mceRemoveNode:function(a,b){var c,d=this.editor,e=d.selection,f=b||e.getNode();f!=d.getBody()&&(c=e.getBookmark(),d.dom.remove(f,1),e.moveToBookmark(c),d.nodeChanged())},mceSelectNodeDepth:function(a,b){var c=this.editor,d=c.selection,e=0;c.dom.getParent(d.getNode(),function(a){return 1==a.nodeType&&e++==b?(d.select(a),c.nodeChanged(),!1):void 0},c.getBody())},mceSelectNode:function(a,b){this.editor.selection.select(b)},mceInsertContent:function(a,b){this.editor.selection.setContent(b)},mceInsertRawHTML:function(a,b){var c=this.editor;c.selection.setContent("tiny_mce_marker"),c.setContent(c.getContent().replace(/tiny_mce_marker/g,b))},mceRepaint:function(){var a,b,c=this.editor;if(tinymce.isGecko)try{a=c.selection,b=a.getBookmark(!0),a.getSel()&&a.getSel().selectAllChildren(c.getBody()),a.collapse(!0),a.moveToBookmark(b)}catch(d){}},queryStateUnderline:function(){var a=this.editor,b=a.selection.getNode();return b&&"A"==b.nodeName?!1:this._queryState("Underline")},queryStateOutdent:function(){var a,b=this.editor;if(b.settings.inline_styles){if((a=b.dom.getParent(b.selection.getStart(),b.dom.isBlock))&&parseInt(a.style.paddingLeft)>0)return!0;if((a=b.dom.getParent(b.selection.getEnd(),b.dom.isBlock))&&parseInt(a.style.paddingLeft)>0)return!0}return this.queryStateInsertUnorderedList()||this.queryStateInsertOrderedList()||!b.settings.inline_styles&&!!b.dom.getParent(b.selection.getNode(),"BLOCKQUOTE")},queryStateInsertUnorderedList:function(){return this.editor.dom.getParent(this.editor.selection.getNode(),"UL")},queryStateInsertOrderedList:function(){return this.editor.dom.getParent(this.editor.selection.getNode(),"OL");
},queryStatemceBlockQuote:function(){return!!this.editor.dom.getParent(this.editor.selection.getStart(),function(a){return"BLOCKQUOTE"===a.nodeName})},mceBlockQuote:function(){function d(a){return q.getParent(a,function(a){return"BLOCKQUOTE"===a.nodeName})}var e,f,g,h,i,j,k,l,m,n=this,o=n.editor,p=o.selection,q=o.dom;if(e=q.getParent(p.getStart(),a),f=q.getParent(p.getEnd(),a),i=d(e)){if((e!=f||e.childNodes.length>1||1==e.childNodes.length&&"BR"!=e.firstChild.nodeName)&&(h=p.getBookmark()),d(f))for(k=i.cloneNode(!1);g=f.nextSibling;)k.appendChild(g.parentNode.removeChild(g));for(k&&q.insertAfter(k,i),m=n._getSelectedBlocks(e,f),l=m.length-1;l>=0;l--)q.insertAfter(m[l],i);return/^\s*$/.test(i.innerHTML)&&q.remove(i,1),k&&/^\s*$/.test(k.innerHTML)&&q.remove(k,1),void(h?n.editor.selection.moveToBookmark(h):c?(p.select(e),p.collapse(0),q.getParent(p.getStart(),a)!=e&&(j=p.getRng(),j.move("character",-1),j.select())):(j=o.getDoc().createRange(),j.setStart(e,0),j.setEnd(e,0),p.setRng(j)))}return!c||e||f?void(e&&f&&((e!=f||e.childNodes.length>1||1==e.childNodes.length&&"BR"!=e.firstChild.nodeName)&&(h=p.getBookmark()),b(n._getSelectedBlocks(d(p.getStart()),d(p.getEnd())),function(a){if("BLOCKQUOTE"==a.nodeName&&!i)return void(i=a);if(i||(i=q.create("blockquote"),a.parentNode.insertBefore(i,a)),"BLOCKQUOTE"==a.nodeName&&i){for(g=a.firstChild;g;)i.appendChild(g.cloneNode(!0)),g=g.nextSibling;return void q.remove(a)}i.appendChild(q.remove(a))}),h?p.moveToBookmark(h):c?(p.select(e),p.collapse(1)):(j=o.getDoc().createRange(),j.setStart(e,0),j.setEnd(e,0),p.setRng(j)))):(n.editor.getDoc().execCommand("Indent"),g=d(p.getNode()),void(g.style.margin=g.dir=""))},_applyInlineStyle:function(a,c,d){function e(){var e;return b(i.select(tinymce.isWebKit&&!tinymce.isAir?"span":"font"),function(b){("mceinline"==b.style.fontFamily||"mceinline"==b.face)&&(e||(e=h.selection.getBookmark()),c._mce_new="1",i.replace(i.create(a,c),b,1))}),b(i.select(a),function(e){function f(a){1==a.nodeType&&(b(c.style,function(b,c){i.setStyle(a,c,"")}),c["class"]&&a.className&&d&&b(d.check_classes,function(b){i.hasClass(a,b)&&i.removeClass(a,b)}))}e.getAttribute("_mce_new")&&(b(i.select(a,e),f),e.parentNode&&1==e.parentNode.nodeType&&1==e.parentNode.childNodes.length&&f(e.parentNode),i.getParent(e.parentNode,function(a){return 1==a.nodeType&&(c.style&&b(c.style,function(b,c){var d;!j[c]&&(d=i.getStyle(a,c))&&(d===b&&i.setStyle(e,c,""),j[c]=1)}),c["class"]&&a.className&&d&&b(d.check_classes,function(b){i.hasClass(a,b)&&i.removeClass(e,b)})),!1}),e.removeAttribute("_mce_new"))}),b(i.select(a).reverse(),function(a){var c=0;b(i.getAttribs(a),function(b){"_"!=b.nodeName.substring(0,1)&&""!=i.getAttrib(a,b.nodeName)&&c++}),0==c&&i.remove(a,1)}),h.selection.moveToBookmark(e),!!e}var f,g=this,h=g.editor,i=h.dom,j={};a=a.toUpperCase(),d&&d.check_classes&&c["class"]&&d.check_classes.push(c["class"]),h.focus(),h.getDoc().execCommand("FontName",!1,"mceinline"),e(),(f=g._applyInlineStyle.keyhandler)&&(h.onKeyUp.remove(f),h.onKeyPress.remove(f),h.onKeyDown.remove(f),h.onSetContent.remove(g._applyInlineStyle.chandler)),h.selection.isCollapsed()?(g._pendingStyles=tinymce.extend(g._pendingStyles||{},c.style),g._applyInlineStyle.chandler=h.onSetContent.add(function(){delete g._pendingStyles}),g._applyInlineStyle.keyhandler=f=function(a){g._pendingStyles&&(c.style=g._pendingStyles,delete g._pendingStyles),e()&&(h.onKeyDown.remove(g._applyInlineStyle.keyhandler),h.onKeyPress.remove(g._applyInlineStyle.keyhandler)),"keyup"==a.type&&h.onKeyUp.remove(g._applyInlineStyle.keyhandler)},h.onKeyDown.add(f),h.onKeyPress.add(f),h.onKeyUp.add(f)):g._pendingStyles=0},_getSelectedBlocks:function(b,c){var d,e,f,g=this.editor,h=g.dom,i=g.selection,j=[];if(d=h.getParent(b||i.getStart(),a),e=h.getParent(c||i.getEnd(),a),d&&j.push(d),d&&e&&d!=e)for(f=d;(f=f.nextSibling)&&f!=e;)a(f)&&j.push(f);return e&&d!=e&&j.push(e),j}})}(),tinymce.create("tinymce.UndoManager",{index:0,data:null,typing:0,UndoManager:function(a){var b=this,c=tinymce.util.Dispatcher;b.editor=a,b.data=[],b.onAdd=new c(this),b.onUndo=new c(this),b.onRedo=new c(this)},add:function(a){var b,c,d,e=this,f=e.editor,g=f.settings;if(a=a||{},a.content=a.content||f.getContent({format:"raw",no_events:1}),a.content=a.content.replace(/^\s*|\s*$/g,""),d=e.data[e.index>0&&(0==e.index||e.index==e.data.length)?e.index-1:e.index],!a.initial&&d&&a.content==d.content)return null;if(g.custom_undo_redo_levels&&e.data.length>g.custom_undo_redo_levels){for(b=0;b<e.data.length-1;b++)e.data[b]=e.data[b+1];e.data.length--,e.index=e.data.length}return g.custom_undo_redo_restore_selection&&!a.initial&&(a.bookmark=c=a.bookmark||f.selection.getBookmark()),e.index<e.data.length&&e.index++,0!==e.data.length||a.initial?(e.data.length=e.index+1,e.data[e.index++]=a,a.initial&&(e.index=0),2==e.data.length&&e.data[0].initial&&(e.data[0].bookmark=c),e.onAdd.dispatch(e,a),f.isNotDirty=0,a):null},undo:function(){var a,b=this,c=b.editor,d=d;return b.typing&&(b.add(),b.typing=0),b.index>0&&(b.index==b.data.length&&b.index>1&&(a=b.index,b.typing=0,b.add()||(b.index=a),--b.index),d=b.data[--b.index],c.setContent(d.content,{format:"raw"}),c.selection.moveToBookmark(d.bookmark),b.onUndo.dispatch(b,d)),d},redo:function(){var a=this,b=a.editor,c=null;return a.index<a.data.length-1&&(c=a.data[++a.index],b.setContent(c.content,{format:"raw"}),b.selection.moveToBookmark(c.bookmark),a.onRedo.dispatch(a,c)),c},clear:function(){var a=this;a.data=[],a.index=0,a.typing=0,a.add({initial:!0})},hasUndo:function(){return 0!=this.index||this.typing},hasRedo:function(){return this.index<this.data.length-1}}),function(){var a,b,c,d,e,f;a=tinymce.dom.Event,b=tinymce.isIE,c=tinymce.isGecko,d=tinymce.isOpera,e=tinymce.each,f=tinymce.extend,tinymce.create("tinymce.ForceBlocks",{ForceBlocks:function(a){function c(a,c){d&&(c.content=c.content.replace(f.reOpera,"</"+e+">")),c.content=c.content.replace(f.rePadd,"<"+e+"$1$2$3$4$5$6></"+e+">"),b||d||!c.set?(c.content=c.content.replace(f.reBR2Nbsp,"<"+e+"$1$2></"+e+">"),c.content=c.content.replace(f.reTrailBr,"</"+e+">")):(c.content=c.content.replace(f.reNbsp2BR1,"<"+e+"$1$2><br /></"+e+">"),c.content=c.content.replace(f.reNbsp2BR2,"<"+e+"$1$2><br /></"+e+">"))}var e,f=this,g=a.settings;f.editor=a,f.dom=a.dom,e=(g.forced_root_block||"p").toLowerCase(),g.element=e.toUpperCase(),a.onPreInit.add(f.setup,f),f.reOpera=new RegExp("(\\u00a0|&#160;|&nbsp;)</"+e+">","gi"),f.rePadd=new RegExp("<p( )([^>]+)><\\/p>|<p( )([^>]+)\\/>|<p( )([^>]+)>\\s+<\\/p>|<p><\\/p>|<p\\/>|<p>\\s+<\\/p>".replace(/p/g,e),"gi"),f.reNbsp2BR1=new RegExp("<p( )([^>]+)>[\\s\\u00a0]+<\\/p>|<p>[\\s\\u00a0]+<\\/p>".replace(/p/g,e),"gi"),f.reNbsp2BR2=new RegExp("<p( )([^>]+)>(&nbsp;|&#160;)<\\/p>|<p>(&nbsp;|&#160;)<\\/p>".replace(/p/g,e),"gi"),f.reBR2Nbsp=new RegExp("<p( )([^>]+)>\\s*<br \\/>\\s*<\\/p>|<p>\\s*<br \\/>\\s*<\\/p>".replace(/p/g,e),"gi"),f.reTrailBr=new RegExp("\\s*<br \\/>\\s*<\\/p>".replace(/p/g,e),"gi"),a.onBeforeSetContent.add(c),a.onPostProcess.add(c),g.forced_root_block&&(a.onInit.add(f.forceRoots,f),a.onSetContent.add(f.forceRoots,f),a.onBeforeGetContent.add(f.forceRoots,f))},setup:function(){function d(a,b){var c=g.dom.create(b);return e(a.attributes,function(a){a.specified&&a.nodeValue&&c.setAttribute(a.nodeName.toLowerCase(),a.nodeValue)}),e(a.childNodes,function(a){c.appendChild(a.cloneNode(!0))}),a.parentNode.replaceChild(c,a),c}var f=this,g=f.editor,h=g.settings;return h.forced_root_block&&(g.onKeyUp.add(f.forceRoots,f),g.onPreProcess.add(f.forceRoots,f)),h.force_br_newlines?void(b&&g.onKeyPress.add(function(b,c){var d,e=b.selection;return 13==c.keyCode&&"LI"!=e.getNode().nodeName?(e.setContent('<br id="__" /> ',{format:"raw"}),d=b.dom.get("__"),d.removeAttribute("id"),e.select(d),e.collapse(),a.cancel(c)):void 0})):(!b&&h.force_p_newlines&&(g.onKeyPress.add(function(b,c){13!=c.keyCode||c.shiftKey||f.insertPara(c)||a.cancel(c)}),c&&g.onKeyDown.add(function(a,b){8!=b.keyCode&&46!=b.keyCode||b.shiftKey||f.backspaceDelete(b,8==b.keyCode)})),void(b&&"P"!=h.element&&(g.onKeyPress.add(function(a,b){f.lastElm=a.selection.getNode().nodeName}),g.onKeyUp.add(function(a,b){var c,e=a.selection,g=e.getNode(),i=a.getBody();1===i.childNodes.length&&"P"==g.nodeName?(g=d(g,h.element),e.select(g),e.collapse(),a.nodeChanged()):13!=b.keyCode||b.shiftKey||"P"==f.lastElm||(c=a.dom.getParent(g,"P"),c&&(d(c,h.element),a.nodeChanged()))}))))},find:function(a,b,c){for(var d=this.editor,e=d.getDoc().createTreeWalker(a,4,null,!1),f=-1;a=e.nextNode();){if(f++,0==b&&a==c)return f;if(1==b&&f==c)return a}return-1},forceRoots:function(a,c){var d,e,f,g,h,i,j,k,l,m,n,o,p=this,a=p.editor,q=a.getBody(),r=a.getDoc(),s=a.selection,t=s.getSel(),u=s.getRng(),v=-2,w=-16777215,x=q.childNodes;for(m=x.length-1;m>=0;m--)h=x[m],3==h.nodeType||!p.dom.isBlock(h)&&8!=h.nodeType?i?i.hasChildNodes()?i.insertBefore(h,i.firstChild):i.appendChild(h):(3!=h.nodeType||/[^\s]/g.test(h.nodeValue))&&(-2==v&&u&&(b?(g=r.body.createTextRange(),g.moveToElementText(q),g.collapse(1),j=-1*g.move("character",w),g=u.duplicate(),g.collapse(1),k=-1*g.move("character",w),g=u.duplicate(),g.collapse(0),l=-1*g.move("character",w)-k,v=k-j,d=l):1==u.startContainer.nodeType&&(n=u.startContainer.childNodes[u.startOffset])&&1==n.nodeType?(o=n.getAttribute("id"),n.setAttribute("id","__mce")):a.dom.getParent(u.startContainer,function(a){return a===q})&&(e=u.startOffset,f=u.endOffset,v=p.find(q,0,u.startContainer),d=p.find(q,0,u.endContainer))),i=a.dom.create(a.settings.forced_root_block),i.appendChild(h.cloneNode(1)),h.parentNode.replaceChild(i,h)):i=null;if(-2!=v)if(b)try{u=t.createRange(),u.moveToElementText(q),u.collapse(1),u.moveStart("character",v),u.moveEnd("character",d),u.select()}catch(y){}else i=q.getElementsByTagName(a.settings.element)[0],u=r.createRange(),-1!=v?u.setStart(p.find(q,1,v),e):u.setStart(i,0),-1!=d?u.setEnd(p.find(q,1,d),f):u.setEnd(i,0),t&&(t.removeAllRanges(),t.addRange(u));else!b&&(n=a.dom.get("__mce"))&&(o?n.setAttribute("id",o):n.removeAttribute("id"),u=r.createRange(),u.setStartBefore(n),u.setEndBefore(n),s.setRng(u))},getParentBlock:function(a){var b=this.dom;return b.getParent(a,b.isBlock)},insertPara:function(a){function b(a){return a=a.innerHTML,a=a.replace(/<(img|hr|table)/gi,"-"),a=a.replace(/<[^>]+>/g,""),""==a.replace(/[ \t\r\n]+/g,"")}function e(a,b){var c,e,f,g=[];if(a.innerHTML="",C.keep_styles){e=b;do/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(e.nodeName)&&(c=e.cloneNode(!1),A.setAttrib(c,"id",""),g.push(c));while(e=e.parentNode)}if(g.length>0){for(f=g.length-1,c=a;f>=0;f--)c=c.appendChild(g[f]);return g[0].innerHTML=d?"&nbsp;":"<br />",g[0]}a.innerHTML=d?"&nbsp;":"<br />"}function f(a){return B.createTreeWalker(a,NodeFilter.SHOW_TEXT,null,!1).nextNode()||a}var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y=this,z=y.editor,A=z.dom,B=z.getDoc(),C=z.settings,D=z.selection.getSel(),E=D.getRangeAt(0),F=B.body,G=A.getViewPort(z.getWin());if(g=B.createRange(),g.setStart(D.anchorNode,D.anchorOffset),g.collapse(!0),h=B.createRange(),h.setStart(D.focusNode,D.focusOffset),h.collapse(!0),i=g.compareBoundaryPoints(g.START_TO_END,h)<0,j=i?D.anchorNode:D.focusNode,k=i?D.anchorOffset:D.focusOffset,l=i?D.focusNode:D.anchorNode,m=i?D.focusOffset:D.anchorOffset,j===l&&/^(TD|TH)$/.test(j.nodeName))return A.remove(j.firstChild),z.dom.add(j,C.element,null,"<br />"),r=z.dom.add(j,C.element,null,"<br />"),E=B.createRange(),E.selectNodeContents(r),E.collapse(1),z.selection.setRng(E),!1;if(j==F&&l==F&&F.firstChild&&z.dom.isBlock(F.firstChild)&&(j=l=j.firstChild,k=m=0,g=B.createRange(),g.setStart(j,0),h=B.createRange(),h.setStart(l,0)),j="HTML"==j.nodeName?B.body:j,j="BODY"==j.nodeName?j.firstChild:j,l="HTML"==l.nodeName?B.body:l,l="BODY"==l.nodeName?l.firstChild:l,n=y.getParentBlock(j),o=y.getParentBlock(l),p=n?n.nodeName:C.element,y.dom.getParent(n,function(a){return/OL|UL|PRE/.test(a.nodeName)}))return!0;n&&("CAPTION"==n.nodeName||/absolute|relative|static/gi.test(n.style.position))&&(p=C.element,n=null),o&&("CAPTION"==o.nodeName||/absolute|relative|static/gi.test(o.style.position))&&(p=C.element,o=null),(/(TD|TABLE|TH|CAPTION)/.test(p)||n&&"DIV"==p&&/left|right/gi.test(n.style.cssFloat))&&(p=C.element,n=o=null),q=n&&n.nodeName==p?n.cloneNode(0):z.dom.create(p),r=o&&o.nodeName==p?o.cloneNode(0):z.dom.create(p),r.removeAttribute("id"),/^(H[1-6])$/.test(p)&&j.nodeValue&&k==j.nodeValue.length&&(r=z.dom.create(C.element)),u=s=j;do{if(u==F||9==u.nodeType||y.dom.isBlock(u)||/(TD|TABLE|TH|CAPTION)/.test(u.nodeName))break;s=u}while(u=u.previousSibling?u.previousSibling:u.parentNode);u=t=l;do{if(u==F||9==u.nodeType||y.dom.isBlock(u)||/(TD|TABLE|TH|CAPTION)/.test(u.nodeName))break;t=u}while(u=u.nextSibling?u.nextSibling:u.parentNode);s.nodeName==p?g.setStart(s,0):g.setStartBefore(s),g.setEnd(j,k),q.appendChild(g.cloneContents()||B.createTextNode(""));try{h.setEndAfter(t)}catch(H){}return h.setStart(l,m),r.appendChild(h.cloneContents()||B.createTextNode("")),E=B.createRange(),s.previousSibling||s.parentNode.nodeName!=p?g.startContainer.nodeName==p&&0==g.startOffset?E.setStartBefore(g.startContainer):E.setStart(g.startContainer,g.startOffset):E.setStartBefore(s.parentNode),t.nextSibling||t.parentNode.nodeName!=p?E.setEnd(h.endContainer,h.endOffset):E.setEndAfter(t.parentNode),E.deleteContents(),d&&z.getWin().scrollTo(0,G.y),q.firstChild&&q.firstChild.nodeName==p&&(q.innerHTML=q.firstChild.innerHTML),r.firstChild&&r.firstChild.nodeName==p&&(r.innerHTML=r.firstChild.innerHTML),b(q)&&(q.innerHTML="<br />"),b(r)&&(x=e(r,l)),d&&parseFloat(opera.version())<9.5?(E.insertNode(q),E.insertNode(r)):(E.insertNode(r),E.insertNode(q)),r.normalize(),q.normalize(),E=B.createRange(),E.selectNodeContents(c?f(x||r):x||r),E.collapse(1),D.removeAllRanges(),D.addRange(E),v=z.dom.getPos(r).y,w=r.clientHeight,(v<G.y||v+w>G.y+G.h)&&z.getWin().scrollTo(0,v<G.y?v:v-G.h+25),!1},backspaceDelete:function(b,c){function d(b){var c;if(b=b.target,b&&b.parentNode&&"BR"==b.nodeName&&(e=h.getParentBlock(b))){if(c=b.previousSibling,a.remove(j,"DOMNodeInserted",d),c&&3==c.nodeType&&/\s+$/.test(c.nodeValue))return;(b.previousSibling||b.nextSibling)&&i.dom.remove(b)}}var e,e,f,g,h=this,i=h.editor,j=i.getBody(),k=i.selection,l=k.getRng(),m=l.startContainer;if(m&&i.dom.isBlock(m)&&!/^(TD|TH)$/.test(m.nodeName)&&c&&(0==m.childNodes.length||1==m.childNodes.length&&"BR"==m.firstChild.nodeName)){for(e=m;(e=e.previousSibling)&&!i.dom.isBlock(e););if(e){if(m!=j.firstChild){for(f=i.dom.doc.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1);g=f.nextNode();)e=g;l=i.getDoc().createRange(),l.setStart(e,e.nodeValue?e.nodeValue.length:0),l.setEnd(e,e.nodeValue?e.nodeValue.length:0),k.setRng(l),i.dom.remove(m)}return a.cancel(b)}}a._add(j,"DOMNodeInserted",d),window.setTimeout(function(){a._remove(j,"DOMNodeInserted",d)},1)}})}(),function(){var a=(tinymce.DOM,tinymce.dom.Event),b=tinymce.each,c=tinymce.extend;tinymce.create("tinymce.ControlManager",{ControlManager:function(a,c){var d=this;c=c||{},d.editor=a,d.controls={},d.onAdd=new tinymce.util.Dispatcher(d),d.onPostRender=new tinymce.util.Dispatcher(d),d.prefix=c.prefix||a.id+"_",d._cls={},d.onPostRender.add(function(){b(d.controls,function(a){a.postRender()})})},get:function(a){return this.controls[this.prefix+a]||this.controls[a]},setActive:function(a,b){var c=null;return(c=this.get(a))&&c.setActive(b),c},setDisabled:function(a,b){var c=null;return(c=this.get(a))&&c.setDisabled(b),c},add:function(a){var b=this;return a&&(b.controls[a.id]=a,b.onAdd.dispatch(a,b)),a},createControl:function(a){var c,d=this,e=d.editor;switch(b(e.plugins,function(b){return b.createControl&&(c=b.createControl(a,d))?!1:void 0}),a){case"|":case"separator":return d.createSeparator()}return!c&&e.buttons&&(c=e.buttons[a])?d.createButton(a,c):d.add(c)},createDropMenu:function(a,b,d){var e,f,g,h,i=this,j=i.editor;return b=c({"class":"mceDropDown",constrain:j.settings.constrain_menus},b),b["class"]=b["class"]+" "+j.getParam("skin")+"Skin",(g=j.getParam("skin_variant"))&&(b["class"]+=" "+j.getParam("skin")+"Skin"+g.substring(0,1).toUpperCase()+g.substring(1)),a=i.prefix+a,h=d||i._cls.dropmenu||tinymce.ui.DropMenu,e=i.controls[a]=new h(a,b),e.onAddItem.add(function(a,b){var c=b.settings;c.title=j.getLang(c.title,c.title),c.onclick||(c.onclick=function(a){j.execCommand(c.cmd,c.ui||!1,c.value)})}),j.onRemove.add(function(){e.destroy()}),tinymce.isIE&&(e.onShowMenu.add(function(){f=j.selection.getBookmark(1)}),e.onHideMenu.add(function(){f&&j.selection.moveToBookmark(f)})),i.add(e)},createListBox:function(b,d,e){var f,g,h=this,i=h.editor;return h.get(b)?null:(d.title=i.translate(d.title),d.scope=d.scope||i,d.onselect||(d.onselect=function(a){i.execCommand(d.cmd,d.ui||!1,a||d.value)}),d=c({title:d.title,"class":"mce_"+b,scope:d.scope,control_manager:h},d),b=h.prefix+b,i.settings.use_native_selects?f=new tinymce.ui.NativeListBox(b,d):(g=e||h._cls.listbox||tinymce.ui.ListBox,f=new g(b,d)),h.controls[b]=f,tinymce.isWebKit&&f.onPostRender.add(function(b,c){a.add(c,"mousedown",function(){i.bookmark=i.selection.getBookmark("simple")}),a.add(c,"focus",function(){i.selection.moveToBookmark(i.bookmark),i.bookmark=null})}),f.hideMenu&&i.onMouseDown.add(f.hideMenu,f),h.add(f))},createButton:function(a,b,d){var e,f,g=this,h=g.editor;return g.get(a)?null:(b.title=h.translate(b.title),b.label=h.translate(b.label),b.scope=b.scope||h,b.onclick||b.menu_button||(b.onclick=function(){h.execCommand(b.cmd,b.ui||!1,b.value)}),b=c({title:b.title,"class":"mce_"+a,unavailable_prefix:h.getLang("unavailable",""),scope:b.scope,control_manager:g},b),a=g.prefix+a,b.menu_button?(f=d||g._cls.menubutton||tinymce.ui.MenuButton,e=new f(a,b),h.onMouseDown.add(e.hideMenu,e)):(f=g._cls.button||tinymce.ui.Button,e=new f(a,b)),g.add(e))},createMenuButton:function(a,b,c){return b=b||{},b.menu_button=1,this.createButton(a,b,c)},createSplitButton:function(a,b,d){var e,f,g=this,h=g.editor;return g.get(a)?null:(b.title=h.translate(b.title),b.scope=b.scope||h,b.onclick||(b.onclick=function(a){h.execCommand(b.cmd,b.ui||!1,a||b.value)}),b.onselect||(b.onselect=function(a){h.execCommand(b.cmd,b.ui||!1,a||b.value)}),b=c({title:b.title,"class":"mce_"+a,scope:b.scope,control_manager:g},b),a=g.prefix+a,f=d||g._cls.splitbutton||tinymce.ui.SplitButton,e=g.add(new f(a,b)),h.onMouseDown.add(e.hideMenu,e),e)},createColorSplitButton:function(a,b,d){var e,f,g,h=this,i=h.editor;return h.get(a)?null:(b.title=i.translate(b.title),b.scope=b.scope||i,b.onclick||(b.onclick=function(a){i.execCommand(b.cmd,b.ui||!1,a||b.value)}),b.onselect||(b.onselect=function(a){i.execCommand(b.cmd,b.ui||!1,a||b.value)}),b=c({title:b.title,"class":"mce_"+a,menu_class:i.getParam("skin")+"Skin",scope:b.scope,more_colors_title:i.getLang("more_colors")},b),a=h.prefix+a,f=d||h._cls.colorsplitbutton||tinymce.ui.ColorSplitButton,e=new f(a,b),i.onMouseDown.add(e.hideMenu,e),i.onRemove.add(function(){e.destroy()}),tinymce.isIE&&(e.onShowMenu.add(function(){g=i.selection.getBookmark(1)}),e.onHideMenu.add(function(){g&&(i.selection.moveToBookmark(g),g=0)})),h.add(e))},createToolbar:function(a,b,c){var d,e,f=this;return a=f.prefix+a,e=c||f._cls.toolbar||tinymce.ui.Toolbar,d=new e(a,b),f.get(a)?null:f.add(d)},createSeparator:function(a){var b=a||this._cls.separator||tinymce.ui.Separator;return new b},setControlType:function(a,b){return this._cls[a.toLowerCase()]=b},destroy:function(){b(this.controls,function(a){a.destroy()}),this.controls=null}})}(),function(){var a=tinymce.util.Dispatcher,b=tinymce.each,c=tinymce.isIE,d=tinymce.isOpera;tinymce.create("tinymce.WindowManager",{WindowManager:function(b){var c=this;c.editor=b,c.onOpen=new a(c),c.onClose=new a(c),c.params={},c.features={}},open:function(a,e){var f,g,h,i,j=this,k="",l="modal"==j.editor.settings.dialog_type,m=tinymce.DOM.getViewPort();a=a||{},e=e||{},g=d?m.w:screen.width,h=d?m.h:screen.height,a.name=a.name||"mc_"+(new Date).getTime(),a.width=parseInt(a.width||320),a.height=parseInt(a.height||240),a.resizable=!0,a.left=a.left||parseInt(g/2)-a.width/2,a.top=a.top||parseInt(h/2)-a.height/2,e.inline=!1,e.mce_width=a.width,e.mce_height=a.height,e.mce_auto_focus=a.auto_focus,l&&c&&(a.center=!0,a.help=!1,a.dialogWidth=a.width+"px",a.dialogHeight=a.height+"px",a.scroll=a.scrollbars||!1),b(a,function(a,b){tinymce.is(a,"boolean")&&(a=a?"yes":"no"),/^(name|url)$/.test(b)||(k+=c&&l?(k?";":"")+b+":"+a:(k?",":"")+b+"="+a)}),j.features=a,j.params=e,j.onOpen.dispatch(j,a,e),i=a.url||a.file,tinymce.relaxedDomain&&(i+=(-1==i.indexOf("?")?"?":"&")+"mce_rdomain="+tinymce.relaxedDomain),i=tinymce._addVer(i);try{c&&l?(f=1,window.showModalDialog(i,window,k)):f=window.open(i,a.name,k)}catch(n){}f||alert(j.editor.getLang("popup_blocked"))},close:function(a){a.close(),this.onClose.dispatch(this)},createInstance:function(a,b,c,d,e,f){var g=tinymce.resolve(a);return new g(b,c,d,e,f)},confirm:function(a,b,c,d){d=d||window,b.call(c||this,d.confirm(this._decode(this.editor.getLang(a,a))))},alert:function(a,b,c,d){var e=this;d=d||window,d.alert(e._decode(e.editor.getLang(a,a))),b&&b.call(c||e)},_decode:function(a){return tinymce.DOM.decode(a).replace(/\\n/g,"\n")}})}();