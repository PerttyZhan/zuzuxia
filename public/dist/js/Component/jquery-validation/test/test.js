window.sessionStorage&&sessionStorage.clear(),jQuery.validator.defaults.debug=!0,$.mockjaxSettings.log=$.noop,$.mockjax({url:"form.php?user=Peter&password=foobar",responseText:"Hi Peter, welcome back.",responseStatus:200,responseTime:1}),$.mockjax({url:"users.php",data:{username:/Peter2?|asdf/},responseText:"false",responseStatus:200,responseTime:1}),$.mockjax({url:"users2.php",data:{username:"asdf"},responseText:'"asdf is already taken, please try something else"',responseStatus:200,responseTime:1}),$.mockjax({url:"echo.php",response:function(a){this.responseText=JSON.stringify(a.data)},responseTime:100}),QUnit.assert.hasError=function(a,b,c){var d=$(a).closest("form").validate().errorsFor(a[0]),e=1===d.length&&d.is(":visible")?d.text():"";QUnit.push(e,e,b,c)},QUnit.assert.noErrorFor=function(a,b){var c=$(a).closest("form").validate().errorsFor(a[0]),d=0===c.length||c.is(":hidden")&&""===c.text();QUnit.push(d,d,!0,b)},module("validator"),test("Constructor",function(){var a=$("#testForm1").validate(),b=$("#testForm1").validate();equal(a,b,"Calling validate() multiple times must return the same validator instance"),equal(a.elements().length,3,"validator elements")}),test("validate() without elements, with non-form elements",0,function(){$("#doesntexist").validate()}),test("valid() plugin method",function(){var a=$("#userForm"),b=$("#username");a.validate(),ok(!a.valid(),"Form isn't valid yet"),ok(!b.valid(),"Input isn't valid either"),b.val("Hello world"),ok(a.valid(),"Form is now valid"),ok(b.valid(),"Input is valid, too")}),test("valid() plugin method, multiple inputs",function(){var a=$("#testForm1"),b=a.validate(),c=a.find("input");ok(!c.valid(),"all invalid"),c.not(":first").val("ok"),equal(b.numberOfInvalids(),2),strictEqual(c.valid(),!1,"just one invalid"),c.val("ok"),strictEqual(c.valid(),!0,"all valid")}),test("valid() plugin method, special handling for checkable groups",function(){var a=$("#checkable2");ok(!a.valid(),"must be invalid, not checked yet"),a.attr("checked",!0),ok(a.valid(),"valid, is now checked"),a.attr("checked",!1),ok(!a.valid(),"invalid again"),$("#checkable3").attr("checked",!0),ok(a.valid(),"valid, third box is checked")}),test("valid() ???",function(){expect(4);var a=[{name:"meal",message:"foo",element:$("#meal")[0]}],b=$("#testForm3").validate();ok(b.valid(),"No errors, must be valid"),b.errorList=a,ok(!b.valid(),"One error, must be invalid"),QUnit.reset(),b=$("#testForm3").validate({submitHandler:function(){ok(!1,"Submit handler was called")}}),ok(b.valid(),"No errors, must be valid and returning true, even with the submit handler"),b.errorList=a,ok(!b.valid(),"One error, must be invalid, no call to submit handler")}),test("valid(), ignores ignored elements",function(){$("#testForm1clean").validate({ignore:"#firstnamec",rules:{firstnamec:"required"}}),ok($("#firstnamec").valid())}),test("addMethod",function(){expect(3),$.validator.addMethod("hi",function(a){return"hi"===a},"hi me too");var a=$.validator.methods.hi,b=$("#text1")[0];ok(!a(b.value,b),"Invalid"),b.value="hi",ok(a(b.value,b),"Invalid"),ok("hi me too"===jQuery.validator.messages.hi,"Check custom message")}),test("addMethod2",function(){expect(4),$.validator.addMethod("complicatedPassword",function(a,b){return this.optional(b)||/\D/.test(a)&&/\d/.test(a)},"Your password must contain at least one number and one letter");var a=jQuery("#form").validate({rules:{action:{complicatedPassword:!0}}}),b=$("#text1")[0];b.value="",strictEqual(a.element(b),!0,"Rule is optional, valid"),equal(0,a.size()),b.value="ko",ok(!a.element(b),"Invalid, doesn't contain one of the required characters"),b.value="ko1",ok(a.element(b))}),test("form(): simple",function(){expect(2);var a=$("#testForm1")[0],b=$(a).validate();ok(!b.form(),"Invalid form"),$("#firstname").val("hi"),$("#lastname").val("hi"),ok(b.form(),"Valid form")}),test("form(): checkboxes: min/required",function(){expect(3);var a=$("#testForm6")[0],b=$(a).validate();ok(!b.form(),"Invalid form"),$("#form6check1").attr("checked",!0),ok(!b.form(),"Invalid form"),$("#form6check2").attr("checked",!0),ok(b.form(),"Valid form")}),test("form(): radio buttons: required",function(){expect(6);var a=$("#testForm10")[0],b=$(a).validate({rules:{testForm10Radio:"required"}});ok(!b.form(),"Invalid Form"),equal($("#testForm10Radio1").attr("class"),"error"),equal($("#testForm10Radio2").attr("class"),"error"),$("#testForm10Radio2").attr("checked",!0),ok(b.form(),"Valid form"),equal($("#testForm10Radio1").attr("class"),"valid"),equal($("#testForm10Radio2").attr("class"),"valid")}),test("form(): selects: min/required",function(){expect(3);var a=$("#testForm7")[0],b=$(a).validate();ok(!b.form(),"Invalid form"),$("#optionxa").attr("selected",!0),ok(!b.form(),"Invalid form"),$("#optionxb").attr("selected",!0),ok(b.form(),"Valid form")}),test("form(): with equalTo",function(){expect(2);var a=$("#testForm5")[0],b=$(a).validate();ok(!b.form(),"Invalid form"),$("#x1, #x2").val("hi"),ok(b.form(),"Valid form")}),test("form(): with equalTo and onfocusout=false",function(){expect(4);var a=$("#testForm5")[0],b=$(a).validate({onfocusout:!1,showErrors:function(){ok(!0,"showErrors should only be called twice"),this.defaultShowErrors()}});$("#x1, #x2").val("hi"),ok(b.form(),"Valid form"),$("#x2").val("not equal").blur(),ok(!b.form(),"Invalid form")}),test("check(): simple",function(){expect(3);var a=$("#firstname")[0],b=$("#testForm1").validate();ok(0===b.size(),"No errors yet"),b.check(a),ok(1===b.size(),"error exists"),b.errorList=[],$("#firstname").val("hi"),b.check(a),ok(0===b.size(),"No more errors")}),test("hide(): input",function(){expect(3);var a,b=$("#errorFirstname"),c=$("#firstname")[0];c.value="bla",a=$("#testForm1").validate(),b.show(),ok(b.is(":visible"),"Error label visible before validation"),ok(a.element(c)),ok(b.is(":hidden"),"Error label not visible after validation")}),test("hide(): radio",function(){expect(2);var a,b=$("#agreeLabel"),c=$("#agb")[0];c.checked=!0,a=$("#testForm2").validate({errorClass:"xerror"}),b.show(),ok(b.is(":visible"),"Error label visible after validation"),a.element(c),ok(b.is(":hidden"),"Error label not visible after hiding it")}),test("hide(): errorWrapper",function(){expect(2);var a,b=$("#errorWrapper"),c=$("#meal")[0];c.selectedIndex=1,b.show(),ok(b.is(":visible"),"Error label visible after validation"),a=$("#testForm3").validate({wrapper:"li",errorLabelContainer:$("#errorContainer")}),a.element(c),ok(b.is(":hidden"),"Error label not visible after hiding it")}),test("hide(): container",function(){expect(4);var a=$("#errorContainer"),b=$("#testForm3").validate({errorWrapper:"li",errorContainer:$("#errorContainer")});b.form(),ok(a.is(":visible"),"Error label visible after validation"),$("#meal")[0].selectedIndex=1,b.form(),ok(a.is(":hidden"),"Error label not visible after hiding it"),$("#meal")[0].selectedIndex=-1,b.element("#meal"),ok(a.is(":visible"),"Error label visible after validation"),$("#meal")[0].selectedIndex=1,b.element("#meal"),ok(a.is(":hidden"),"Error label not visible after hiding it")}),test("submitHandler keeps submitting button",function(){var a,b;$("#userForm").validate({debug:!0,submitHandler:function(b){var c=$(b).find("input:hidden")[0];deepEqual(c.value,a.value),deepEqual(c.name,a.name)}}),$("#username").val("bla"),a=$("#userForm :submit")[0],b=$.Event("click"),b.preventDefault(),$.event.trigger(b,null,a),$("#userForm").submit()}),asyncTest("validation triggered on radio/checkbox when using keyboard",function(){expect(1);var a,b,c,d=0;for($("#form").validate({onfocusin:function(){d++},onfocusout:function(){d++},onkeyup:function(){d++}}),c=[$.Event("focusin"),$.Event("focusout"),$.Event("keyup")],a=$("#form :radio:first"),b=0;b<c.length;b++)a.trigger(c[b]);for(a=$("#form :checkbox:first"),b=0;b<c.length;b++)a.trigger(c[b]);setTimeout(function(){equal(6,d),start()})}),asyncTest("validation triggered on radio/checkbox when using mouseclick",function(){expect(1);var a,b,c,d=0;for($("#form").validate({onclick:function(){d++}}),c=[$.Event("click")],a=$("#form :radio:first"),b=0;b<c.length;b++)a.trigger(c[b]);for(a=$("#form :checkbox:first"),b=0;b<c.length;b++)a.trigger(c[b]);setTimeout(function(){equal(2,d),start()})}),test("showErrors()",function(){expect(4);var a=$("#errorFirstname").hide(),b=$("#testForm1").validate();ok(a.is(":hidden")),equal(0,$("#lastname").next(".error:not(input)").length),b.showErrors({firstname:"required",lastname:"bla"}),equal(!0,a.is(":visible")),equal(!0,$("#lastname").next(".error:not(input)").is(":visible"))}),test("showErrors(), allow empty string and null as default message",function(){$("#userForm").validate({rules:{username:{required:!0,minlength:3}},messages:{username:{required:"",minlength:"too short"}}}),ok(!$("#username").valid()),equal("",$("#username").next(".error:not(input)").text()),$("#username").val("ab"),ok(!$("#username").valid()),equal("too short",$("#username").next(".error:not(input)").text()),$("#username").val("abc"),ok($("#username").valid()),ok($("#username").next(".error:not(input)").is(":hidden"))}),test("showErrors() - external messages",function(){expect(4);var a,b,c=$.extend({},$.validator.methods),d=$.extend({},$.validator.messages);$.validator.addMethod("foo",function(){return!1}),$.validator.addMethod("bar",function(){return!1}),equal(0,$("#testForm4 #f1").next(".error:not(input)").length),equal(0,$("#testForm4 #f2").next(".error:not(input)").length),a=$("#testForm4")[0],b=$(a).validate({messages:{f1:"Please!",f2:"Wohoo!"}}),b.form(),equal($("#testForm4 #f1").next(".error:not(input)").text(),"Please!"),equal($("#testForm4 #f2").next(".error:not(input)").text(),"Wohoo!"),$.validator.methods=c,$.validator.messages=d}),test("showErrors() - custom handler",function(){expect(5);var a=$("#testForm1").validate({showErrors:function(b,c){equal(a,this),equal(a.errorList,c),equal(a.errorMap,b),equal("buga",b.firstname),equal("buga",b.lastname)}});a.form()}),test("option: (un)highlight, default",function(){$("#testForm1").validate();var a=$("#firstname");ok(!a.hasClass("error")),ok(!a.hasClass("valid")),a.valid(),ok(a.hasClass("error")),ok(!a.hasClass("valid")),a.val("hithere").valid(),ok(!a.hasClass("error")),ok(a.hasClass("valid"))}),test("option: (un)highlight, nothing",function(){expect(3),$("#testForm1").validate({highlight:!1,unhighlight:!1});var a=$("#firstname");ok(!a.hasClass("error")),a.valid(),ok(!a.hasClass("error")),a.valid(),ok(!a.hasClass("error"))}),test("option: (un)highlight, custom",function(){expect(5),$("#testForm1clean").validate({highlight:function(a,b){equal("invalid",b),$(a).hide()},unhighlight:function(a,b){equal("invalid",b),$(a).show()},ignore:"",errorClass:"invalid",rules:{firstnamec:"required"}});var a=$("#firstnamec");ok(a.is(":visible")),a.valid(),ok(!a.is(":visible")),a.val("hithere").valid(),ok(a.is(":visible"))}),test("option: (un)highlight, custom2",function(){expect(6);var a,b;$("#testForm1").validate({highlight:function(a,b){$(a).addClass(b),$(a).next(".error:not(input)").addClass(b)},unhighlight:function(a,b){$(a).removeClass(b),$(a).next(".error:not(input)").removeClass(b)},errorClass:"invalid"}),a=$("#firstname"),b=$("#errorFirstname"),ok(!a.is(".invalid")),ok(!b.is(".invalid")),a.valid(),ok(a.is(".invalid")),ok(b.is(".invalid")),a.val("hithere").valid(),ok(!a.is(".invalid")),ok(!b.is(".invalid"))}),test("option: focusCleanup default false",function(){var a=$("#userForm");a.validate(),a.valid(),ok(a.find("#username").next(".error:not(input)").is(":visible")),$("#username").focus(),ok(a.find("#username").next(".error:not(input)").is(":visible"))}),test("option: focusCleanup true",function(){var a=$("#userForm");a.validate({focusCleanup:!0}),a.valid(),ok(a.find("#username").next(".error:not(input)").is(":visible")),$("#username").focus().trigger("focusin"),ok(!a.find("#username").next(".error:not(input)").is(":visible"))}),test("option: focusCleanup with wrapper",function(){var a=$("#userForm");a.validate({focusCleanup:!0,wrapper:"span"}),a.valid(),ok(a.is(":has(span:visible:has(.error#username-error))")),$("#username").focus().trigger("focusin"),ok(!a.is(":has(span:visible:has(.error#username-error))"))}),test("option: errorClass with multiple classes",function(){var a=$("#userForm");a.validate({focusCleanup:!0,wrapper:"span",errorClass:"error error1 error2"}),a.valid(),ok(a.is(":has(span:visible:has(.error#username-error))")),ok(a.is(":has(span:visible:has(.error1#username-error))")),ok(a.is(":has(span:visible:has(.error2#username-error))")),$("#username").focus().trigger("focusin"),ok(!a.is(":has(span:visible:has(.error#username-error))")),ok(!a.is(":has(span:visible:has(.error1#username-error))")),ok(!a.is(":has(span:visible:has(.error2#username-error))"))}),test("defaultMessage(), empty title is ignored",function(){var a=$("#userForm").validate();equal("This field is required.",a.defaultMessage($("#username")[0],"required"))}),test("formatAndAdd",function(){expect(4);var a=$("#form").validate(),b={form:$("#form")[0],name:"bar"};a.formatAndAdd(b,{method:"maxlength",parameters:2}),equal("Please enter no more than 2 characters.",a.errorList[0].message),equal("bar",a.errorList[0].element.name),a.formatAndAdd(b,{method:"range",parameters:[2,4]}),equal("Please enter a value between 2 and 4.",a.errorList[1].message),a.formatAndAdd(b,{method:"range",parameters:[0,4]}),equal("Please enter a value between 0 and 4.",a.errorList[2].message)}),test("formatAndAdd2",function(){expect(3);var a=$("#form").validate(),b={form:$("#form")[0],name:"bar"};jQuery.validator.messages.test1=function(b,c){return equal(a,this),equal(0,b),"element "+c.name+" is not valid"},a.formatAndAdd(b,{method:"test1",parameters:0}),equal("element bar is not valid",a.errorList[0].message)}),test("formatAndAdd, auto detect substitution string",function(){var a=$("#testForm1clean").validate({rules:{firstnamec:{required:!0,rangelength:[5,10]}},messages:{firstnamec:{rangelength:"at least ${0}, up to {1}"}}});$("#firstnamec").val("abc"),a.form(),equal("at least 5, up to 10",a.errorList[0].message)}),asyncTest("option invalidHandler",function(){expect(1),$("#testForm1clean").validate({invalidHandler:function(){ok(!0,"invalid-form event triggered called"),start()}}),$("#usernamec").val("asdf").rules("add",{required:!0,minlength:5}),$("#testForm1clean").submit()}),test("findByName()",function(){deepEqual(new $.validator({},document.getElementById("form")).findByName(document.getElementById("radio1").name).get(),$("#form").find("[name=radio1]").get())}),test("focusInvalid()",function(){var a=$("#testForm1 input").focus(function(){equal(a[0],this,"focused first element")}),b=$("#testForm1").validate();b.form(),b.focusInvalid()}),test("focusInvalid() after validate a custom set of inputs",function(){var a=$("#testForm1"),b=a.validate(),c=$("#firstname, #lastname, #something");$("#firstname").val("ok"),ok(!c.valid(),"just one invalid"),b.focusInvalid(),equal(a[0].ownerDocument.activeElement,$("#lastname")[0],"focused first element")}),test("findLastActive()",function(){expect(3);var a,b=$("#testForm1").validate();ok(!b.findLastActive()),b.form(),b.focusInvalid(),equal(b.findLastActive(),$("#firstname")[0]),a=$("#lastname").trigger("focus").trigger("focusin")[0],equal(b.lastActive,a)}),test("elementValue() finds radios/checkboxes only within the current form",function(){expect(1);var a=$("#userForm").validate(),b=$("#radio2")[0];ok(!a.elementValue(b))}),test("validating multiple checkboxes with 'required'",function(){expect(3);var a,b=$("#form input[name=check3]").prop("checked",!1);equal(b.length,5),a=$("#form").validate({rules:{check3:"required"}}),a.form(),equal(a.size(),1),b.filter(":last").prop("checked",!0),a.form(),equal(a.size(),0)}),test("dynamic form",function(){function a(){$("<input data-rule-required='true' name='list"+d++ +"' />").appendTo("#testForm2")}function b(a,b){equal(a,c.size(),b)}var c,d=0;c=$("#testForm2").validate(),c.form(),b(1),a(),c.form(),b(2),a(),c.form(),b(3),$("#testForm2 input[name=list1]").remove(),c.form(),b(2),a(),c.form(),b(3),$("#testForm2 input[name^=list]").remove(),c.form(),b(1),$("#agb").attr("disabled",!0),c.form(),b(0),$("#agb").attr("disabled",!1),c.form(),b(1)}),test("idOrName()",function(){expect(4);var a=$("#testForm1").validate();equal("form8input",a.idOrName($("#form8input")[0])),equal("check",a.idOrName($("#form6check1")[0])),equal("agree",a.idOrName($("#agb")[0])),equal("button",a.idOrName($("#form :button")[0]))}),test("resetForm()",function(){function a(a,c){equal(a,b.size(),c)}var b=$("#testForm1").validate();b.form(),a(2),ok($("#firstname").hasClass("error")),$("#firstname").val("hiy"),b.resetForm(),a(0),ok(!$("#firstname").hasClass("error")),equal("",$("#firstname").val(),"form plugin is included, therefor resetForm must also reset inputs, not only errors")}),test("resetForm() clean styles when custom highlight function is used",function(){var a=$("#testForm1clean"),b=$("#firstnamec");a.validate({highlight:function(a){$(a).hide()},unhighlight:function(a){$(a).show()},ignore:"",errorClass:"invalid",rules:{firstnamec:"required"}}),b.valid(),ok(!b.is(":visible")),a.validate().resetForm(),ok(b.is(":visible"))}),test("message from title",function(){var a=$("#withTitle").validate();a.checkForm(),equal(a.errorList[0].message,"fromtitle","title not used")}),test("ignoreTitle",function(){var a=$("#withTitle").validate({ignoreTitle:!0});a.checkForm(),equal(a.errorList[0].message,$.validator.messages.required,"title used when it should have been ignored")}),asyncTest("ajaxSubmit",function(){expect(1),$("#user").val("Peter"),$("#password").val("foobar"),jQuery("#signupForm").validate({submitHandler:function(a){jQuery(a).ajaxSubmit({success:function(a){equal("Hi Peter, welcome back.",a),start()}})}}),jQuery("#signupForm").triggerHandler("submit")}),test("validating groups settings parameter",function(){var a=$("<form>"),b=a.validate({groups:{arrayGroup:["input one","input-two","input three"],stringGroup:"input-four input-five input-six"}});equal(b.groups["input one"],"arrayGroup"),equal(b.groups["input-two"],"arrayGroup"),equal(b.groups["input three"],"arrayGroup"),equal(b.groups["input-four"],"stringGroup"),equal(b.groups["input-five"],"stringGroup"),equal(b.groups["input-six"],"stringGroup")}),test("bypassing validation on form submission",function(){var a=$("#bypassValidation"),b=$("form#bypassValidation :input[id=normalSubmit]"),c=$("form#bypassValidation :input[id=bypassSubmitWithCancel]"),d=$("form#bypassValidation :input[id=bypassSubmitWithNoValidate1]"),e=$("form#bypassValidation :input[id=bypassSubmitWithNoValidate2]"),f=a.validate({debug:!0});c.click(),equal(f.numberOfInvalids(),0,"Validation was bypassed using CSS 'cancel' class."),f.resetForm(),d.click(),equal(f.numberOfInvalids(),0,"Validation was bypassed using blank 'formnovalidate' attribute."),f.resetForm(),e.click(),equal(f.numberOfInvalids(),0,"Validation was bypassed using 'formnovalidate=\"formnovalidate\"' attribute."),f.resetForm(),b.click(),equal(f.numberOfInvalids(),1,"Validation failed correctly")}),module("misc"),test("success option",function(){expect(7),equal("",$("#firstname").val());var a=$("#testForm1").validate({success:"valid"}),b=$("#testForm1 .error:not(input)");ok(b.is(".error")),ok(!b.is(".valid")),a.form(),ok(b.is(".error")),ok(!b.is(".valid")),$("#firstname").val("hi"),a.form(),ok(b.is(".error")),ok(b.is(".valid"))}),test("success option2",function(){expect(5),equal("",$("#firstname").val());var a=$("#testForm1").validate({success:"valid"}),b=$("#testForm1 .error:not(input)");ok(b.is(".error")),ok(!b.is(".valid")),$("#firstname").val("hi"),a.form(),ok(b.is(".error")),ok(b.is(".valid"))}),test("success option3",function(){expect(5),equal("",$("#firstname").val()),$("#errorFirstname").remove();var a,b=$("#testForm1").validate({success:"valid"});equal(0,$("#testForm1 .error:not(input)").length),$("#firstname").val("hi"),b.form(),a=$("#testForm1 .error:not(input)"),equal(3,a.length),ok(a.eq(0).is(".valid")),ok(!a.eq(1).is(".valid"))}),test("successlist",function(){var a=$("#form").validate({success:"xyz"});a.form(),equal(0,a.successList.length)}),test("success isn't called for optional elements with no other rules",function(){expect(4),equal("",$("#firstname").removeAttr("data-rule-required").removeAttr("data-rule-minlength").val()),$("#something").remove(),$("#lastname").remove(),$("#errorFirstname").remove();var a=$("#testForm1").validate({success:function(){ok(!1,"don't call success for optional elements!")},rules:{firstname:{required:!1}}});equal(0,$("#testForm1 .error:not(input)").length),a.form(),equal(0,$("#testForm1 .error:not(input)").length),$("#firstname").valid(),equal(0,$("#testForm1 .error:not(input)").length)}),test("success is called for optional elements with other rules",function(){expect(1),$.validator.addMethod("custom1",function(){return!0},""),$("#testForm1clean").validate({success:function(){ok(!0,"success called correctly!")},rules:{firstnamec:{required:!1,custom1:!0}}}),$("#firstnamec").valid(),delete $.validator.methods.custom1}),test("success callback with element",function(){expect(1);var a=$("#userForm").validate({success:function(a,b){equal(b,$("#username").get(0))}});$("#username").val("hi"),a.form()}),test("all rules are evaluated even if one returns a dependency-mistmatch",function(){expect(6),equal("",$("#firstname").removeAttr("data-rule-required").removeAttr("data-rule-minlength").val()),$("#lastname").remove(),$("#errorFirstname").remove(),$.validator.addMethod("custom1",function(){return ok(!0,"custom method must be evaluated"),!0},"");var a=$("#testForm1").validate({rules:{firstname:{email:!0,custom1:!0}}});equal(0,$("#testForm1 .error:not(input)").length),a.form(),equal(0,$("#testForm1 .error:not(input)").length),$("#firstname").valid(),equal(0,$("#testForm1 .error:not(input)").length),delete $.validator.methods.custom1,delete $.validator.messages.custom1}),test("messages",function(){var a=jQuery.validator.messages;equal("Please enter no more than 0 characters.",a.maxlength(0)),equal("Please enter at least 1 characters.",a.minlength(1)),equal("Please enter a value between 1 and 2 characters long.",a.rangelength([1,2])),equal("Please enter a value less than or equal to 1.",a.max(1)),equal("Please enter a value greater than or equal to 0.",a.min(0)),equal("Please enter a value between 1 and 2.",a.range([1,2]))}),test("jQuery.validator.format",function(){equal("Please enter a value between 0 and 1.",jQuery.validator.format("Please enter a value between {0} and {1}.",0,1)),equal("0 is too fast! Enter a value smaller then 0 and at least -15",jQuery.validator.format("{0} is too fast! Enter a value smaller then {0} and at least {1}",0,-15));var a=jQuery.validator.format("{0} is too fast! Enter a value smaller then {0} and at least {1}");equal("0 is too fast! Enter a value smaller then 0 and at least -15",a(0,-15)),a=jQuery.validator.format("Please enter a value between {0} and {1}."),equal("Please enter a value between 1 and 2.",a([1,2])),equal($.validator.format("{0}","$0"),"$0")}),test("option: ignore",function(){var a=$("#testForm1").validate({ignore:"[name=lastname]"});a.form(),equal(1,a.size())}),test("option: subformRequired",function(){jQuery.validator.addMethod("billingRequired",function(a,b){return $("#bill_to_co").is(":checked")?$(b).parents("#subform").length:!this.optional(b)},"");var a=$("#subformRequired").validate();a.form(),equal(1,a.size()),$("#bill_to_co").attr("checked",!1),a.form(),equal(2,a.size()),delete $.validator.methods.billingRequired,delete $.validator.messages.billingRequired}),module("expressions"),test("expression: :blank",function(){var a=$("#lastname")[0];equal(1,$(a).filter(":blank").length),a.value=" ",equal(1,$(a).filter(":blank").length),a.value="   ",equal(1,$(a).filter(":blank").length),a.value=" a ",equal(0,$(a).filter(":blank").length)}),test("expression: :filled",function(){var a=$("#lastname")[0];equal(0,$(a).filter(":filled").length),a.value=" ",equal(0,$(a).filter(":filled").length),a.value="   ",equal(0,$(a).filter(":filled").length),a.value=" a ",equal(1,$(a).filter(":filled").length)}),test("expression: :unchecked",function(){var a=$("#check2")[0];equal(1,$(a).filter(":unchecked").length),a.checked=!0,equal(0,$(a).filter(":unchecked").length),a.checked=!1,equal(1,$(a).filter(":unchecked").length)}),module("events"),test("validate on blur",function(){function a(a,b){equal(e.size(),a,b)}function b(a){equal(e.errors().filter(":visible").length,a)}function c(a){a.trigger("blur").trigger("focusout")}$("#errorFirstname").hide();var d=$("#firstname"),e=$("#testForm1").validate();$("#something").val(""),c(d),a(0,"No value yet, required is skipped on blur"),b(0),d.val("h"),c(d),a(1,"Required was ignored, but as something was entered, check other rules, minlength isn't met"),b(1),d.val("hh"),c(d),a(0,"All is fine"),b(0),d.val(""),e.form(),a(3,"Submit checks all rules, both fields invalid"),b(3),c(d),a(1,"Blurring the field results in emptying the error list first, then checking the invalid field: its still invalid, don't remove the error"),b(3),d.val("h"),c(d),a(1,"Entering a single character fulfills required, but not minlength: 2, still invalid"),b(3),d.val("hh"),c(d),a(0,"Both required and minlength are met, no errors left"),b(2)}),test("validate on keyup",function(){function a(a,b){equal(a,d.size(),b)}function b(a){a.trigger("keyup")}var c=$("#firstname"),d=$("#testForm1").validate();b(c),a(0,"No value, no errors"),c.val("a"),b(c),a(0,"Value, but not invalid"),c.val(""),d.form(),a(2,"Both invalid"),b(c),a(1,"Only one field validated, still invalid"),c.val("hh"),b(c),a(0,"Not invalid anymore"),c.val("h"),b(c),a(1,"Field didn't loose focus, so validate again, invalid"),c.val("hh"),b(c),a(0,"Valid")}),test("validate on not keyup, only blur",function(){function a(a,b){equal(a,c.size(),b)}var b=$("#firstname"),c=$("#testForm1").validate({onkeyup:!1});a(0),b.val("a"),b.trigger("keyup"),b.keyup(),a(0),b.trigger("blur").trigger("focusout"),a(1)}),test("validate on keyup and blur",function(){function a(a,b){equal(a,c.size(),b)}var b=$("#firstname"),c=$("#testForm1").validate();a(0),b.val("a"),b.trigger("keyup"),a(0),b.trigger("blur").trigger("focusout"),a(1)}),test("validate email on keyup and blur",function(){function a(a,b){equal(a,c.size(),b)}var b=$("#firstname"),c=$("#testForm1").validate();c.form(),a(2),b.val("a"),b.trigger("keyup"),a(1),b.val("aa"),b.trigger("keyup"),a(0)}),test("don't revalidate the field when pressing special characters",function(){function a(a,b){equal(a,d.size(),b)}function b(a,b){var c=$.Event("keyup",{keyCode:b});a.trigger(c)}var c=$("#firstname"),d=$("#testForm1").validate(),e={Shift:16,Ctrl:17,Alt:18,"Caps lock":20,End:35,Home:36,"Left arrow":37,"Up arrow":38,"Right arrow":39,"Down arrow":40,Insert:45,"Num lock":144,"Alt GR":225};$("#firstname").val(""),$("#lastname").val("something"),$("#something").val("something"),d.form(),a(1,"Validate manualy"),c.val("aaa"),$.each(e,function(d,e){b(c,e),a(1,d+" key")}),c.val("aaaaa"),c.trigger("keyup"),a(0,"Normal keyup")}),test("validate checkbox on click",function(){function a(a,b){equal(a,d.size(),b)}function b(a){a.click(),a.valid()}var c=$("#check2"),d=$("#form").validate({rules:{check2:"required"}});b(c),a(0),b(c),equal(!1,d.form()),a(1),b(c),a(0),b(c),a(1)}),test("validate multiple checkbox on click",function(){function a(a,b){equal(a,e.size(),b)}function b(a){a.click(),a.valid()}var c=$("#check1").attr("checked",!1),d=$("#check1b"),e=$("#form").validate({rules:{check:{required:!0,minlength:2}}});b(c),b(d),a(0),b(d),equal(!1,e.form()),a(1),b(d),a(0),b(d),a(1)}),test("correct checkbox receives the error",function(){function a(a){a.click(),a.valid()}var b,c=$("#check1").attr("checked",!1);$("#check1b").attr("checked",!1),b=$("#form").find("[type=checkbox]").attr("checked",!1).end().validate({rules:{check:{required:!0,minlength:2}}}),equal(!1,b.form()),a(c),equal(!1,b.form()),ok(b.errorList[0].element.id===b.currentElements[0].id,"the proper checkbox has the error AND is present in currentElements")}),test("validate radio on click",function(){function a(a,b){equal(a,e.size(),b)}function b(a){a.click(),a.valid()}var c=$("#radio1"),d=$("#radio1a"),e=$("#form").validate({rules:{radio1:"required"}});a(0),equal(!1,e.form()),a(1),b(d),a(0),b(c),a(0)}),test("validate input with no type attribute, defaulting to text",function(){function a(a,c){equal(a,b.size(),c)}var b=$("#testForm12").validate(),c=$("#testForm12text");a(0),c.valid(),a(1),c.val("test"),c.trigger("keyup"),a(0)}),module("ignore hidden"),test("ignore hidden elements",function(){var a=$("#userForm"),b=a.validate({rules:{username:"required"}});a.get(0).reset(),ok(!b.form(),"form should be initially invalid"),$("#userForm [name=username]").hide(),ok(b.form(),"hidden elements should be ignored by default")}),test("ignore hidden elements at start",function(){var a=$("#userForm"),b=a.validate({rules:{username:"required"}});a.get(0).reset(),$("#userForm [name=username]").hide(),ok(b.form(),"hidden elements should be ignored by default"),$("#userForm [name=username]").show(),ok(!b.form(),"form should be invalid when required element is visible")}),module("configuration with attributes "),test("Specify error messages through data attributes",function(){var a,b=$("#dataMessages"),c=$("#dataMessagesName");b.validate(),b.get(0).reset(),c.valid(),a=$("#dataMessages .error:not(input)"),equal(a.text(),"You must enter a value here","Correct error label")}),test("Updates pre-existing label if has error class",function(){var a,b=$("#updateLabel"),c=$("#updateLabelInput"),d=$("#targetLabel"),e=b.find(".error:not(input)").length;b.validate(),c.val(""),c.valid(),a=b.find(".error:not(input)").length,equal(d.text(),c.attr("data-msg-required")),equal(e,a)}),test("Min date set by attribute",function(){var a,b=$("#rangesMinDateInvalid"),c=$("#minDateInvalid");b.validate(),b.get(0).reset(),c.valid(),a=$("#rangesMinDateInvalid .error:not(input)"),equal(a.text(),"Please enter a value greater than or equal to 2012-12-21.","Correct error label")}),test("Max date set by attribute",function(){var a,b=$("#ranges"),c=$("#maxDateInvalid");b.validate(),b.get(0).reset(),c.valid(),a=$("#ranges .error:not(input)"),equal(a.text(),"Please enter a value less than or equal to 2012-12-21.","Correct error label")}),test("Min and Max date set by attributes greater",function(){var a,b=$("#ranges"),c=$("#rangeDateInvalidGreater");b.validate(),b.get(0).reset(),c.valid(),a=$("#ranges .error:not(input)"),equal(a.text(),"Please enter a value less than or equal to 2013-01-21.","Correct error label")}),test("Min and Max date set by attributes less",function(){var a,b=$("#ranges"),c=$("#rangeDateInvalidLess");b.validate(),b.get(0).reset(),c.valid(),a=$("#ranges .error:not(input)"),equal(a.text(),"Please enter a value greater than or equal to 2012-11-21.","Correct error label")}),test("Min date set by attribute valid",function(){var a,b=$("#rangeMinDateValid"),c=$("#minDateValid");b.validate(),b.get(0).reset(),c.valid(),a=$("#rangeMinDateValid .error:not(input)"),equal(a.text(),"","Correct error label")}),test("Max date set by attribute valid",function(){var a,b=$("#ranges"),c=$("#maxDateValid");b.validate(),b.get(0).reset(),c.valid(),a=$("#ranges .error:not(input)"),equal(a.text(),"","Correct error label")}),test("Min and Max date set by attributes valid",function(){var a,b=$("#ranges"),c=$("#rangeDateValid");b.validate(),b.get(0).reset(),c.valid(),a=$("#ranges .error:not(input)"),equal(a.text(),"","Correct error label")}),test("Min and Max strings set by attributes greater",function(){var a,b=$("#ranges"),c=$("#rangeTextInvalidGreater");b.validate(),b.get(0).reset(),c.valid(),a=$("#ranges .error:not(input)"),equal(a.text(),"Please enter a value less than or equal to 200.","Correct error label")}),test("Min and Max strings set by attributes less",function(){var a,b=$("#ranges"),c=$("#rangeTextInvalidLess");b.validate(),b.get(0).reset(),
c.valid(),a=$("#ranges .error:not(input)"),equal(a.text(),"Please enter a value greater than or equal to 200.","Correct error label")}),test("Min and Max strings set by attributes valid",function(){var a,b=$("#ranges"),c=$("#rangeTextValid");b.validate(),b.get(0).reset(),c.valid(),a=$("#ranges .error:not(input)"),equal(a.text(),"","Correct error label")}),test("Max set by data-rule, valid",function(){var a,b=$("#ranges"),c=$("#rangeTextDataRuleValid");b.validate(),b.get(0).reset(),c.valid(),a=$("#ranges .error:not(input)"),equal(a.text(),"","Correct error label")}),test("calling blur on ignored element",function(){var a=$("#ignoredElements");a.validate({ignore:".ignore",submitHandler:$.noop,invalidHandler:function(){$("#ss1").blur()}}),a.trigger("submit"),equal(a.valid(),!1,"valid() should return false")}),test("Min and Max type absent set by attributes greater",function(){var a,b=$("#ranges"),c=$("#rangeAbsentInvalidGreater");b.validate(),b.get(0).reset(),c.valid(),a=$("#ranges .error:not(input)"),equal(a.text(),"Please enter a value less than or equal to 200.","Correct error label")}),test("Min and Max type absent set by attributes less",function(){var a,b=$("#ranges"),c=$("#rangeAbsentInvalidLess");b.validate(),b.get(0).reset(),c.valid(),a=$("#ranges .error:not(input)"),equal(a.text(),"Please enter a value greater than or equal to 200.","Correct error label")}),test("Min and Max type absent set by attributes valid",function(){var a,b=$("#ranges"),c=$("#rangeAbsentValid");b.validate(),b.get(0).reset(),c.valid(),a=$("#ranges .error:not(input)"),equal(a.text(),"","Correct error label")}),test("Min and Max range set by attributes valid",function(){var a,b=$("#ranges"),c=$("#rangeRangeValid");b.validate(),b.get(0).reset(),c.valid(),a=$("#ranges .error:not(input)"),equal(a.text(),"","Correct error label")}),test("Min and Max number set by attributes valid",function(){var a,b=$("#ranges"),c=$("#rangeNumberValid");b.validate(),b.get(0).reset(),c.valid(),a=$("#ranges .error:not(input)"),equal(a.text(),"","Correct error label")}),test("Min and Max number set by attributes greater",function(){var a,b=$("#ranges"),c=$("#rangeNumberInvalidGreater");b.validate(),b.get(0).reset(),c.valid(),a=$("#ranges .error:not(input)"),equal(a.text(),"Please enter a value less than or equal to 200.","Correct error label")}),test("Min and Max number set by attributes less",function(){var a,b=$("#ranges"),c=$("#rangeNumberInvalidLess");b.validate(),b.get(0).reset(),c.valid(),a=$("#ranges .error:not(input)"),equal(a.text(),"Please enter a value greater than or equal to 50.","Correct error label")}),test("Rules allowed to have a value of zero invalid",function(){var a,b=$("#ranges"),c=$("#rangeMinZeroInvalidLess");b.validate(),b.get(0).reset(),c.valid(),a=$("#ranges .error:not(input)"),equal(a.text(),"Please enter a value greater than or equal to 0.","Correct error label")}),test("Rules allowed to have a value of zero valid equal",function(){var a,b=$("#ranges"),c=$("#rangeMinZeroValidEqual");b.validate(),b.get(0).reset(),c.valid(),a=$("#ranges .error:not(input)"),equal(a.text(),"","Correct error label")}),test("Rules allowed to have a value of zero valid greater",function(){var a,b=$("#ranges"),c=$("#rangeMinZeroValidGreater");b.validate(),b.get(0).reset(),c.valid(),a=$("#ranges .error:not(input)"),equal(a.text(),"","Correct error label")}),test("Validation triggered on radio and checkbox via click",function(){expect(2);var a=$("#radiocheckbox");a.validate(),ok(!a.valid(),"Form invalid"),$("#radiocheckbox-0-1").simulate("click"),$("#radiocheckbox-1-1").simulate("click"),ok(0===a.find("input.error").length,"Form valid")}),test("destroy()",function(){expect(2);var a=$("#form"),b=a.validate();strictEqual($(a).data("validator"),b),b.destroy(),strictEqual($(a).data("validator"),void 0)});