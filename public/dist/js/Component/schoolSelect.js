define(["require","module","exports"],function(require,module,exports){var a=(require("allunivlist"),{init:function(a,b,c,d,e,f){"undefined"!=typeof allUnivList&&null!=allUnivList&&(this.$text=a,this.unlist=allUnivList,this.$gj=b,this.$sf=c,this.$list=d,this._id=$("#_id").val(),this.$intersetText=e,this.$intersetContent=f,this.initGJ(),this.addEvent())},initGJ:function(){var a=this.unlist,b=this.$gj;$.each(a,function(a,c){b.append("<a href='javascript:void(0)' data-aid="+a+" data-name="+c.name+">"+c.name+"</a>")})},addEvent:function(){var a=this.$gj,b=this.$sf,c=this.$list,d=this.$text,e=this.$intersetContent,f=this.$intersetText,g=this;d.on("click",function(d){d.stopPropagation(),a.show(),c.hide(),b.hide()}),f.on("focus",function(a){a.stopPropagation(),e.show()}),f.on("change",function(){e.hide()}),e.find("a").on("click",function(a){a.preventDefault(),a.stopPropagation(),f.val(f.val()+","+$(this).text()),$(this).parent().hide(),$.ajax({url:"/updatePersonInfo",type:"post",data:"_id="+g._id+"&interset="+f.val(),success:function(a){},error:function(){}})}),a.delegate("a","click",function(a){a.stopPropagation();var b=$(this).data("aid"),c=$(this).data("name");g.getSheng(b,c)}),b.delegate("a","click",function(a){a.stopPropagation();var b=$(this).data("gid"),c=$(this).data("pid"),d=$(this).data("name");g.getSchool(b,c,d)}),c.delegate("a","click",function(e){var f=g.school;e.preventDefault(),a.hide(),c.hide(),b.hide(),f+=" - "+$(this).text(),d.val(f),$.ajax({url:"/updatePersonInfo",type:"post",data:"_id="+g._id+"&school="+f,success:function(a){},error:function(){}})})},getSheng:function(a,b){this.school=b;var c=this.unlist,d=this.$sf,e=this.$list;d.show(),e.html(""),d.html(""),0==c[a].provs.length?d.append("很抱歉！暂时没有数据（只提供了中国和美国的学校信息）"):$.each(c[a].provs,function(b,c){d.append("<a href='javascript:void(0);'  data-gid="+a+" data-pid="+b+" data-name="+c.name+" >"+c.name+"</a>")})},getSchool:function(a,b,c){var d=(this.$gj,this.$sf,this.$list),e=this.unlist;this.school=this.school.substring(0,2),this.school+=" - "+c,d.show(),d.html(""),$.each(e[a].provs[b].univs,function(a,b){d.append("<a href='#'>"+b.name+"</a>")}),d.append("<br style='clear:both;' />")},getRandomColor:function(){return"#"+("00000"+(16777216*Math.random()<<0).toString(16)).substr(-6)}});module.exports=a});