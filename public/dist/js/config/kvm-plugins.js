!function(){kvm.module.registerPlugin(function(a){a.registerPathMaper(function(){var a=kvm.module.data("alias");kvm.isAbsolutePath(this.id)||a[this.id]&&(this.uri=a[this.id],this._parser())})})}(),function(){kvm.module.registerPlugin(function(a){a.registerModuleParser(function(){function b(a){var b,c;for(b=0;b<a.length;b++)for(c=b+1;c<a.length;c++)a[b].equal(a[c])&&a.splice(c,1);return a}function c(a){var b=!1;return a.forEach(function(a){return"require"==a.id?(b=!0,!1):void 0}),b}this.injectCommonjs=function(){var b=this;this.injectors.exports=function(){return b.module.exports=b.module.exports||{},b.module.exports},this.injectors.module=function(){return b.module},this.injectors.require=function(){return function(b){var c=a.createPath(b),d=c.getModule();return d&&d.module&&d.module.exports?d.module.exports:{}}}},this.collectDeps=function(){var c;kvm.isFunction(this.factory)&&(c=this.parseDependencies(this.factory.toString()),c=c.map(function(b){return a.createPath(b)}),this.depPaths=b(this.depPaths.concat(c)))},this.parseDependencies=function(a){function b(){k=a.charAt(l++)}function c(){return/\s/.test(k)}function d(){return'"'==k||"'"==k}function e(){var c=l,d=k,e=a.indexOf(d,c);if(-1==e)l=m;else if("\\"!=a.charAt(e-1))l=e+1;else for(;m>l;)if(b(),"\\"==k)l++;else if(k==d)break;o&&(r.push(a.slice(c,l-1)),o=0)}function f(){for(l--;m>l;)if(b(),"\\"==k)l++;else{if("/"==k)break;if("["==k)for(;m>l;)if(b(),"\\"==k)l++;else if("]"==k)break}}function g(){return/[a-z_$]/i.test(k)}function h(){var b=a.slice(l-1),c=/^[\w$]+/.exec(b)[0];p={"if":1,"for":1,"while":1,"with":1}[c],n={"break":1,"case":1,"continue":1,"debugger":1,"delete":1,"do":1,"else":1,"false":1,"if":1,"in":1,"instanceof":1,"return":1,"typeof":1,"void":1}[c],o=/^require\s*\(\s*(['"]).+?\1\s*\)/.test(b),o?(c=/^require\s*\(\s*['"]/.exec(b)[0],l+=c.length-2):l+=/^[\w$]+(?:\s*\.\s*[\w$]+)*/.exec(b)[0].length-1}function i(){return/\d/.test(k)||"."==k&&/\d/.test(a.charAt(l))}function j(){var b,c=a.slice(l-1);b="."==k?/^\.\d+(?:E[+-]?\d*)?\s*/i.exec(c)[0]:/^0x[\da-f]*/i.test(c)?/^0x[\da-f]*\s*/i.exec(c)[0]:/^\d+\.?\d*(?:E[+-]?\d*)?\s*/i.exec(c)[0],l+=b.length-1,n=0}if(-1==a.indexOf("require"))return[];for(var k,l=0,m=a.length,n=1,o=0,p=0,q=[],r=[];m>l;)b(),c()||(d()?(e(),n=1):"/"==k?(b(),"/"==k?(l=a.indexOf("\n",l),-1==l&&(l=a.length)):"*"==k?(l=a.indexOf("*/",l),-1==l?l=m:l+=2):n?(f(),n=0):(l--,n=1)):g()?h():i()?j():"("==k?(q.push(p),n=1):")"==k?n=q.pop():(n="]"!=k,o=0));return r},this.injectCommonjs(),this.factory&&c(this.depPaths)&&this.collectDeps()})})}(),function(){kvm.module.registerPlugin(function(a){a.registerDriverLoader("css",function(a,b){var c=document,d=c.head||c.getElementsByTagName("head")[0]||c.documentElement,e=window.document.createElement("link"),f=window.document.styleSheets,g=this;e.rel="stylesheet",e.href=a,e.media="only x",b&&(e.onload=function(){b&&b(null,e)},e.onerror=function(){b&&b(!0)}),d.appendChild(e),e.onloadcssdefined=function(b){for(var c,d=0;d<f.length;d++)f[d].href&&f[d].href.indexOf(a)>-1&&(c=!0);c?b():setTimeout(function(){e.onloadcssdefined(b)})},e.onloadcssdefined(function(){e.media=g.path.query&&g.path.query.media||"all"})}),a.registerDriverLoaded(function(a,b){var c=this.path;"css"!=c.ext||a||kvm.module.define(c.id,function(){return b})})})}(),function(){kvm.module.registerPlugin(function(a){var b=kvm.module.data();a.registerPathParser(function(){var a,c,d=b.baseUrl,e=b.packages,f=this.uri||this.id;f&&(c=f.indexOf("/"),a=f.substr(0,c),e&&e[a]&&(this.baseUrl=e[a].uri||e[a].url||d,this.uri=f.substr(c+1),this._parseVars()))})})}(),function(){kvm.module.registerPlugin(function(a){var b=kvm.module.data();a.registerPathMaper(function(){var a=b.shims[this.id];a&&(this.uri=a.uri||a.url,this._parser())}),a.registerDriverBeforeLoad(function(){var c=this.path,d=b.shims[c.id];d&&d.exports&&!d.factory&&window[d.exports]&&(this.module=a.createModule(c.id,function(){return window[d.exports]}))}),a.registerDriverLoaded(function(){var a=this.path,c=b.shims[a.id];c&&!a.getModule()&&(kvm.isFunction(c.factory)||kvm.isArray(c.factory)?kvm.module.define(a.id,c.factory):kvm.module.define(a.id,function(){return window[c.exports]}))})})}();