!function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};a[g][0].call(j.exports,function(b){var c=a[g][1][b];return e(c?c:b)},j,j.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){b.exports={"default":a("core-js/library/fn/object/assign"),__esModule:!0}},{"core-js/library/fn/object/assign":9}],2:[function(a,b){b.exports={"default":a("core-js/library/fn/object/get-own-property-descriptor"),__esModule:!0}},{"core-js/library/fn/object/get-own-property-descriptor":10}],3:[function(a,b){b.exports={"default":a("core-js/library/fn/promise"),__esModule:!0}},{"core-js/library/fn/promise":11}],4:[function(a,b,c){"use strict";c["default"]=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},c.__esModule=!0},{}],5:[function(a,b,c){"use strict";c["default"]=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),c.__esModule=!0},{}],6:[function(a,b,c){"use strict";var d=a("babel-runtime/core-js/object/get-own-property-descriptor")["default"];c["default"]=function(a,b,c){for(var e=!0;e;){i=k=j=void 0,e=!1;var f=a,g=b,h=c,i=d(f,g);if(void 0!==i){if("value"in i)return i.value;var j=i.get;return void 0===j?void 0:j.call(h)}var k=Object.getPrototypeOf(f);if(null===k)return void 0;a=k,b=g,c=h,e=!0}},c.__esModule=!0},{"babel-runtime/core-js/object/get-own-property-descriptor":2}],7:[function(a,b,c){"use strict";c["default"]=function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(a.__proto__=b)},c.__esModule=!0},{}],8:[function(a,b,c){"use strict";c["default"]=function(a){return a&&a.__esModule?a:{"default":a}},c.__esModule=!0},{}],9:[function(a,b){a("../../modules/es6.object.assign"),b.exports=a("../../modules/$").core.Object.assign},{"../../modules/$":21,"../../modules/es6.object.assign":29}],10:[function(a,b){a("../../modules/es6.object.statics-accept-primitives"),b.exports=a("../../modules/$").core.Object.getOwnPropertyDescriptor},{"../../modules/$":21,"../../modules/es6.object.statics-accept-primitives":30}],11:[function(a,b){a("../modules/es6.string.iterator"),a("../modules/web.dom.iterable"),a("../modules/es6.promise"),b.exports=a("../modules/$").core.Promise},{"../modules/$":21,"../modules/es6.promise":31,"../modules/es6.string.iterator":32,"../modules/web.dom.iterable":33}],12:[function(a,b){function c(a,b,c){if(!a)throw TypeError(c?b+c:b)}var d=a("./$");c.def=d.assertDefined,c.fn=function(a){if(!d.isFunction(a))throw TypeError(a+" is not a function!");return a},c.obj=function(a){if(!d.isObject(a))throw TypeError(a+" is not an object!");return a},c.inst=function(a,b,c){if(!(a instanceof b))throw TypeError(c+": use the 'new' operator!");return a},b.exports=c},{"./$":21}],13:[function(a,b){var c=a("./$");b.exports=Object.assign||function(a){for(var b=Object(c.assertDefined(a)),d=arguments.length,e=1;d>e;)for(var f,g=c.ES5Object(arguments[e++]),h=c.getKeys(g),i=h.length,j=0;i>j;)b[f=h[j++]]=g[f];return b}},{"./$":21}],14:[function(a,b){function c(a){return f.call(a).slice(8,-1)}var d=a("./$"),e=a("./$.wks")("toStringTag"),f={}.toString;c.classof=function(a){var b,d;return void 0==a?void 0===a?"Undefined":"Null":"string"==typeof(d=(b=Object(a))[e])?d:c(b)},c.set=function(a,b,c){a&&!d.has(a=c?a:a.prototype,e)&&d.hide(a,e,b)},b.exports=c},{"./$":21,"./$.wks":27}],15:[function(a,b){var c=a("./$.assert").fn;b.exports=function(a,b,d){if(c(a),~d&&void 0===b)return a;switch(d){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)}}return function(){return a.apply(b,arguments)}}},{"./$.assert":12}],16:[function(a,b){function c(a,b){return function(){return a.apply(b,arguments)}}function d(a,b,i){var j,k,l,m,n=a&d.G,o=n?f:a&d.S?f[b]:(f[b]||{}).prototype,p=n?g:g[b]||(g[b]={});n&&(i=b);for(j in i)k=!(a&d.F)&&o&&j in o,k&&j in p||(l=k?o[j]:i[j],n&&!h(o[j])?m=i[j]:a&d.B&&k?m=c(l,f):a&d.W&&o[j]==l?!function(a){m=function(b){return this instanceof a?new a(b):a(b)},m.prototype=a.prototype}(l):m=a&d.P&&h(l)?c(Function.call,l):l,e.hide(p,j,m))}var e=a("./$"),f=e.g,g=e.core,h=e.isFunction;d.F=1,d.G=2,d.S=4,d.P=8,d.B=16,d.W=32,b.exports=d},{"./$":21}],17:[function(a,b){b.exports=function(a){return a.FW=!1,a.path=a.core,a}},{}],18:[function(a,b){b.exports=function(a,b,c){var d=void 0===c;switch(b.length){case 0:return d?a():a.call(c);case 1:return d?a(b[0]):a.call(c,b[0]);case 2:return d?a(b[0],b[1]):a.call(c,b[0],b[1]);case 3:return d?a(b[0],b[1],b[2]):a.call(c,b[0],b[1],b[2]);case 4:return d?a(b[0],b[1],b[2],b[3]):a.call(c,b[0],b[1],b[2],b[3]);case 5:return d?a(b[0],b[1],b[2],b[3],b[4]):a.call(c,b[0],b[1],b[2],b[3],b[4])}return a.apply(c,b)}},{}],19:[function(a,b){var c=a("./$.wks")("iterator"),d=!1;try{var e=[7][c]();e["return"]=function(){d=!0},Array.from(e,function(){throw 2})}catch(f){}b.exports=function(a){if(!d)return!1;var b=!1;try{var e=[7],f=e[c]();f.next=function(){b=!0},e[c]=function(){return f},a(e)}catch(g){}return b}},{"./$.wks":27}],20:[function(a,b){"use strict";function c(a,b){h.hide(a,m,b),n in[]&&h.hide(a,n,b)}function d(a,b,d,e){var f=a.prototype,g=f[m]||f[n]||e&&f[e]||d;if(h.FW&&c(f,g),g!==d){var i=h.getProto(g.call(new a));j.set(i,b+" Iterator",!0),h.FW&&h.has(f,n)&&c(i,h.that)}return o[b]=g,o[b+" Iterator"]=h.that,g}function e(a){var b=h.g.Symbol,c=a[b&&b.iterator||n],d=c||a[m]||o[j.classof(a)];return l(d.call(a))}function f(a){var b=a["return"];void 0!==b&&l(b.call(a))}function g(a,b,c,d){try{return d?b(l(c)[0],c[1]):b(c)}catch(e){throw f(a),e}}var h=a("./$"),i=a("./$.ctx"),j=a("./$.cof"),k=a("./$.def"),l=a("./$.assert").obj,m=a("./$.wks")("iterator"),n="@@iterator",o={},p={},q="keys"in[]&&!("next"in[].keys());c(p,h.that);var r=b.exports={BUGGY:q,Iterators:o,prototype:p,step:function(a,b){return{value:b,done:!!a}},stepCall:g,close:f,is:function(a){var b=Object(a),c=h.g.Symbol,d=c&&c.iterator||n;return d in b||m in b||h.has(o,j.classof(b))},get:e,set:c,create:function(a,b,c,d){a.prototype=h.create(d||r.prototype,{next:h.desc(1,c)}),j.set(a,b+" Iterator")},define:d,std:function(a,b,c,e,f,g,i){function j(a){return function(){return new c(this,a)}}r.create(c,b,e);var l,m,n=j("key+value"),o=j("value"),p=a.prototype;if("value"==f?o=d(a,b,o,"values"):n=d(a,b,n,"entries"),f&&(l={entries:n,keys:g?o:j("key"),values:o},k(k.P+k.F*q,b,l),i))for(m in l)m in p||h.hide(p,m,l[m])},forOf:function(a,b,c,d){for(var h,j=e(a),k=i(c,d,b?2:1);!(h=j.next()).done;)if(g(j,k,h.value,b)===!1)return f(j)}}},{"./$":21,"./$.assert":12,"./$.cof":14,"./$.ctx":15,"./$.def":16,"./$.wks":27}],21:[function(a,b){"use strict";function c(a){return isNaN(a=+a)?0:(a>0?o:n)(a)}function d(a,b){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:b}}function e(a,b,c){return a[b]=c,a}function f(a){return r?function(b,c,e){return t.setDesc(b,c,d(a,e))}:e}function g(a){return null!==a&&("object"==typeof a||"function"==typeof a)}function h(a){return"function"==typeof a}function i(a){if(void 0==a)throw TypeError("Can't call method on  "+a);return a}var j="undefined"!=typeof self?self:Function("return this")(),k={},l=Object.defineProperty,m={}.hasOwnProperty,n=Math.ceil,o=Math.floor,p=Math.max,q=Math.min,r=!!function(){try{return 2==l({},"a",{get:function(){return 2}}).a}catch(a){}}(),s=f(1),t=b.exports=a("./$.fw")({g:j,core:k,html:j.document&&document.documentElement,isObject:g,isFunction:h,it:function(a){return a},that:function(){return this},toInteger:c,toLength:function(a){return a>0?q(c(a),9007199254740991):0},toIndex:function(a,b){return a=c(a),0>a?p(a+b,0):q(a,b)},has:function(a,b){return m.call(a,b)},create:Object.create,getProto:Object.getPrototypeOf,DESC:r,desc:d,getDesc:Object.getOwnPropertyDescriptor,setDesc:l,getKeys:Object.keys,getNames:Object.getOwnPropertyNames,getSymbols:Object.getOwnPropertySymbols,assertDefined:i,ES5Object:Object,toObject:function(a){return t.ES5Object(i(a))},hide:s,def:f(0),set:j.Symbol?e:s,mix:function(a,b){for(var c in b)s(a,c,b[c]);return a},each:[].forEach});"undefined"!=typeof __e&&(__e=k),"undefined"!=typeof __g&&(__g=j)},{"./$.fw":17}],22:[function(a,b){var c=a("./$");b.exports=function(b){c.DESC&&c.FW&&c.setDesc(b,a("./$.wks")("species"),{configurable:!0,get:c.that})}},{"./$":21,"./$.wks":27}],23:[function(a,b){"use strict";var c=a("./$");b.exports=function(a){return function(b){var d,e,f=String(c.assertDefined(this)),g=c.toInteger(b),h=f.length;return 0>g||g>=h?a?"":void 0:(d=f.charCodeAt(g),55296>d||d>56319||g+1===h||(e=f.charCodeAt(g+1))<56320||e>57343?a?f.charAt(g):d:a?f.slice(g,g+2):(d-55296<<10)+(e-56320)+65536)}}},{"./$":21}],24:[function(a,b){"use strict";function c(){var a=+this;if(h.has(w,a)){var b=w[a];delete w[a],b()}}function d(a){c.call(a.data)}var e,f,g,h=a("./$"),i=a("./$.ctx"),j=a("./$.cof"),k=a("./$.invoke"),l=h.g,m=h.isFunction,n=h.html,o=l.document,p=l.process,q=l.setImmediate,r=l.clearImmediate,s=l.postMessage,t=l.addEventListener,u=l.MessageChannel,v=0,w={},x="onreadystatechange";m(q)&&m(r)||(q=function(a){for(var b=[],c=1;arguments.length>c;)b.push(arguments[c++]);return w[++v]=function(){k(m(a)?a:Function(a),b)},e(v),v},r=function(a){delete w[a]},"process"==j(p)?e=function(a){p.nextTick(i(c,a,1))}:t&&m(s)&&!l.importScripts?(e=function(a){s(a,"*")},t("message",d,!1)):m(u)?(f=new u,g=f.port2,f.port1.onmessage=d,e=i(g.postMessage,g,1)):e=o&&x in o.createElement("script")?function(a){n.appendChild(o.createElement("script"))[x]=function(){n.removeChild(this),c.call(a)}}:function(a){setTimeout(i(c,a,1),0)}),b.exports={set:q,clear:r}},{"./$":21,"./$.cof":14,"./$.ctx":15,"./$.invoke":18}],25:[function(a,b){function c(a){return"Symbol("+a+")_"+(++d+Math.random()).toString(36)}var d=0;c.safe=a("./$").g.Symbol||c,b.exports=c},{"./$":21}],26:[function(a,b){var c=a("./$"),d=a("./$.wks")("unscopables");!c.FW||d in[]||c.hide(Array.prototype,d,{}),b.exports=function(a){c.FW&&([][d][a]=!0)}},{"./$":21,"./$.wks":27}],27:[function(a,b){var c=a("./$").g,d={};b.exports=function(b){return d[b]||(d[b]=c.Symbol&&c.Symbol[b]||a("./$.uid").safe("Symbol."+b))}},{"./$":21,"./$.uid":25}],28:[function(a){var b=a("./$"),c=a("./$.unscope"),d=a("./$.uid").safe("iter"),e=a("./$.iter"),f=e.step,g=e.Iterators;e.std(Array,"Array",function(a,c){b.set(this,d,{o:b.toObject(a),i:0,k:c})},function(){var a=this[d],b=a.o,c=a.k,e=a.i++;return!b||e>=b.length?(a.o=void 0,f(1)):"key"==c?f(0,e):"value"==c?f(0,b[e]):f(0,[e,b[e]])},"value"),g.Arguments=g.Array,c("keys"),c("values"),c("entries")},{"./$":21,"./$.iter":20,"./$.uid":25,"./$.unscope":26}],29:[function(a){var b=a("./$.def");b(b.S,"Object",{assign:a("./$.assign")})},{"./$.assign":13,"./$.def":16}],30:[function(a){function b(a,b){var g=(c.core.Object||{})[a]||Object[a],h=0,i={};i[a]=1==b?function(a){return e(a)?g(a):a}:2==b?function(a){return e(a)?g(a):!0}:3==b?function(a){return e(a)?g(a):!1}:4==b?function(a,b){return g(f(a),b)}:5==b?function(a){return g(Object(c.assertDefined(a)))}:function(a){return g(f(a))};try{g("z")}catch(j){h=1}d(d.S+d.F*h,"Object",i)}var c=a("./$"),d=a("./$.def"),e=c.isObject,f=c.toObject;b("freeze",1),b("seal",1),b("preventExtensions",1),b("isFrozen",2),b("isSealed",2),b("isExtensible",3),b("getOwnPropertyDescriptor",4),b("getPrototypeOf",5),b("keys"),b("getOwnPropertyNames")},{"./$":21,"./$.def":16}],31:[function(a){"use strict";function b(a){var b=A(a)[o];return void 0!=b?b:a}function c(a){var b;return y(a)&&(b=a.then),x(b)?b:!1}function d(a){var b,c=a[p],e=c.c,f=0;if(c.h)return!1;for(;e.length>f;)if(b=e[f++],b.fail||!d(b.P))return!1;return!0}function e(a,b){var e=a.c;(b||e.length)&&u(function(){var f=a.p,g=a.v,h=1==a.s,i=0;if(b&&d(f))setTimeout(function(){d(f)&&("process"==k(t)?t.emit("unhandledRejection",g,f):s.console&&x(console.error)&&console.error("Unhandled promise rejection",g))},1e3);else for(;e.length>i;)!function(b){var d,e,f=h?b.ok:b.fail;try{f?(h||(a.h=!0),d=f===!0?g:f(g),d===b.P?b.rej(TypeError(r+"-chain cycle")):(e=c(d))?e.call(d,b.res,b.rej):b.res(d)):b.rej(g)}catch(i){b.rej(i)}}(e[i++]);e.length=0})}function f(a){var b=this;b.d||(b.d=!0,b=b.r||b,b.v=a,b.s=2,e(b,!0))}function g(a){var b,d,h=this;if(!h.d){h.d=!0,h=h.r||h;try{(b=c(a))?(d={r:h,d:!1},b.call(a,j(g,d,1),j(f,d,1))):(h.v=a,h.s=1,e(h))}catch(i){f.call(d||{r:h,d:!1},i)}}}var h,i=a("./$"),j=a("./$.ctx"),k=a("./$.cof"),l=a("./$.def"),m=a("./$.assert"),n=a("./$.iter"),o=a("./$.wks")("species"),p=a("./$.uid").safe("record"),q=n.forOf,r="Promise",s=i.g,t=s.process,u=t&&t.nextTick||a("./$.task").set,v=s[r],w=v,x=i.isFunction,y=i.isObject,z=m.fn,A=m.obj;x(v)&&x(v.resolve)&&v.resolve(h=new v(function(){}))==h||(v=function(a){z(a);var b={p:m.inst(this,v,r),c:[],s:0,d:!1,v:void 0,h:!1};i.hide(this,p,b);try{a(j(g,b,1),j(f,b,1))}catch(c){f.call(b,c)}},i.mix(v.prototype,{then:function(a,b){var c=A(A(this).constructor)[o],d={ok:x(a)?a:!0,fail:x(b)?b:!1},f=d.P=new(void 0!=c?c:v)(function(a,b){d.res=z(a),d.rej=z(b)}),g=this[p];return g.c.push(d),g.s&&e(g),f},"catch":function(a){return this.then(void 0,a)}})),l(l.G+l.W+l.F*(v!=w),{Promise:v}),k.set(v,r),a("./$.species")(v),l(l.S,r,{reject:function(a){return new(b(this))(function(b,c){c(a)})},resolve:function(a){return y(a)&&p in a&&i.getProto(a)===this.prototype?a:new(b(this))(function(b){b(a)})}}),l(l.S+l.F*!a("./$.iter-detect")(function(a){v.all(a)["catch"](function(){})}),r,{all:function(a){var c=b(this),d=[];return new c(function(b,e){q(a,!1,d.push,d);var f=d.length,g=Array(f);f?i.each.call(d,function(a,d){c.resolve(a).then(function(a){g[d]=a,--f||b(g)},e)}):b(g)})},race:function(a){var c=b(this);return new c(function(b,d){q(a,!1,function(a){c.resolve(a).then(b,d)})})}})},{"./$":21,"./$.assert":12,"./$.cof":14,"./$.ctx":15,"./$.def":16,"./$.iter":20,"./$.iter-detect":19,"./$.species":22,"./$.task":24,"./$.uid":25,"./$.wks":27}],32:[function(a){var b=a("./$").set,c=a("./$.string-at")(!0),d=a("./$.uid").safe("iter"),e=a("./$.iter"),f=e.step;e.std(String,"String",function(a){b(this,d,{o:String(a),i:0})},function(){var a,b=this[d],e=b.o,g=b.i;return g>=e.length?f(1):(a=c.call(e,g),b.i+=a.length,f(0,a))})},{"./$":21,"./$.iter":20,"./$.string-at":23,"./$.uid":25}],33:[function(a){a("./es6.array.iterator");var b=a("./$"),c=a("./$.iter").Iterators,d=a("./$.wks")("iterator"),e=c.Array,f=b.g.NodeList;!b.FW||!f||d in f.prototype||b.hide(f.prototype,d,e),c.NodeList=e},{"./$":21,"./$.iter":20,"./$.wks":27,"./es6.array.iterator":28}],34:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/inherits")["default"],e=a("babel-runtime/helpers/get")["default"],f=a("babel-runtime/helpers/create-class")["default"],g=a("babel-runtime/helpers/class-call-check")["default"],h=a("babel-runtime/core-js/promise")["default"],i=a("babel-runtime/core-js/object/assign")["default"],j=a("babel-runtime/helpers/interop-require-wildcard")["default"];Object.defineProperty(c,"__esModule",{value:!0});var k=a("./utils"),l=j(k),m=a("./emitter"),n=j(m),o=new n["default"],p={baseUrl:"",vars:{},packages:{},alias:{},shims:{},version:""},q={MODULES:{},insert:function(a){var b=a.path,c=a.path.id||a.path.uri,d=s.getDriver(b);return this.MODULES[c]||(this.MODULES[c]=a,d&&d.$emit("loaded",a)),this.MODULES[c]},find:function(a){return this.MODULES[a.id||a.uri]||this.MODULES[a.id]||this.MODULES[a.uri]}},r=function(a){function b(a,c,d){g(this,b),e(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.sender=a,this.reqs=l["default"].isArray(c)?c:[c],this.drivers=[],this.results=[],this.callback=d,this._parseReqs(),this.send()}return d(b,a),f(b,[{key:"_createDriver",value:function(a){var b=s.getDriver(a),c=this;if(!b){if(b=new s(a),b.beforeLoad(),b.module)return c._done(b.module);this.drivers.push(b)}return b.module?c._done(b.module):b.$on("loaded",function(a){b.module=a,c._done(a)}),this}},{key:"_parseReqs",value:function(){var a=this,b=void 0;return this.reqs=this.reqs.filter(function(a){return!!a}),this.reqs.length>0?this.reqs.forEach(function(c){b=a.sender.getInjector(c),b=b||c.getModule(),b?a._done(b):a._createDriver(c)}):a.callback([]),this}},{key:"_checkDone",value:function(){return this.reqs.length==this.results.length}},{key:"_done",value:function(a){return this.results.push(a),this._checkDone()&&l["default"].isFunction(this.callback)&&this.callback(this.results),this}},{key:"send",value:function(){return this.drivers.forEach(function(a){a.load()}),this}}],[{key:"fetch",value:function(a,c){return c=l["default"].isArray(c)?c:[c],new h(function(d){new b(a,c,function(a){d(a)})})}}]),b}(n["default"]),s=function(a){function b(a){g(this,b),e(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.path=a,this.module=null,b.getDriver(a)||b.addDriver(this)}return d(b,a),f(b,[{key:"beforeLoad",value:function(){o.$emit("DRIVER_BEFORE_LOAD",this)}},{key:"load",value:function(){var a=this.path,b=a.uri;b=l["default"].addQueryString(b,i({version:p.version},a.query)),b=l["default"].addHashString(b,a.hash),"js"!=a.ext?o.$emit("DRIVER_LOADER_"+a.ext.toLocaleUpperCase(),this):this._loadJS(b,this.loaded.bind(this))}},{key:"loaded",value:function(a,b){var c=this.path;"js"!=c.ext?w.define(c.id,function(){return b}):o.$emit("DRIVER_LOADED",this,a,b)}},{key:"_loadJS",value:function(a,b){function c(a,b){function c(c){a.onload=a.onerror=a.onreadystatechange=null,w.data("debug")&&e.removeChild(a),a=null,b&&b(c)}var d="onload"in a;d?(a.onload=c,a.onerror=function(){c(!0)}):a.onreadystatechange=function(){/loaded|complete/.test(a.readyState)&&c()}}var d=document,e=d.head||d.getElementsByTagName("head")[0]||d.documentElement,f=e.getElementsByTagName("base")[0],g=d.createElement("script");g.async=!0,g.src=a,c(g,b),f?e.insertBefore(g,f):e.appendChild(g)}}],[{key:"getDriver",value:function(a){return b.DRIVERS[a.uri]}},{key:"addDriver",value:function(a){b.DRIVERS[a.path.uri]=a}},{key:"registerDriverLoaded",value:function(a){l["default"].isFunction(a)&&o.$on("DRIVER_LOADED",function(b){a.call(b)})}},{key:"registerDriverLoader",value:function(a,b){l["default"].isFunction(b)&&(a=a.trim(),a=a.toUpperCase(),o.$one("DRIVER_LOADER_"+a,function(a){b.call(a,a.path.uri,a.loaded.bind(a))}))}},{key:"registerDriverBeforeLoad",value:function(a){l["default"].isFunction(a)&&o.$on("DRIVER_BEFORE_LOAD",function(b){a.call(b)})}}]),b}(n["default"]);s.DRIVERS={};var t=function(a){function b(a,c){g(this,b),e(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.baseUrl=c||p.baseUrl,this.id=a||"",this._initId(),this._maper(),this._parser(),this._initUri()}return d(b,a),f(b,[{key:"_initId",value:function(){if(this.id){var a=this.id;this.query=l["default"].getQuery(a),this.hash=l["default"].getHash(this.id),this.id=this.id.replace(/(#|\?).*/,"")}}},{key:"_initUri",value:function(){this.baseUrl=this.baseUrl.replace(/\/$/,"")+"/",this.uri=this.uri?l["default"].resolvePath(this.baseUrl,this.uri):this.id?l["default"].resolvePath(this.baseUrl,this.id):l["default"].getCurrentScript().uri,this._initExt()}},{key:"_initExt",value:function(){var a=this.uri.match(/\.(\w+)$/);a&&a[1]?(a=a[1].toLocaleLowerCase(),-1!=b.__EXTS__.indexOf(a)?this.ext=a:(this.$emit("FILE_EXTS_PARSER",this),b.__EXTS__.indexOf(this.ext)||(this.ext="js"))):(this.ext="js",this.uri+=".js")}},{key:"_maper",value:function(){this.id&&o.$emit("PATH_MAPER",this)}},{key:"_parser",value:function(){this.id&&(this._parseVars(),o.$emit("PATH_PARSER",this))}},{key:"_parseVars",value:function(){this.baseUrl=this.template(this.baseUrl),this.id=this.template(this.id),this.uri=this.uri?this.template(this.uri):""}},{key:"getModule",value:function(){return q.find(this)}},{key:"equal",value:function(a){return this.id&&this.id==a.id||this.uri&&this.uri==a.uri}},{key:"getMap",value:function(a){var b=null,c=this;if(l["default"].isArray(a))a.forEach(function(a){return a.equal&&a.equal(c)||a.path&&a.path.equal(c)?(b=a,!1):void 0});else if(l["default"].isObject(a))return a&&a[this.id||this.uri];return b}},{key:"template",value:function(a){if(!l["default"].isString(a))throw new Error("路径类型错误");var b=/\{([^{}]+)\}/g,c=void 0,d=this;return c=a.replace(b,function(a,b){return p.vars&&p.vars[b]?p.vars[b]:b}),b.test(c)?d.template(c):c}}],[{key:"registerFileExtParser",value:function(a){l["default"].isFunction(a)&&o.$on("FILE_EXTS_PARSER",function(b){a.call(b)})}},{key:"registerPathParser",value:function(a){l["default"].isFunction(a)&&o.$on("PATH_PARSER",function(b){a.call(b)})}},{key:"registerPathMaper",value:function(a){l["default"].isFunction(a)&&o.$on("PATH_MAPER",function(b){a.call(b)})}},{key:"createPath",value:function(a,c){return new b(a,c)}}]),b}(n["default"]);t.__EXTS__=["js","css","json","jsonp","tpl","html"];var u=function(a){function b(a){g(this,b),e(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),l["default"].options(this,{path:null,depPaths:[],factory:null,injectors:{},installed:!1,module:{exports:null}},a),o.$emit("MODULE_PARSER",this)}return d(b,a),f(b,[{key:"getInjector",value:function(a){var c=this.injectors[a.id];return c?b.createModule(a.id,c):void 0}},{key:"invoke",value:function(){var a=this;return new h(function(b){if(a.installed)b(h.resolve(a.module.exports));else if(a.factory)b(h.resolve(a._inject()));else{if(!a.path||a.factory)throw new Error("模块不符合规范!");b(r.fetch(a,a.path).then(function(a){return h.resolve(a[0]._inject())}))}})}},{key:"_collectDeps",value:function(){var a=this,b=[],c=void 0;return r.fetch(this,this.depPaths).then(function(d){return new h(function(e){a.depPaths.length>0?a.depPaths.forEach(function(f,g){c=f.getMap(d),c&&(b[g]=c.invoke(),b.length==a.depPaths.length&&e(h.all(b)))}):e(h.all([]))})})}},{key:"_inject",value:function(){var a=this;return this._collectDeps().then(function(b){var c=a.factory.apply(null,b);return a.module.exports?c=a.module.exports:a.module.exports=c,a.installed=!0,c})}}],[{key:"createModule",value:function(){for(var a=arguments.length,c=Array(a),d=0;a>d;d++)c[d]=arguments[d];return new b(b.parseMeta.apply(null,c))}},{key:"parseMeta",value:function(){for(var a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];var d={},e=!1;return l["default"].isBoolean(b[0])&&(e=b[0],b=b.slice(1)),b.forEach(function(a){l["default"].isFunction(a)?d.factory=a:l["default"].isArray(a)?l["default"].isFunction(a[a.length-1])?(d.factory=a[a.length-1],d.depPaths=a.slice(0,a.length-1).map(function(a){return new t(a)})):d.depPaths=a.map(function(a){return new t(a)}):l["default"].isString(a)?d.path=new t(a):l["default"].isObject(a)&&(d.injectors=a)}),!d.path&&e&&(d.path=new t),d}},{key:"registerModuleParser",value:function(a){l["default"].isFunction(a)&&o.$on("MODULE_PARSER",function(b){a.call(b)})}}]),b}(n["default"]),v={registerModuleParser:u.registerModuleParser,registerDriverLoader:s.registerDriverLoader,registerDriverLoaded:s.registerDriverLoaded,registerDriverBeforeLoad:s.registerDriverBeforeLoad,registerFileExtParser:t.registerFileExtParser,registerPathParser:t.registerPathParser,registerPathMaper:t.registerPathMaper,createModule:u.createModule,createPath:t.createPath},w={config:function(a){l["default"].options(p,a)},data:function(a){return p[a]?p[a]:p},define:function(){for(var a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];return q.insert(u.createModule.apply(null,[!0].concat(b))),this},invoke:function(){for(var a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];return u.createModule.apply(null,b).invoke()},use:function(a,b){var c=u.createModule(a);c.invoke(function(a){l["default"].isFunction(b)&&b(a)})["catch"](function(a){throw a})},registerPlugin:function(a){l["default"].isFunction(a)&&a.call(this,v)}};c["default"]=w,b.exports=c["default"]},{"./emitter":35,"./utils":37,"babel-runtime/core-js/object/assign":1,"babel-runtime/core-js/promise":3,"babel-runtime/helpers/class-call-check":4,"babel-runtime/helpers/create-class":5,"babel-runtime/helpers/get":6,"babel-runtime/helpers/inherits":7,"babel-runtime/helpers/interop-require-wildcard":8}],35:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/create-class")["default"],e=a("babel-runtime/helpers/class-call-check")["default"],f=a("babel-runtime/helpers/interop-require-wildcard")["default"];Object.defineProperty(c,"__esModule",{value:!0});var g=a("./utils"),h=f(g),i=function(){function a(b){e(this,a),this.$$EVENTS=b?b:{}}return d(a,[{key:"$on",value:function(a,b){var c=this;return a.split(",").forEach(function(a){h["default"].isFunction(b)&&(c.$$EVENTS[a]&&h["default"].isArray(c.$$EVENTS[a])?c.$$EVENTS[a].push(b):c.$$EVENTS[a]=[b])}),this}},{key:"$one",value:function(a,b){var c=this;return a.split(",").forEach(function(a){h["default"].isFunction(b)&&(c.$$EVENTS[a]||(c.$$EVENTS[a]=[b]))}),this}},{key:"$emit",value:function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;b>d;d++)c[d-1]=arguments[d];var e=this.$$EVENTS[a];if(e&&h["default"].isArray(e))for(var f=0;f<e.length;f++)e[f].apply(null,c);return this}},{key:"$remove",value:function(a,b){var c=this.$$EVENTS[a];if(c&&h["default"].isArray(c))if(b)for(var d=c.length-1;d>=0;d--)b===c[d]&&c.splice(d,1);else delete this.$$EVENTS[a];return this}}]),a}();c["default"]=i,b.exports=c["default"]},{"./utils":37,"babel-runtime/helpers/class-call-check":4,"babel-runtime/helpers/create-class":5,"babel-runtime/helpers/interop-require-wildcard":8}],36:[function(a){"use strict";var b=a("babel-runtime/core-js/object/assign")["default"],c=a("babel-runtime/helpers/interop-require-wildcard")["default"],d=a("./utils"),e=c(d),f=a("./emitter"),g=c(f),h=a("./core"),i=c(h),j={};window.kvm=window.KVM=j,window.kvm.Module=window.kvm.module=i["default"],i["default"].define.amd=!0,window.define=i["default"].define,b(j,e["default"]),i["default"].define("$emitter",function(){return g["default"]})},{"./core":34,"./emitter":35,"./utils":37,"babel-runtime/core-js/object/assign":1,"babel-runtime/helpers/interop-require-wildcard":8}],37:[function(b,c,d){"use strict";var e=b("babel-runtime/core-js/object/assign")["default"];Object.defineProperty(d,"__esModule",{value:!0});var f=Object.prototype.hasOwnProperty,g="Function,String,Array,Object,Number,Boolean".split(","),h={isReference:function(a){return this.isArray(a)||this.isObject(a)},isValue:function(a){return!this.isReference(a)},isEmpty:function(a){if(null==a)return!0;if(a.length>0)return!1;if(0===a.length)return!0;for(var b in a)if(f.call(a,b))return!1;return!0},options:function(){for(var a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];return e.apply(Object,b)},addQueryString:function(a,b){var c=document.createElement("a"),d="?",e=void 0;c.href=a.replace("?","");for(e in b)b.hasOwnProperty(e)&&b[e]&&(d+=""+e+"="+b[e]+"&");return c.search=d.replace(/&$/,""),c.toString()},getQuery:function(a){var b=document.createElement("a");return b.href=a,this.resolveQuery(b.search)},getHash:function(a){var b=document.createElement("a");return b.href=a,b.hash.replace(/^#/,"")},addHashString:function(a,b){var c=document.createElement("a");return c.href=a,c.hash="#"+b.replace(/^#/,""),c.toString()},resolveQuery:function(a){for(var b=a.replace("?","").split("&"),c={},d=0;d<b.length;d++)if(b[d]){var e=b[d].split("=");c[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return c},isAbsolutePath:function(a){var b=new RegExp("^(?:[a-z]+:)?//","i");return b.test(a)},resolvePath:function(){for(var a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];var d=b.length;if(0===d)throw new Error("resolveUrl requires at least one argument; got none.");var e=document.createElement("base");if(e.href=b[0],1===d)return e.href;var f=document.getElementsByTagName("head")[0];f.insertBefore(e,f.firstChild);for(var g=document.createElement("a"),h="",i=1;d>i;i++)g.href=b[i],h=g.href,e.href=h;return f.removeChild(e),h},before:function(a,b,c){var d;a=a||window,d=a[b],a[b]=function(){for(var b=arguments.length,e=Array(b),f=0;b>f;f++)e[f]=arguments[f];var g=c.apply(a,e);return e.push(g),d.apply(a,e),g}},after:function(a,b,c){var d;a=a||window,d=a[b],a[b]=function(){for(var b=arguments.length,e=Array(b),f=0;b>f;f++)e[f]=arguments[f];var g=d.apply(a,e);return e.push(g),c.apply(a,e)}},getCurrentScript:function(){var b=function(){var b=document,c=b.head||b.getElementsByTagName("head")[0]||b.documentElement;if(b.currentScript)return b.currentScript.src;var d=void 0;try{a.b.c()}catch(e){d=e.stack,!d&&window.opera&&(d=(String(e).match(/of linked script \S+/g)||[]).join(" "))}if(d)return d=d.split(/[@ ]/g).pop(),d="("==d[0]?d.slice(1,-1):d,d.replace(/(:\d+)?:\d+$/i,"");for(var f=c.getElementsByTagName("script"),g=0,h=void 0;h=f[g++];)if("interactive"===h.readyState)return h.className=h.src}();return{uri:b.replace(/(#|\?).*/,""),query:this.getQuery(b),hash:this.getHash(b)}}};g.forEach(function(a){return h["is"+a]=function(b){return Object.prototype.toString.call(b)==="[object "+a+"]"}}),d["default"]=h,c.exports=d["default"]},{"babel-runtime/core-js/object/assign":1}]},{},[36]);